import{r,j as e,Q as vt,u as qe,a as zs,B as $s,R as Is,b as Le,c as Ts,d as Vs}from"./vendor-DgUtky3n.js";import{g as Fs,U as Rt,B as Rs,a as Hs,A as Os,b as qs,J as Us,c as Ys,d as Js,C as Gs}from"./recruitment-DO5PpnVx.js";import{E as Xs,I as Qs,P as Ks}from"./admin-CFWOoK0x.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))g(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const n of m.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&g(n)}).observe(document,{childList:!0,subtree:!0});function l(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function g(i){if(i.ep)return;i.ep=!0;const m=l(i);fetch(i.href,m)}})();const Gt=r.createContext(null);function Zs({children:s}){const[a,l]=r.useState(null);r.useEffect(()=>{localStorage.getItem("hr_portal_user")&&localStorage.removeItem("hr_portal_user")},[]);const g=m=>{l(m);const{id:n,name:S,role:v}=m;localStorage.setItem("hr_portal_user",JSON.stringify({id:n,name:S,role:v}))},i=()=>{l(null),localStorage.removeItem("hr_portal_user")};return e.jsx(Gt.Provider,{value:{user:a,login:g,logout:i},children:s})}function Ie(){const s=r.useContext(Gt);if(!s)throw new Error("useAuthContext must be used within AuthProvider");return s}const at="/api";function Oe({employeeId:s,token:a,currentUserRole:l,currentUserId:g,onClose:i}){const[m,n]=r.useState("overview"),[S,v]=r.useState(!0),[E,C]=r.useState(null),[d,N]=r.useState(null),[j,z]=r.useState(null),[k,f]=r.useState(null),[x,b]=r.useState([]),[B,h]=r.useState(null),P=l==="hr"||l==="admin",V=g===s;r.useEffect(()=>{w()},[s]);const _=async o=>{const M=await fetch(o,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!M.ok)throw new Error("Failed to fetch data");return M.json()},w=async()=>{v(!0),C(null);try{const[o,M,Q,se]=await Promise.all([_(`${at}/employees/${s}`),_(`${at}/employees/${s}/compliance`),_(`${at}/employees/${s}/bank`),_(`${at}/employees/${s}/documents`)]);N(o),z(M),f(Q),b(se.documents||[])}catch(o){C(o instanceof Error?o.message:"Failed to load profile")}finally{v(!1)}},$=()=>{if(!d)return 0;let o=0,M=8;return d.email&&o++,d.department&&o++,d.job_title&&o++,d.location&&o++,d.nationality&&o++,d.joining_date&&o++,j?.emirates_id_number&&o++,j?.visa_number&&o++,Math.round(o/M*100)},y=o=>{switch(o?.toLowerCase()){case"active":return"bg-emerald-100 text-emerald-800";case"inactive":return"bg-slate-200 text-slate-900";case"probation":return"bg-amber-100 text-amber-800";case"under probation":return"bg-amber-100 text-amber-800";default:return"bg-slate-200 text-slate-900"}},T=o=>o===null?"text-gray-400":o<0?"text-red-600":o<=30?"text-orange-600":o<=60?"text-yellow-600":"text-emerald-600",O=o=>o===null?null:o<0?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Expired"}):o<=30?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:"Expiring Soon"}):o<=60?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"60 days"}):e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full",children:"Valid"}),G=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"â€”",me=[{id:"overview",label:"Overview",icon:"ðŸ“‹"},{id:"personal",label:"Personal",icon:"ðŸ‘¤"},{id:"documents",label:"Documents",icon:"ðŸ“„"},{id:"compliance",label:"Compliance",icon:"ðŸ›¡ï¸",hrOnly:!V},{id:"bank",label:"Bank",icon:"ðŸ¦"}].filter(o=>!o.hrOnly||P);if(S)return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-auto shadow-2xl",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})})})});if(E)return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 w-full max-w-4xl shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"âš ï¸"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Profile"}),e.jsx("p",{className:"text-gray-600 mb-4",children:E}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-slate-200 text-slate-900 rounded-lg hover:bg-slate-300",children:"Close"})]})})});const ne=$();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 p-6 text-white relative",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-white/80 hover:text-white text-2xl font-light",children:"Ã—"}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-xl flex items-center justify-center text-3xl font-semibold backdrop-blur-sm",children:d?.name?.split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold",children:d?.name}),e.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full ${y(d?.employment_status)}`,children:d?.employment_status||"Unknown"})]}),e.jsxs("p",{className:"text-teal-100 text-sm mb-1",children:[d?.job_title||"No title"," â€¢ ",d?.department||"No department"]}),e.jsxs("p",{className:"text-teal-200 text-xs",children:["ID: ",d?.employee_id," â€¢ ",d?.location||"No location"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"rgba(255,255,255,0.2)",strokeWidth:"4",fill:"none"}),e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"white",strokeWidth:"4",fill:"none",strokeDasharray:`${ne/100*176} 176`,strokeLinecap:"round"})]}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold",children:[ne,"%"]})]}),e.jsx("p",{className:"text-xs text-teal-200 mt-1",children:"Profile"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("nav",{className:"flex px-4 -mb-px",children:me.map(o=>e.jsxs("button",{onClick:()=>n(o.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${m===o.id?"border-teal-600 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"mr-1.5",children:o.icon}),o.label]},o.id))})}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[m==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‘¤"})," Personal Info"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email"}),e.jsx("span",{className:"text-gray-900",children:d?.email||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Phone"}),e.jsx("span",{className:"text-gray-900",children:d?.company_phone||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Nationality"}),e.jsx("span",{className:"text-gray-900",children:d?.nationality||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Gender"}),e.jsx("span",{className:"text-gray-900",children:d?.gender||"â€”"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¼"})," Employment"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Joined"}),e.jsx("span",{className:"text-gray-900",children:G(d?.joining_date||null)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Manager"}),e.jsx("span",{className:"text-gray-900",children:d?.line_manager_name||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Location"}),e.jsx("span",{className:"text-gray-900",children:d?.location||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Contract"}),e.jsx("span",{className:"text-gray-900",children:j?.contract_type||"â€”"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ›¡ï¸"})," Compliance Status"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Visa"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:T(j?.visa_days_until_expiry||null),children:G(j?.visa_expiry_date||null)}),O(j?.visa_days_until_expiry||null)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Emirates ID"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:T(j?.emirates_id_days_until_expiry||null),children:G(j?.emirates_id_expiry||null)}),O(j?.emirates_id_days_until_expiry||null)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Medical"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:T(j?.medical_fitness_days_until_expiry||null),children:G(j?.medical_fitness_expiry||null)}),O(j?.medical_fitness_days_until_expiry||null)]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“„"})," Documents"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total documents"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-red-600",children:[x.filter(o=>o.is_expired).length," expired"]}),e.jsxs("p",{className:"text-sm font-medium text-orange-600",children:[x.filter(o=>o.is_expiring_soon).length," expiring"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¦"})," Bank Details"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:k?.bank_name||"Not provided"}),k?.iban&&e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[k.iban.slice(0,8),"..."]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k?.is_verified?"bg-emerald-100 text-emerald-700":k?.has_pending_changes?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-900"}`,children:k?.is_verified?"Verified":k?.has_pending_changes?"Pending":"Not verified"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¥"})," Insurance"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Provider"}),e.jsx("span",{className:"text-gray-900",children:j?.medical_insurance_provider||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Category"}),e.jsx("span",{className:"text-gray-900",children:j?.medical_insurance_category||"â€”"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"ILOE Status"}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${j?.iloe_status==="Active"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-900"}`,children:j?.iloe_status||"Unknown"})]})]})]})]}),m==="personal"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“±"})," Contact Information"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Company Email"}),e.jsx("p",{className:"text-gray-900",children:d?.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Company Phone"}),e.jsx("p",{className:"text-gray-900",children:d?.company_phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Personal Email"}),e.jsx("p",{className:"text-gray-900",children:B?.personal_email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Personal Phone"}),e.jsx("p",{className:"text-gray-900",children:B?.personal_phone||"Not provided"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ†˜"})," Emergency Contact"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:B?.emergency_contact_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Relationship"}),e.jsx("p",{className:"text-gray-900",children:B?.emergency_contact_relationship||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:B?.emergency_contact_phone||"Not provided"})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ "})," Address"]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("p",{className:"text-gray-900",children:[B?.current_address||"Not provided",B?.city&&`, ${B.city}`,B?.country&&`, ${B.country}`]})})]})]}),m==="documents"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Documents (",x.length,")"]}),(P||V)&&e.jsx("button",{className:"px-4 py-2 bg-teal-600 text-white rounded-lg text-sm font-medium hover:bg-teal-700 transition-colors",children:"+ Upload Document"})]}),x.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-4xl mb-2",children:"ðŸ“"}),e.jsx("p",{className:"text-gray-500",children:"No documents uploaded yet"})]}):e.jsx("div",{className:"grid gap-3",children:x.map(o=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg ${o.is_expired?"bg-red-100":o.is_expiring_soon?"bg-orange-100":"bg-teal-100"}`,children:o.document_type==="passport"?"ðŸ“˜":o.document_type==="visa"?"ðŸ›‚":o.document_type==="emirates_id"?"ðŸªª":o.document_type==="medical_fitness"?"ðŸ¥":"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.document_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.document_number&&`#${o.document_number} â€¢ `,o.expiry_date?`Expires: ${G(o.expiry_date)}`:"No expiry"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[O(o.days_until_expiry),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o.status==="verified"?"bg-emerald-100 text-emerald-700":o.status==="pending"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:o.status})]})]},o.id))})]}),m==="compliance"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ›‚"})," Visa"]}),O(j?.visa_days_until_expiry||null)]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Number"}),e.jsx("span",{className:"text-blue-900 font-medium",children:j?.visa_number||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Status"}),e.jsx("span",{className:"text-blue-900 font-medium",children:j?.visa_status||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Expiry"}),e.jsx("span",{className:`font-medium ${T(j?.visa_days_until_expiry||null)}`,children:G(j?.visa_expiry_date||null)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-5 border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-emerald-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸªª"})," Emirates ID"]}),O(j?.emirates_id_days_until_expiry||null)]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-emerald-700",children:"Number"}),e.jsx("span",{className:"text-emerald-900 font-medium font-mono",children:j?.emirates_id_number||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-emerald-700",children:"Expiry"}),e.jsx("span",{className:`font-medium ${T(j?.emirates_id_days_until_expiry||null)}`,children:G(j?.emirates_id_expiry||null)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 rounded-xl p-5 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-rose-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¥"})," Medical Fitness"]}),O(j?.medical_fitness_days_until_expiry||null)]}),e.jsx("div",{className:"space-y-3 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-rose-700",children:"Expiry"}),e.jsx("span",{className:`font-medium ${T(j?.medical_fitness_days_until_expiry||null)}`,children:G(j?.medical_fitness_expiry||null)})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl p-5 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-amber-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Contract"]}),O(j?.contract_days_until_expiry||null)]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-amber-700",children:"Type"}),e.jsx("span",{className:"text-amber-900 font-medium",children:j?.contract_type||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-amber-700",children:"End Date"}),e.jsx("span",{className:`font-medium ${T(j?.contract_days_until_expiry||null)}`,children:G(j?.contract_end_date||null)})]})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-br from-teal-50 to-teal-50 rounded-xl p-5 border border-teal-100",children:[e.jsxs("h4",{className:"font-semibold text-teal-900 flex items-center gap-2 mb-4",children:[e.jsx("span",{children:"ðŸ›¡ï¸"})," Insurance & ILOE"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-teal-700",children:"Medical Provider"}),e.jsx("p",{className:"text-teal-900 font-medium",children:j?.medical_insurance_provider||"â€”"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-teal-700",children:"Category"}),e.jsx("p",{className:"text-teal-900 font-medium",children:j?.medical_insurance_category||"â€”"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-teal-700",children:"ILOE Status"}),e.jsx("p",{className:"text-teal-900 font-medium",children:j?.iloe_status||"â€”"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-teal-700",children:"ILOE Expiry"}),e.jsx("p",{className:`font-medium ${T(j?.iloe_days_until_expiry||null)}`,children:G(j?.iloe_expiry||null)})]})]})]})]}),m==="bank"&&e.jsx("div",{className:"max-w-lg",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¦"})," Bank Account Details"]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${k?.is_verified?"bg-emerald-100 text-emerald-700":k?.has_pending_changes?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-900"}`,children:k?.is_verified?"âœ“ Verified":k?.has_pending_changes?"â³ Pending Approval":"Not Verified"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900 font-medium text-lg",children:k?.bank_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Account Number"}),e.jsx("p",{className:"text-gray-900 font-mono",children:k?.account_number?"â€¢â€¢â€¢â€¢"+k.account_number.slice(-4):"â€”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"IBAN"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:k?.iban||"â€”"})]})]}),V&&!k?.is_verified&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{className:"w-full py-2.5 bg-teal-600 text-white rounded-lg text-sm font-medium hover:bg-teal-700 transition-colors",children:"Update Bank Details"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Changes require HR approval"})]})]})})]})]})})}const er=()=>e.jsx("div",{className:"main",children:e.jsxs("div",{className:"up",children:[e.jsxs("div",{className:"loaders",children:[e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"}),e.jsx("div",{className:"loader"})]}),e.jsxs("div",{className:"loadersB",children:[e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball0"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball1"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball2"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball3"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball4"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball5"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball6"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball7"})}),e.jsx("div",{className:"loaderA",children:e.jsx("div",{className:"ball8"})})]})]})});function tr({metrics:s,positionTitle:a,requestNumber:l,onFlip:g}){const i=s.applicationSources.agency+s.applicationSources.direct+s.applicationSources.referral,m=n=>i===0?0:Math.round(n/i*100);return e.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-[#1800ad] to-[#0d0066] text-white",children:[e.jsx("div",{className:"px-4 pt-4 pb-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-wider text-white/60",children:"Recruitment Metrics"}),e.jsx("p",{className:"text-xs font-semibold text-white/90 mt-0.5",children:a}),l&&e.jsx("p",{className:"text-[10px] font-mono text-white/50 mt-0.5",children:l})]}),e.jsx("button",{onClick:g,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Flip to front",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),e.jsx("div",{className:"flex-1 px-4 pb-4 overflow-y-auto",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-white/60 font-semibold",children:"Days Since Request"}),e.jsx("p",{className:"text-[10px] text-white/40 mt-0.5",children:"Request raised"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-black text-white",children:s.daysSinceRequest}),e.jsx("p",{className:"text-[9px] text-white/50",children:"days"})]})]})}),e.jsx("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white/80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-white/60 font-semibold",children:"Applications Received"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.applicationsReceived})]})]})}),e.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-white/60 font-semibold mb-3",children:"Application Sources"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-white/80 font-medium",children:"Agency"}),e.jsx("span",{className:"text-white font-bold",children:s.applicationSources.agency})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-400 rounded-full transition-all duration-500",style:{width:`${m(s.applicationSources.agency)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-white/80 font-medium",children:"Direct"}),e.jsx("span",{className:"text-white font-bold",children:s.applicationSources.direct})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400 rounded-full transition-all duration-500",style:{width:`${m(s.applicationSources.direct)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-white/80 font-medium",children:"Referral"}),e.jsx("span",{className:"text-white font-bold",children:s.applicationSources.referral})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-sky-400 rounded-full transition-all duration-500",style:{width:`${m(s.applicationSources.referral)}%`}})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-3xl font-black text-white",children:s.candidatesShortlisted}),e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-white/50 font-semibold mt-1",children:"Shortlisted"})]}),e.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm border border-white/10 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-500/20 flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-5 h-5 text-sky-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"text-3xl font-black text-white",children:s.candidatesInterviewed}),e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-white/50 font-semibold mt-1",children:"Interviewed"})]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-t border-white/10 flex-shrink-0",children:e.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 py-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"text-[10px] text-white/60 font-medium",children:"Tap to flip back"})]})})]})}const sr=[{id:"home",label:"Home",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"documents",label:"Documents",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{id:"interview",label:"Interview",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:"engage",label:"Engage",icon:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}];function rr({recruitmentRequestId:s,managerId:a,token:l,onBack:g}){const[i,m]=r.useState(null),[n,S]=r.useState(!0),[v,E]=r.useState(null),[C,d]=r.useState("home"),[N,j]=r.useState(!1),[z,k]=r.useState(!1),[f,x]=r.useState(!1),[b,B]=r.useState([]),[h,P]=r.useState(!1),[V,_]=r.useState(0),[w,$]=r.useState(""),[y,T]=r.useState(!1),[O,G]=r.useState(!1),[oe,me]=r.useState(!1),[ne,o]=r.useState({technical_assessment_required:!1,interview_format:"online",interview_rounds:2,notes:""}),[M,Q]=r.useState([]),[se,he]=r.useState([]),X="/api",be=["09:00-10:00","10:00-11:00","11:00-12:00","14:00-15:00","15:00-16:00","16:00-17:00"],K=()=>Hs(i?.entity||""),ye=()=>i?.entity?i.entity.includes("Agriculture")?"Agriculture Division":i.entity.includes("Water")?"Watergeneration":i.entity:"Baynunah Group",Ne=()=>i?`${window.location.origin}/manager-pass/${s}?token=${i.pass_token}`:"",Ye=()=>{if(!i)return{daysSinceRequest:0,applicationsReceived:0,applicationSources:{agency:0,direct:0,referral:0},candidatesShortlisted:0,candidatesInterviewed:0};const p=i.request_created_at?new Date(i.request_created_at):new Date,H=Math.floor((new Date().getTime()-p.getTime())/(1e3*60*60*24)),fe=.3,ke=.5,ie=i.application_sources||{agency:Math.floor(i.total_candidates*fe),direct:Math.floor(i.total_candidates*ke),referral:i.total_candidates-Math.floor(i.total_candidates*fe)-Math.floor(i.total_candidates*ke)},Me=(i.pipeline_stats.screening||0)+(i.pipeline_stats.interview||0)+(i.pipeline_stats.offer||0)+(i.pipeline_stats.hired||0),Pe=i.confirmed_interviews.filter(ot=>ot.candidate_confirmed).length;return{daysSinceRequest:Math.max(0,H),applicationsReceived:i.total_candidates,applicationSources:ie,candidatesShortlisted:Me,candidatesInterviewed:Pe}};r.useEffect(()=>{xe()},[s]);const xe=async()=>{try{S(!0);const p=await fetch(`${X}/interview/pass/manager/${s}?manager_id=${a}`,{headers:{Authorization:`Bearer ${l}`}});if(!p.ok)throw new Error("Failed to load pass data");const A=await p.json();m(A)}catch(p){E(p instanceof Error?p.message:"Failed to load pass")}finally{S(!1)}},Be=async()=>{try{const p=await fetch(`${X}/interview/setup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({recruitment_request_id:s,...ne,additional_interviewers:[]})});if(!p.ok)throw new Error("Failed to save setup");let A=null;const H=p.headers.get("content-type");if(H&&H.includes("application/json")&&p.status!==204)try{A=await p.json()}catch{A=null}if(M.length>0&&se.length>0&&A?.id){const fe={interview_setup_id:A.id,dates:M,time_slots:se.map(ke=>{const[ie,Me]=ke.split("-");return{start_time:ie+":00",end_time:Me+":00"}}),round_number:1};await fetch(`${X}/interview/slots/bulk`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(fe)})}j(!1),Q([]),he([]),await xe()}catch(p){alert(p instanceof Error?p.message:"Save failed")}},Te=async()=>{try{P(!0);const p=await fetch(`${X}/recruitment/requests/${s}/candidates`,{headers:{Authorization:`Bearer ${l}`}});if(!p.ok)throw new Error("Failed to load candidates");const A=await p.json();B(A)}catch(p){console.error("Failed to load candidates:",p)}finally{P(!1)}},Se=async()=>{await Te(),x(!0)},u=async()=>{if(V!==0)try{if(T(!0),!(await fetch(`${X}/interview/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({recruitment_request_id:s,manager_id:a,rating:V,feedback_text:w,feedback_type:"manager_experience"})})).ok)throw new Error("Failed to submit feedback");G(!0)}catch{alert("Failed to submit feedback. Please try again.")}finally{T(!1)}},F=()=>i?i.interview_setup?i.confirmed_interviews.length===0&&i.pipeline_stats.interview>0?{label:"Add Interview Slots",description:"Provide available times for candidates",onClick:()=>d("interview"),loading:!1}:null:{label:"Configure Interview",description:"Set up interview format and rounds",onClick:()=>d("interview"),loading:!1}:null;if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading..."})]})});if(v||!i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100",children:e.jsxs("div",{className:"bg-white border border-slate-200 shadow-lg rounded-2xl p-6 max-w-sm text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-base font-medium text-slate-800 mb-1",children:"Access Error"}),e.jsx("p",{className:"text-sm text-slate-500",children:v||"Unable to load pass"}),g&&e.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Go Back"})]})});const U=K(),ue=Fs(Rt,i.current_stage||"application"),ce=F(),De=()=>e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx("div",{className:"bg-[#1800ad] px-4 pt-4 pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-white",children:"Hiring Manager Pass"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>me(!0),className:"p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"View metrics",title:"View recruitment metrics",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("img",{src:"/assets/logo-white.png",alt:"Baynunah",className:"h-5 opacity-90",style:{filter:"brightness(0) invert(1)"}})]})]})}),e.jsx("div",{className:"px-4 -mt-3",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 shadow-lg p-4 relative overflow-hidden bg-white",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] text-slate-500 mb-0.5",children:i.manager_name}),e.jsx("p",{className:"text-[10px] font-mono text-slate-400 mb-2",children:i.pass_id}),e.jsx("h2",{className:"text-lg font-black text-slate-900 leading-tight",children:i.position_title}),e.jsx("p",{className:"text-sm font-medium text-slate-600",children:i.department})]}),e.jsxs("div",{onClick:Se,className:"flex-shrink-0 relative p-2 bg-white/80 rounded-xl cursor-pointer hover:shadow-lg transition-all duration-300 hover:scale-105 group border border-white/30",children:[e.jsx(vt,{value:Ne(),size:60,level:"H",fgColor:"#1800ad"}),e.jsx("p",{className:"text-[7px] text-center text-slate-400 mt-1",children:"View Applicants"})]})]}),e.jsxs("div",{className:"flex gap-6 mt-4 pt-3 border-t border-slate-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#1800ad"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-slate-400 font-semibold",children:"Stage"}),e.jsx("p",{className:"text-xs font-bold text-slate-800",children:Ys(i.current_stage||"application","manager")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-slate-400 font-semibold",children:"Status"}),e.jsx("p",{className:"text-xs font-bold text-slate-800",children:Js(i.current_stage||"application",i.status||i.position_status,"manager")})]})]})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50/80 rounded-full",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-[9px] font-bold text-emerald-600 uppercase",children:"Active"})]})})]})}),i.unread_messages>0&&e.jsx("div",{className:"absolute top-3 right-14",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-5 h-5 text-white/80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[8px] font-bold text-white flex items-center justify-center",children:i.unread_messages})]})})]}),Je=()=>e.jsx(Us,{stages:Rt,currentStageIndex:ue,entityColor:U,viewType:"manager"}),lt=()=>C==="home"?e.jsx(qs,{action:ce,entityColor:U}):null,we=()=>{switch(C){case"home":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2",children:"Pipeline Overview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border border-slate-200 shadow-sm text-center bg-slate-50",children:[e.jsx("p",{className:"text-lg font-bold text-slate-800",children:i.total_candidates||0}),e.jsx("p",{className:"text-[9px] text-slate-400",children:"Total"})]}),e.jsxs("div",{className:"p-3 rounded-xl border border-slate-200 shadow-sm text-center bg-slate-50",children:[e.jsx("p",{className:"text-lg font-bold",style:{color:"#1800ad"},children:i.pipeline_stats.interview||0}),e.jsx("p",{className:"text-[9px] text-slate-400",children:"Interview"})]}),e.jsxs("div",{className:"p-3 rounded-xl border border-slate-200 shadow-sm text-center bg-slate-50",children:[e.jsx("p",{className:"text-lg font-bold text-emerald-600",children:i.pipeline_stats.offer||0}),e.jsx("p",{className:"text-[9px] text-slate-400",children:"Offer"})]})]})]}),e.jsx("div",{className:"p-3 rounded-xl border border-slate-200 shadow-sm bg-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(24, 0, 173, 0.1)"},children:e.jsx("svg",{className:"w-4 h-4",style:{color:"#1800ad"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Position Status"}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Active recruitment"})]})]}),e.jsx("span",{className:"text-[9px] px-2 py-1 rounded-full font-semibold",style:{backgroundColor:"rgba(24, 0, 173, 0.1)",color:"#1800ad"},children:i.position_status})]})}),i.activity_history&&i.activity_history.length>0&&e.jsx(Os,{activities:i.activity_history,collapsed:!0})]});case"documents":return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"Documents"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"rounded-xl p-4 border border-slate-200 shadow-sm bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl p-2.5 border border-slate-200 bg-slate-50",children:e.jsx("svg",{className:"h-5 w-5",style:{color:"#1800ad"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Job Description"}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Required document"})]})]}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-full font-semibold ${i.jd_status==="approved"?"bg-emerald-100 text-emerald-700":i.jd_status==="submitted"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:i.jd_status})]})}),e.jsx("div",{className:"rounded-xl p-4 border border-slate-200 shadow-sm bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl p-2.5 border border-slate-200 bg-slate-50",children:e.jsx("svg",{className:"h-5 w-5",style:{color:"#1800ad"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Recruitment Form"}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Required document"})]})]}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-full font-semibold ${i.recruitment_form_status==="approved"?"bg-emerald-100 text-emerald-700":i.recruitment_form_status==="submitted"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:i.recruitment_form_status})]})})]})]});case"interview":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-xl p-2.5 border border-slate-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[10px] font-semibold text-slate-700",children:new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"})}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx("button",{className:"p-1 hover:bg-slate-100 rounded transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{className:"p-1 hover:bg-slate-100 rounded transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 text-center mb-1",children:["S","M","T","W","T","F","S"].map((p,A)=>e.jsx("div",{className:"text-[8px] text-slate-400 font-medium",children:p},A))}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 text-center",children:Array.from({length:35},(p,A)=>{const H=A-new Date(new Date().getFullYear(),new Date().getMonth(),1).getDay()+1,fe=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),ke=H===new Date().getDate(),ie=i.confirmed_interviews.some(Me=>new Date(Me.slot_date).getDate()===H);return e.jsx("div",{className:`text-[9px] py-1 rounded transition-colors ${ie?"text-white font-bold":ke?"bg-slate-100 font-semibold text-slate-800":H>0&&H<=fe?"text-slate-600":"text-slate-200"}`,style:ie?{backgroundColor:U}:{},children:H>0&&H<=fe?H:""},A)})})]}),e.jsx("div",{className:"bg-white rounded-xl p-2.5 border border-slate-100 shadow-sm",children:i.interview_setup?e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-semibold text-slate-700 mb-2",children:"Availability"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-[9px]",children:[e.jsx("span",{className:"text-slate-400",children:"Format"}),e.jsx("span",{className:"font-medium text-slate-700 capitalize",children:i.interview_setup.interview_format})]}),e.jsxs("div",{className:"flex justify-between text-[9px]",children:[e.jsx("span",{className:"text-slate-400",children:"Rounds"}),e.jsx("span",{className:"font-medium text-slate-700",children:i.interview_setup.interview_rounds})]}),e.jsxs("div",{className:"flex justify-between text-[9px]",children:[e.jsx("span",{className:"text-slate-400",children:"Assessment"}),e.jsx("span",{className:"font-medium text-slate-700",children:i.interview_setup.technical_assessment_required?"Yes":"No"})]})]}),e.jsx("button",{onClick:()=>j(!0),className:"mt-2 w-full py-1.5 text-[9px] font-medium text-white rounded-lg transition-colors",style:{backgroundColor:U},children:"Add Time Slots"})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[e.jsx("svg",{className:"w-6 h-6 text-slate-300 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:"Setup Required"}),e.jsx("button",{onClick:()=>j(!0),className:"px-3 py-1.5 text-[9px] font-semibold text-white rounded-lg transition-colors",style:{backgroundColor:U},children:"Interview Setup"})]})})]}),N&&e.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Configure Interview"}),e.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-500 mb-1",children:"Assessment?"}),e.jsx("div",{className:"flex gap-1",children:[!0,!1].map(p=>e.jsx("button",{onClick:()=>o({...ne,technical_assessment_required:p}),className:`flex-1 py-1.5 text-[9px] rounded-lg border transition-colors ${ne.technical_assessment_required===p?"text-white border-transparent":"bg-white text-slate-600 border-slate-200"}`,style:ne.technical_assessment_required===p?{backgroundColor:U}:{},children:p?"Yes":"No"},String(p)))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-500 mb-1",children:"Rounds"}),e.jsx("select",{value:ne.interview_rounds,onChange:p=>o({...ne,interview_rounds:parseInt(p.target.value)}),className:"w-full p-1.5 border border-slate-200 rounded-lg text-[10px] bg-white",children:[1,2,3,4].map(p=>e.jsx("option",{value:p,children:p},p))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-500 mb-1",children:"Format"}),e.jsx("div",{className:"flex gap-1",children:["online","in-person","hybrid"].map(p=>e.jsx("button",{onClick:()=>o({...ne,interview_format:p}),className:`flex-1 py-1.5 text-[9px] rounded-lg border transition-colors capitalize ${ne.interview_format===p?"text-white border-transparent":"bg-white text-slate-600 border-slate-200"}`,style:ne.interview_format===p?{backgroundColor:U}:{},children:p},p))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-500 mb-1",children:"Add Dates"}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],onChange:p=>{p.target.value&&!M.includes(p.target.value)&&Q([...M,p.target.value])},className:"w-full p-1.5 border border-slate-200 rounded-lg text-[10px] bg-white"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[9px] text-slate-500 mb-1",children:["Selected: ",M.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1 max-h-8 overflow-y-auto",children:[M.slice(0,3).map(p=>e.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-white text-slate-600 text-[8px] rounded border border-slate-200",children:[new Date(p).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),e.jsx("button",{onClick:()=>Q(M.filter(A=>A!==p)),className:"text-slate-400",children:"Ã—"})]},p)),M.length>3&&e.jsxs("span",{className:"text-[8px] text-slate-400",children:["+",M.length-3]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-slate-500 mb-1",children:"Time Slots"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:be.map(p=>e.jsx("button",{onClick:()=>{se.includes(p)?he(se.filter(A=>A!==p)):he([...se,p])},className:`py-1 text-[8px] rounded-lg border transition-colors ${se.includes(p)?"text-white border-transparent":"bg-white text-slate-600 border-slate-200"}`,style:se.includes(p)?{backgroundColor:U}:{},children:p},p))})]}),e.jsx("button",{onClick:Be,className:"w-full py-2 text-white text-[10px] font-semibold rounded-lg transition-colors",style:{backgroundColor:U},children:"Save Configuration"})]})]}),i.interview_setup&&i.confirmed_interviews.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase tracking-wider text-slate-400 font-bold mb-1.5",children:"Confirmed Candidates"}),e.jsx("div",{className:"space-y-1.5",children:i.confirmed_interviews.map(p=>e.jsxs("div",{className:"rounded-lg bg-white p-2 border border-slate-100 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-800",children:p.candidate_name||"Candidate"}),e.jsxs("p",{className:"text-[9px] text-slate-500",children:[new Date(p.slot_date).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})," â€¢ ",p.start_time.substring(0,5)]})]}),e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded-full font-semibold",style:{backgroundColor:p.candidate_confirmed?"#dcfce7":"#fef3c7",color:p.candidate_confirmed?"#166534":"#92400e"},children:p.candidate_confirmed?"Confirmed":"Pending"})]},p.id))})]}),i.interview_setup&&i.confirmed_interviews.length===0&&!N&&e.jsxs("div",{className:"rounded-xl bg-slate-50 p-3 text-center",children:[e.jsx("svg",{className:"w-6 h-6 text-slate-300 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"No confirmed interviews yet"}),e.jsx("p",{className:"text-[9px] text-slate-400",children:"Candidates will appear here once they book"})]})]});case"engage":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2",children:"Contact HR"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("a",{href:`https://wa.me/${i.hr_whatsapp?.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 p-4 rounded-xl border border-slate-200 hover:shadow-md transition-all bg-white",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),e.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"WhatsApp"})]}),e.jsxs("a",{href:`mailto:${i.hr_email}`,className:"flex flex-col items-center gap-2 p-4 rounded-xl border border-slate-200 hover:shadow-md transition-all bg-white",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"#1800ad"},children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})}),e.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Email"})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-2",children:"Feedback & Suggestions"}),e.jsx("div",{className:"rounded-xl p-4 border border-slate-200 bg-white",children:O?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Thank you!"}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Your feedback helps us improve"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs font-medium text-slate-700 mb-3",children:"How is your experience with the recruitment process?"}),e.jsx("div",{className:"flex gap-1 mb-3",children:[1,2,3,4,5].map(p=>e.jsx("button",{onClick:()=>_(p),className:"p-1 transition-transform hover:scale-110",children:e.jsx("svg",{className:`w-7 h-7 ${p<=V?"text-amber-400":"text-slate-200"}`,fill:p<=V?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})},p))}),e.jsx("textarea",{value:w,onChange:p=>$(p.target.value),placeholder:"Share your suggestions or feedback...",className:"w-full p-3 text-xs rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-[#1800ad]/20 focus:border-[#1800ad] resize-none bg-white/80",rows:3}),e.jsx("button",{onClick:u,disabled:V===0||y,className:"w-full mt-3 py-2.5 rounded-lg text-xs font-semibold text-white transition-all disabled:opacity-50",style:{backgroundColor:"#1800ad"},children:y?"Submitting...":"Submit Feedback"})]})})]}),e.jsxs("div",{className:"rounded-xl p-4 border border-slate-200 bg-slate-50",children:[e.jsx("p",{className:"text-xs font-medium text-slate-700 mb-1",children:"HR Contact"}),e.jsx("p",{className:"text-[11px] text-slate-500",children:i.hr_email}),i.hr_whatsapp&&e.jsx("p",{className:"text-[11px] text-slate-500",children:i.hr_whatsapp})]})]});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full h-full [perspective:1000px]",children:e.jsxs("div",{className:`relative w-full h-full transition-transform duration-500 [transform-style:preserve-3d] ${oe?"[transform:rotateY(180deg)]":""}`,children:[e.jsx("div",{className:"absolute inset-0 [backface-visibility:hidden]",children:e.jsx(Rs,{entityColor:U,entityName:ye(),passType:"manager",header:De(),journey:Je(),actionRequired:lt(),tabs:sr,activeTab:C,onTabChange:p=>d(p),children:we()})}),e.jsx("div",{className:"absolute inset-0 [backface-visibility:hidden] [transform:rotateY(180deg)]",children:e.jsx("div",{className:"h-full bg-white rounded-3xl shadow-2xl overflow-hidden",children:e.jsx(tr,{metrics:Ye(),positionTitle:i.position_title,requestNumber:i.recruitment_request_number,onFlip:()=>me(!1)})})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Applicants"}),e.jsx("p",{className:"text-[11px] text-slate-500",children:i.position_title})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-slate-200 border-t-[#1800ad] rounded-full animate-spin"})}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-200 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-sm text-slate-500",children:"No applicants yet"})]}):e.jsx("div",{className:"space-y-2",children:b.map(p=>e.jsxs("div",{className:"p-3 rounded-xl border border-slate-200 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:p.full_name}),e.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:p.candidate_number})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-[9px] px-2 py-1 rounded-full font-semibold capitalize",style:{backgroundColor:p.stage==="offer"?"#dcfce7":p.stage==="interview"?"rgba(24, 0, 173, 0.1)":"#f1f5f9",color:p.stage==="offer"?"#166534":p.stage==="interview"?"#1800ad":"#64748b"},children:p.stage})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:p.email})]},p.id))})})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>k(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full text-center",onClick:p=>p.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Manager Pass QR"}),e.jsx("div",{className:"inline-block p-4 bg-white rounded-xl border-2 mb-4",style:{borderColor:"#1800ad"},children:e.jsx(vt,{value:Ne(),size:200,level:"H",fgColor:"#1800ad"})}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Scan to access manager pass"}),e.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Close"})]})})]})}const $e="/api",Ee=2025,ee="#1800ad";function ar(){const[s,a]=r.useState("select-manager"),[l,g]=r.useState([]),[i,m]=r.useState(null),[n,S]=r.useState(""),[v,E]=r.useState(null),[C,d]=r.useState([]),[N,j]=r.useState(null),[z,k]=r.useState(null),[f,x]=r.useState({nominee_id:null,justification:"",achievements:"",impact_description:"",achievement_categories:[]}),[b,B]=r.useState(!1),[h,P]=r.useState(null),[V,_]=r.useState(null),[w,$]=r.useState("home"),[y,T]=r.useState(null),[O,G]=r.useState(null),[oe,me]=r.useState(!1);r.useEffect(()=>{o(),ne()},[]),r.useEffect(()=>{if(y?.deadline){const u=()=>{const U=new Date().getTime(),ce=new Date(y.deadline).getTime()-U;ce>0?G({days:Math.floor(ce/864e5),hours:Math.floor(ce%864e5/36e5),minutes:Math.floor(ce%36e5/6e4)}):G(null)};u();const F=setInterval(u,6e4);return()=>clearInterval(F)}},[y?.deadline]),r.useEffect(()=>{me(!0);const u=setTimeout(()=>me(!1),300);return()=>clearTimeout(u)},[s]);const ne=async()=>{try{const u=await fetch(`${$e}/nominations/pass/info?year=${Ee}`);if(u.ok){const F=await u.json();T(F)}}catch{console.error("Failed to fetch nomination info")}},o=async()=>{B(!0);try{const u=await fetch(`${$e}/nominations/pass/managers?year=${Ee}`);if(!u.ok)throw new Error("Failed to load managers");const F=await u.json();g(F)}catch{P("Could not load manager list. Please try again.")}finally{B(!1)}},M=async u=>{try{const F=await fetch(`${$e}/nominations/pass/status/${u}?year=${Ee}`);return F.ok?await F.json():null}catch{return null}},Q=u=>{m(u),S(""),k(null),a("verify")},se=async()=>{if(i){B(!0),P(null);try{const u=await fetch(`${$e}/nominations/pass/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({manager_id:i.id,verification_input:n.trim()})});if(!u.ok){const ue=await u.json();throw new Error(ue.detail||"Verification failed")}const F=await u.json();E(F.token);const U=await M(i.id);if(U&&U.has_nominated&&U.nomination){k(U.nomination),a("already-nominated");return}await he()}catch(u){P(u.message||"Email address does not match. Please try again.")}finally{B(!1)}}},he=async()=>{if(i){B(!0),P(null);try{const u=await fetch(`${$e}/nominations/eligible-employees/${i.id}?year=${Ee}`);if(!u.ok)throw new Error("Failed to load team members");const F=await u.json();d(F),a("select-nominee")}catch{P("Could not load your team. Please try again.")}finally{B(!1)}}},X=u=>{u.already_nominated||(j(u),x({...f,nominee_id:u.id}),a("form"))},be=async()=>{if(!(!i||!N||!v)){if(f.justification.length<50){P("Please provide at least 50 characters explaining why this employee deserves the award.");return}B(!0),P(null);try{const u=await fetch(`${$e}/nominations/pass/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nominee_id:N.id,justification:f.justification,achievements:f.achievements||null,impact_description:f.impact_description||null,achievement_categories:f.achievement_categories.length>0?f.achievement_categories:null,verification_token:v})});if(!u.ok){const U=await u.json();throw u.status===401?(E(null),a("verify"),new Error("Session expired. Please verify your identity again.")):new Error(U.detail||"Failed to submit nomination")}const F=await u.json();_(F),E(null),a("success")}catch(u){P(u.message||"Could not submit nomination. Please try again.")}finally{B(!1)}}},K=()=>{a("select-manager"),m(null),j(null),S(""),E(null),d([]),k(null),x({nominee_id:null,justification:"",achievements:"",impact_description:"",achievement_categories:[]}),_(null),P(null),$("home")},ye=["Access","Selection","Verification","Nomination","Submission"],Ne=["Manager enters the nomination portal","Manager selects their name from the authorized list","Email verification to confirm identity","Manager submits the employee nomination","Confirmation & record locked"],xe={"select-manager":1,verify:2,"already-nominated":4,"select-nominee":3,form:3,success:4}[s],Be=()=>{switch(s){case"select-manager":return"Selection";case"verify":return"Verification";case"already-nominated":return"Submission";case"select-nominee":return"Nomination";case"form":return"Nomination";case"success":return"Submission";default:return"Access"}},Te=()=>{switch(s){case"success":return"Completed";case"already-nominated":return"Completed";default:return"In Progress"}},Se=()=>{switch(s){case"select-manager":return"Choose your name from the manager list";case"verify":return"Enter your email to verify identity";case"already-nominated":return"You have already nominated for this year";case"select-nominee":return"Choose a team member to nominate";case"form":return"Explain why they deserve the award";case"success":return"Thank you for your nomination";default:return""}};return e.jsx("div",{className:"min-h-screen min-h-dvh bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center p-2 sm:p-4",children:e.jsx("div",{className:"w-full max-w-xl h-full max-h-[100dvh] sm:max-h-[95dvh] flex flex-col",children:e.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden flex flex-col flex-1 min-h-0",children:[e.jsx("div",{className:"px-5 py-4 sm:px-6 sm:py-5 text-white shrink-0",style:{backgroundColor:ee},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"text-xs sm:text-sm font-bold uppercase tracking-wider text-white",children:"Nomination Pass"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"/assets/baynunah-logo-black.png",alt:"Baynunah",className:"h-7 sm:h-8 object-contain",style:{filter:"brightness(0) invert(1)"}})})]})}),e.jsxs("div",{className:"p-3 sm:p-5 flex-1 overflow-y-auto min-h-0",children:[e.jsxs("div",{className:"flex justify-between mb-3 sm:mb-4 pb-3 sm:pb-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-between py-0.5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 012.916.52 6.003 6.003 0 01-5.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0a6.772 6.772 0 01-3.044 0"})}),e.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900 leading-tight",children:"Employee of the Year"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:i?.department||e.jsxs("span",{className:"font-bold",children:["Year ",Ee]})}),O&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-orange-600 font-medium",children:[O.days,"d ",O.hours,"h ",O.minutes,"m remaining"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 mt-2 sm:mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase tracking-wide mb-0.5",children:"Stage"}),e.jsx("p",{className:"text-[11px] sm:text-xs font-semibold",style:{color:ee},children:Be()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase tracking-wide mb-0.5",children:"Status"}),e.jsx("p",{className:"text-[11px] sm:text-xs font-semibold text-gray-700",children:Te()})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 sm:gap-1.5 ml-3 sm:ml-4",children:[e.jsx("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 text-[9px] sm:text-[10px] font-semibold rounded text-white",style:{backgroundColor:"#22c55e"},children:s==="success"?"SUBMITTED":"ACTIVE"}),e.jsx("div",{className:"bg-white p-1 sm:p-1.5 rounded-lg border border-gray-100 shadow-sm",children:e.jsx(vt,{value:"https://hr.baynunah.ae/nomination-pass",size:50,level:"M",fgColor:ee,className:"w-[45px] h-[45px] sm:w-[55px] sm:h-[55px]"})})]})]}),e.jsxs("div",{className:"relative mb-3 sm:mb-5",children:[e.jsx("div",{className:"absolute top-[14px] sm:top-4 left-[10%] right-[10%] h-0.5 bg-gray-200"}),e.jsx("div",{className:"absolute top-[14px] sm:top-4 left-[10%] h-0.5 transition-all duration-300",style:{width:`${Math.min(xe,ye.length-1)*20}%`,backgroundColor:"#22c55e"}}),e.jsx("div",{className:"relative flex justify-between",children:ye.map((u,F)=>{const U=xe>F,ce=U?"#22c55e":xe===F?ee:void 0;return e.jsxs("div",{className:"flex flex-col items-center",style:{width:"20%"},title:Ne[F],children:[e.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs font-semibold ${xe>=F?"text-white":"bg-slate-200 text-slate-900"}`,style:ce?{backgroundColor:ce}:{},children:U?e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("span",{className:"text-[10px] sm:text-xs",children:F+1})}),e.jsx("span",{className:"text-[9px] sm:text-[10px] text-gray-500 mt-1.5 sm:mt-2 text-center whitespace-nowrap",children:u})]},u)})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 sm:p-4 mb-3 sm:mb-4",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] text-gray-400 uppercase tracking-wider mb-1.5 sm:mb-2",children:"Next Action"}),e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:ee},children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-800",children:Be()}),e.jsx("p",{className:"text-[11px] sm:text-xs text-gray-500",children:Se()})]})]})]}),h&&e.jsxs("div",{className:"mb-3 sm:mb-4 p-2.5 sm:p-3 bg-red-50 border border-red-200 rounded-xl text-xs sm:text-sm text-red-700 flex items-center justify-between",children:[e.jsx("span",{children:h}),e.jsx("button",{onClick:()=>P(null),className:"text-red-500 hover:text-red-700 ml-2",children:"Ã—"})]}),e.jsxs("div",{className:"min-h-0 flex-1",style:{opacity:oe?0:1,transform:oe?"translateY(10px)":"translateY(0)",transition:"opacity 0.3s ease-out, transform 0.3s ease-out"},children:[s==="select-manager"&&e.jsx("div",{children:b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-3 rounded-full animate-spin",style:{borderColor:ee,borderTopColor:"transparent"}})}):e.jsxs("div",{className:"space-y-1.5 sm:space-y-2 max-h-[40vh] sm:max-h-64 overflow-y-auto",children:[l.map(u=>e.jsxs("button",{onClick:()=>Q(u),className:"w-full p-2.5 sm:p-3 text-left flex items-center justify-between bg-white border border-gray-200 rounded-xl hover:border-gray-300 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-semibold text-xs sm:text-sm shrink-0",style:{backgroundColor:ee},children:u.name.split(" ").map(F=>F[0]).join("").slice(0,2)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-xs sm:text-sm truncate",children:u.name}),e.jsx("p",{className:"text-[11px] sm:text-xs text-gray-500 truncate",children:u.job_title})]})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},u.id)),l.length===0&&!b&&e.jsx("p",{className:"text-center text-gray-500 py-8 text-sm",children:"No managers with eligible team members found."})]})}),s==="verify"&&i&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Hi ",e.jsx("span",{className:"font-semibold text-gray-800",children:i.name}),", please enter your email address to continue."]}),e.jsx("input",{type:"email",value:n,onChange:u=>S(u.target.value),placeholder:"Enter your email address",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-opacity-50 mb-3 text-sm",style:{"--tw-ring-color":ee},onKeyDown:u=>u.key==="Enter"&&se()}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"After verification, you'll have 30 minutes to complete your nomination."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>a("select-manager"),className:"flex-1 py-3 text-sm font-medium text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{onClick:se,disabled:!n.trim()||b,className:"flex-1 py-3 text-sm font-semibold text-white rounded-xl transition-all duration-200 disabled:opacity-50",style:{backgroundColor:ee},children:b?"Verifying...":"Continue"})]})]}),s==="already-nominated"&&z&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center bg-amber-100",children:e.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"Already Submitted"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["You have already submitted your nomination for ",Ee,"."]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 text-left",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wider mb-2",children:"Your Nomination"}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Nominee:"}),e.jsx("span",{className:"font-medium text-gray-900",children:z.nominee_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${z.status==="pending"?"bg-amber-100 text-amber-700":z.status==="shortlisted"?"bg-teal-100 text-teal-700":z.status==="winner"?"bg-green-100 text-green-700":"bg-slate-200 text-slate-900"}`,children:z.status==="pending"?"Submitted":z.status.replace("_"," ").charAt(0).toUpperCase()+z.status.replace("_"," ").slice(1)})]})]})]}),e.jsx("button",{onClick:K,className:"w-full py-3 text-sm font-medium text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"â† Back to Start"})]}),s==="select-nominee"&&i&&e.jsx("div",{children:b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-3 rounded-full animate-spin",style:{borderColor:ee,borderTopColor:"transparent"}})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto mb-4",children:[C.map(u=>e.jsxs("button",{onClick:()=>X(u),disabled:u.already_nominated,className:`w-full p-3 text-left flex items-center justify-between border rounded-xl transition-all ${u.already_nominated?"opacity-50 cursor-not-allowed bg-gray-50 border-gray-200":"bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm",style:{backgroundColor:u.already_nominated?"#9ca3af":ee},children:u.name.split(" ").map(F=>F[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:u.name}),e.jsx("p",{className:"text-xs text-gray-500",children:u.job_title})]})]}),u.already_nominated?e.jsx("span",{className:"text-[10px] px-2 py-1 rounded-full bg-amber-100 text-amber-700 font-medium",children:"Nominated"}):e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},u.id)),C.length===0&&!b&&e.jsx("p",{className:"text-center text-gray-500 py-6 text-sm",children:"No eligible team members found."})]}),e.jsx("button",{onClick:()=>a("verify"),className:"w-full py-3 text-sm font-medium text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"â† Back"})]})}),s==="form"&&N&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm",style:{backgroundColor:ee},children:N.name.split(" ").map(u=>u[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:N.name}),e.jsx("p",{className:"text-xs text-gray-500",children:N.job_title})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2 flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 012.916.52 6.003 6.003 0 01-5.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0a6.772 6.772 0 01-3.044 0"})}),"Achievement Categories"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(y?.achievement_categories||["Teamwork","Innovation","Customer Service","Leadership","Problem Solving","Excellence"]).map(u=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all ${f.achievement_categories.includes(u)?"border-opacity-50 bg-opacity-5":"border-gray-200 hover:border-gray-300"}`,style:f.achievement_categories.includes(u)?{borderColor:ee,backgroundColor:`${ee}10`}:{},children:[e.jsx("input",{type:"checkbox",checked:f.achievement_categories.includes(u),onChange:F=>{F.target.checked?x({...f,achievement_categories:[...f.achievement_categories,u]}):x({...f,achievement_categories:f.achievement_categories.filter(U=>U!==u)})},className:"w-3.5 h-3.5 rounded",style:{accentColor:ee}}),e.jsx("span",{className:"text-xs text-gray-700",children:u})]},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Why does this employee deserve the award? *"}),e.jsx("textarea",{value:f.justification,onChange:u=>x({...f,justification:u.target.value}),rows:3,placeholder:"Describe their contributions... (min 50 characters)",className:"w-full px-3 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-opacity-50 resize-none text-sm",style:{"--tw-ring-color":ee}}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:[f.justification.length,"/50 minimum"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Key Achievements (Optional)"}),e.jsx("textarea",{value:f.achievements,onChange:u=>x({...f,achievements:u.target.value}),rows:2,placeholder:"List notable accomplishments...",className:"w-full px-3 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-opacity-50 resize-none text-sm",style:{"--tw-ring-color":ee}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5 flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),"Supporting Evidence (Optional)"]}),e.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:"Attach up to 3 files (PDF, images) to support your nomination"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.doc,.docx",onChange:u=>{const F=Array.from(u.target.files||[]).slice(0,3);x({...f,supportingFiles:F})},className:"hidden",id:"supporting-files"}),e.jsxs("label",{htmlFor:"supporting-files",className:"flex items-center justify-center gap-2 w-full py-2.5 border-2 border-dashed border-gray-200 rounded-xl cursor-pointer hover:border-gray-300 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),e.jsx("span",{className:"text-xs text-gray-500",children:f.supportingFiles.length>0?`${f.supportingFiles.length} file(s) selected`:"Click to upload files"})]}),f.supportingFiles.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:f.supportingFiles.map((u,F)=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-gray-50 px-2.5 py-1.5 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 truncate max-w-[180px]",children:u.name}),e.jsx("button",{type:"button",onClick:()=>x({...f,supportingFiles:f.supportingFiles.filter((U,ue)=>ue!==F)}),className:"text-red-400 hover:text-red-600 ml-2",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},F))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>a("select-nominee"),className:"flex-1 py-3 text-sm font-medium text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{onClick:be,disabled:f.justification.length<50||b,className:"flex-1 py-3 text-sm font-semibold text-white rounded-xl transition-all duration-200 disabled:opacity-50",style:{backgroundColor:ee},children:b?"Submitting...":"Submit"})]})]}),s==="success"&&V&&e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center bg-gradient-to-br from-amber-100 to-yellow-200 shadow-lg animate-bounce-slow",children:e.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 012.916.52 6.003 6.003 0 01-5.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0a6.772 6.772 0 01-3.044 0"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Nomination Submitted!"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Thank you for nominating ",e.jsx("span",{className:"font-semibold text-gray-700",children:V.nominee_name})," for Employee of the Year ",Ee,"."]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-4 mb-4 text-left border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 012.916.52 6.003 6.003 0 01-5.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0a6.772 6.772 0 01-3.044 0"})}),e.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Nomination Summary"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-1.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Nominee:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:V.nominee_name})]}),e.jsxs("div",{className:"flex justify-between py-1.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Position:"}),e.jsx("span",{className:"font-medium text-gray-900",children:V.nominee_job_title})]}),V.achievement_categories?.length>0&&e.jsxs("div",{className:"py-1.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Categories:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:V.achievement_categories.map(u=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium bg-blue-50 text-blue-700",children:u},u))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full text-[10px] font-semibold bg-green-100 text-green-700",children:"Submitted"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"A confirmation email has been sent to your inbox."}),e.jsx("button",{onClick:K,className:"w-full py-3 text-sm font-medium text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors",children:"Back to Start"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 px-4 sm:px-6 py-2 sm:py-3 flex justify-around bg-white shrink-0",children:[e.jsxs("button",{onClick:()=>$("home"),className:`flex flex-col items-center gap-0.5 ${w==="home"?"":"opacity-50"}`,style:w==="home"?{color:ee}:{color:"#6b7280"},children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-medium",children:"Home"})]}),e.jsxs("button",{onClick:()=>$("status"),className:`flex flex-col items-center gap-0.5 ${w==="status"?"":"opacity-50"}`,style:w==="status"?{color:ee}:{color:"#6b7280"},children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("span",{className:"text-[9px] sm:text-[10px] font-medium",children:"Status"})]})]}),e.jsx("div",{className:"text-center py-2 sm:py-3 bg-gray-50 border-t border-gray-100 shrink-0",children:e.jsx("p",{className:"text-[9px] sm:text-[10px] text-gray-500 font-medium",children:"Baynunah Watergeneration Technologies SP LLC"})})]})})})}const nr="http://localhost:5001/api";class ir{baseUrl=nr+"/templates";getHeaders(){const a=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}}async list(){const a=await fetch(this.baseUrl,{method:"GET",headers:this.getHeaders()});if(!a.ok)throw new Error("Failed to fetch templates");return a.json()}async get(a){const l=await fetch(`${this.baseUrl}/${a}`,{method:"GET",headers:this.getHeaders()});if(!l.ok)throw new Error("Failed to fetch template");return l.json()}async create(a){const l=await fetch(this.baseUrl,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(a)});if(!l.ok)throw new Error("Failed to create template");return l.json()}async update(a,l){const g=await fetch(`${this.baseUrl}/${a}`,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(l)});if(!g.ok)throw new Error("Failed to update template");return g.json()}}const Nt=new ir,lr=({template:s,onClose:a})=>{const[l,g]=r.useState(s||{name:"",type:"document",content:"",revision_note:""}),[i,m]=r.useState(!1),[n,S]=r.useState(null),v=C=>{g({...l,[C.target.name]:C.target.value})},E=async C=>{C.preventDefault(),m(!0),S(null);try{s?await Nt.update(s.id,l):await Nt.create(l),a()}catch{S("Failed to save template")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:e.jsxs("form",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg",onSubmit:E,children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:s?"Edit Template":"New Template"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Name"}),e.jsx("input",{name:"name",value:l.name||"",onChange:v,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Type"}),e.jsxs("select",{name:"type",value:l.type||"document",onChange:v,className:"input input-bordered w-full",children:[e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"letter",children:"Letter"}),e.jsx("option",{value:"checklist",children:"Checklist"}),e.jsx("option",{value:"timeline",children:"Timeline"}),e.jsx("option",{value:"pass",children:"Pass"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Content"}),e.jsx("textarea",{name:"content",value:l.content||"",onChange:v,className:"input input-bordered w-full h-32",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium",children:"Revision Note"}),e.jsx("input",{name:"revision_note",value:l.revision_note||"",onChange:v,className:"input input-bordered w-full"})]}),n&&e.jsx("div",{className:"text-red-600 mb-2",children:n}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Saving...":"Save"})]})]})})},or=()=>{const[s,a]=r.useState([]),[l,g]=r.useState(null),[i,m]=r.useState(!0),[n,S]=r.useState(null),[v,E]=r.useState(!1);r.useEffect(()=>{C()},[]);const C=async()=>{m(!0);try{const z=await Nt.list();a(z)}catch{S("Failed to load templates")}finally{m(!1)}},d=z=>{g(z),E(!0)},N=()=>{g(null),E(!0)},j=()=>{E(!1),C()};return i?e.jsx("div",{children:"Loading..."}):n?e.jsx("div",{className:"text-red-600",children:n}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Templates"}),e.jsx("button",{className:"btn btn-primary",onClick:N,children:"New Template"})]}),e.jsxs("table",{className:"min-w-full bg-white border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Name"}),e.jsx("th",{className:"px-4 py-2",children:"Type"}),e.jsx("th",{className:"px-4 py-2",children:"Version"}),e.jsx("th",{className:"px-4 py-2",children:"Active"}),e.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(z=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:z.name}),e.jsx("td",{className:"px-4 py-2",children:z.type}),e.jsx("td",{className:"px-4 py-2",children:z.version}),e.jsx("td",{className:"px-4 py-2",children:z.is_active?"Yes":"No"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{className:"btn btn-sm btn-secondary mr-2",onClick:()=>d(z),children:"Edit"})})]},z.id))})]}),v&&e.jsx(lr,{template:l,onClose:j})]})},cr=({isOpen:s,isAdminLogin:a,employeeId:l,password:g,error:i,loading:m,showPassword:n,onClose:S,onLogin:v,onEmployeeIdChange:E,onPasswordChange:C,onTogglePassword:d})=>s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 glass-overlay animate-fadeIn",onClick:N=>{N.target===N.currentTarget&&S()},children:e.jsxs("div",{className:"relative w-full max-w-md glass-card rounded-2xl p-8 shadow-2xl animate-scaleIn",children:[e.jsx("button",{onClick:S,type:"button",className:"absolute top-4 right-4 text-primary-400 hover:text-primary-700 transition-all duration-200 hover:rotate-90 transform","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-green to-emerald-600 shadow-lg mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"B"})}),e.jsx("h2",{className:"text-2xl font-bold text-primary-800 mb-1",children:a?"Admin Portal":"Welcome Back"}),e.jsx("p",{className:"text-sm text-primary-600",children:a?"Secure administrator access":"Sign in to your HR account"})]}),i&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl text-sm flex items-start gap-2 animate-slideDown",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:i})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[!a&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee-id",className:"block text-sm font-semibold text-primary-700 mb-2",children:"Employee ID"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("input",{id:"employee-id",name:"employee_id",type:"text",value:l,onChange:N=>E(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-primary-200 rounded-xl focus:ring-2 focus:ring-accent-green focus:border-accent-green transition-all bg-white/50",placeholder:"e.g., BAYN00008",required:!0,autoComplete:"username","data-testid":"employee-id-input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-primary-700 mb-2",children:a?"Admin Password":"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{id:"password",name:"password",type:n?"text":"password",value:g,onChange:N=>C(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-primary-200 rounded-xl focus:ring-2 focus:ring-accent-green focus:border-accent-green transition-all bg-white/50",placeholder:a?"Enter admin password":"First login: DOB as DDMMYYYY",required:!0,autoComplete:"current-password","data-testid":"password-input"}),e.jsx("button",{type:"button",onClick:d,className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-500 hover:text-primary-700 transition-colors","aria-label":n?"Hide password":"Show password",children:n?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-accent-green to-emerald-600 text-white font-semibold py-3 px-6 rounded-xl hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2","data-testid":"sign-in-button",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign In"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-primary-50 rounded-xl border border-primary-100",children:e.jsx("p",{className:"text-xs text-primary-600 text-center leading-relaxed",children:a?"Enter the admin password to access the administrator panel.":"First-time login? Use your date of birth (DDMMYYYY) as password. You will be prompted to change it."})})]})}):null,dr={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-xl"},mr=({name:s,src:a,size:l="md",className:g=""})=>{const[i,m]=r.useState(!1);r.useEffect(()=>{m(!1)},[a]);const S=(C=>{const d=C.trim();if(!d)return"NA";const N=d.split(" ").filter(k=>k.length>0);if(N.length===0)return"NA";if(N.length===1)return N[0].substring(0,2).toUpperCase();const j=N[0][0]||"",z=N[N.length-1][0]||"";return(j+z).toUpperCase()})(s),v=C=>{const d=["bg-blue-100 text-blue-700","bg-green-100 text-green-700","bg-purple-100 text-purple-700","bg-pink-100 text-pink-700","bg-indigo-100 text-indigo-700","bg-teal-100 text-teal-700"];let N=0;for(let j=0;j<C.length;j++)N=(N<<5)-N+C.charCodeAt(j)|0;return d[Math.abs(N)%d.length]},E=`rounded-full flex items-center justify-center font-semibold ${dr[l]}`;return a&&!i?e.jsx("img",{src:a,alt:s||"User avatar",onError:()=>m(!0),className:`${E} object-cover border-2 border-white shadow-sm ${g}`}):e.jsx("div",{className:`${E} ${v(s)} border-2 border-white shadow-sm ${g}`,title:s||"User","aria-label":`Avatar for ${s||"user"}`,children:S})},xr={active:"bg-green-50 text-green-700 border-green-200",inactive:"bg-gray-50 text-gray-700 border-gray-200",pending:"bg-amber-50 text-amber-700 border-amber-200",expired:"bg-red-50 text-red-700 border-red-200",warning:"bg-orange-50 text-orange-700 border-orange-200",critical:"bg-red-100 text-red-800 border-red-300",success:"bg-emerald-50 text-emerald-700 border-emerald-200",info:"bg-blue-50 text-blue-700 border-blue-200"},pr={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},hr={active:"Active",inactive:"Inactive",pending:"Pending",expired:"Expired",warning:"Warning",critical:"Critical",success:"Success",info:"Info"},Ht=({variant:s,label:a,size:l="sm",className:g=""})=>{const i=a||hr[s];return e.jsx("span",{className:`
        inline-flex items-center justify-center
        border rounded-full font-medium
        transition-all duration-200
        ${xr[s]}
        ${pr[l]}
        ${g}
      `,children:i})},ur=s=>{const a=s.toLowerCase();return a.includes("active")?"active":a.includes("inactive")||a.includes("terminated")?"inactive":a.includes("pending")||a.includes("probation")?"pending":a.includes("expired")?"expired":a.includes("warning")?"warning":a.includes("critical")?"critical":"info"},gr={default:{bg:"from-blue-500 to-blue-600",iconBg:"bg-blue-100",iconColor:"text-blue-600"},success:{bg:"from-green-500 to-emerald-600",iconBg:"bg-green-100",iconColor:"text-green-600"},warning:{bg:"from-amber-500 to-orange-600",iconBg:"bg-amber-100",iconColor:"text-amber-600"},danger:{bg:"from-red-500 to-rose-600",iconBg:"bg-red-100",iconColor:"text-red-600"},info:{bg:"from-cyan-500 to-blue-600",iconBg:"bg-cyan-100",iconColor:"text-cyan-600"}},nt=({title:s,value:a,icon:l,subtitle:g,trend:i,variant:m="default",onClick:n,isLoading:S=!1})=>{const v=gr[m],E=!!n;return S?e.jsx("div",{className:"bg-white rounded-xl border border-primary-200 p-6 shadow-sm",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-200 rounded-xl"}),e.jsx("div",{className:"w-16 h-6 bg-primary-200 rounded"})]}),e.jsx("div",{className:"h-8 bg-primary-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-primary-100 rounded w-3/4"})]})}):e.jsxs("div",{onClick:E?n:void 0,className:`
        bg-white rounded-xl border border-primary-200 p-6 shadow-sm
        transition-all duration-300 ease-out
        ${E?"cursor-pointer hover:shadow-xl hover:-translate-y-1 hover:border-accent-green/30":""}
        group
      `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`
          w-12 h-12 rounded-xl flex items-center justify-center
          ${v.iconBg} ${v.iconColor}
          group-hover:scale-110 transition-transform duration-300
        `,children:l}),i&&e.jsxs("div",{className:`
            flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-semibold
            ${i.isPositive?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}
          `,children:[i.isPositive?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),e.jsxs("span",{children:[Math.abs(i.value),"%"]})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-primary-800 group-hover:text-accent-green transition-colors",children:a})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-primary-700 mb-1",children:s}),g&&e.jsx("p",{className:"text-xs text-primary-500",children:g})]}),E&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-primary-100 flex items-center text-xs text-accent-green font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("span",{children:"View details"}),e.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},yt=({message:s,illustrationUrl:a})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-gray-400",children:[a&&e.jsx("img",{src:a,alt:"Empty",className:"w-32 h-32 mb-4 opacity-70"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:s}),e.jsx("div",{className:"text-sm",children:"No data to display."})]});function jr(s,a=300){const l=r.useRef(void 0);return r.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]),((...g)=>{l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{s(...g)},a)})}function Ue(s,a,l){if(s.length===0){alert("No data to export");return}const g=l?l.map(C=>C.label):Object.keys(s[0]),i=l?l.map(C=>C.key):Object.keys(s[0]),n=[g.join(","),...s.map(C=>i.map(d=>{const N=C[d];if(N==null)return"";const j=String(N);return j.includes(",")||j.includes('"')||j.includes(`
`)?`"${j.replace(/"/g,'""')}"`:j}).join(","))].join(`
`),S=new Blob([n],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),E=URL.createObjectURL(S);v.setAttribute("href",E),v.setAttribute("download",a),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v)}function Xt(s){const a=[{key:"employee_id",label:"Employee ID"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"department",label:"Department"},{key:"job_title",label:"Job Title"},{key:"employment_status",label:"Status"},{key:"joining_date",label:"Joining Date"},{key:"nationality",label:"Nationality"},{key:"visa_number",label:"Visa Number"},{key:"visa_expiry_date",label:"Visa Expiry"},{key:"emirates_id_number",label:"Emirates ID"},{key:"emirates_id_expiry",label:"EID Expiry"},{key:"contract_type",label:"Contract Type"},{key:"contract_end_date",label:"Contract End"}],l=new Date().toISOString().split("T")[0];Ue(s,`employees_export_${l}.csv`,a)}function Qt(s){const a=[{key:"employee_id",label:"Employee ID"},{key:"employee_name",label:"Employee Name"},{key:"document_type",label:"Document Type"},{key:"expiry_date",label:"Expiry Date"},{key:"days_until_expiry",label:"Days Until Expiry"},{key:"status",label:"Status"}],l=new Date().toISOString().split("T")[0];Ue(s,`compliance_alerts_${l}.csv`,a)}function Kt(s){const a=[{key:"attendance_date",label:"Date"},{key:"employee_name",label:"Employee"},{key:"clock_in",label:"Clock In"},{key:"clock_out",label:"Clock Out"},{key:"work_type",label:"Work Type"},{key:"total_hours",label:"Total Hours"},{key:"regular_hours",label:"Regular Hours"},{key:"overtime_hours",label:"Overtime Hours"},{key:"status",label:"Status"},{key:"is_late",label:"Late"},{key:"late_minutes",label:"Late Minutes"},{key:"notes",label:"Notes"}],l=new Date().toISOString().split("T")[0];Ue(s,`attendance_${l}.csv`,a)}function Zt(s){const a=[{key:"full_name",label:"Full Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"position_applied",label:"Position Applied"},{key:"status",label:"Status"},{key:"source",label:"Source"},{key:"applied_date",label:"Applied Date"},{key:"cv_scoring",label:"CV Score"},{key:"experience_years",label:"Years Experience"},{key:"current_company",label:"Current Company"},{key:"current_position",label:"Current Position"}],l=new Date().toISOString().split("T")[0];Ue(s,`candidates_${l}.csv`,a)}function es(s){const a=[{key:"position_title",label:"Position Title"},{key:"department",label:"Department"},{key:"employment_type",label:"Employment Type"},{key:"status",label:"Status"},{key:"requested_date",label:"Requested Date"},{key:"headcount",label:"Headcount"},{key:"salary_range_min",label:"Salary Min"},{key:"salary_range_max",label:"Salary Max"},{key:"requested_by",label:"Requested By"}],l=new Date().toISOString().split("T")[0];Ue(s,`recruitment_positions_${l}.csv`,a)}const q="/api";function br(){const[s,a]=r.useState("home"),[l,g]=r.useState("dashboard"),[i,m]=r.useState(""),[n,S]=r.useState(null),[v,E]=r.useState([]),[C,d]=r.useState([]),[N,j]=r.useState(null),[z,k]=r.useState(!1),[f,x]=r.useState(!1),[b,B]=r.useState(null),[h,P]=r.useState(""),[V,_]=r.useState(""),[w,$]=r.useState(!1),[y,T]=r.useState(!1),[O,G]=r.useState(null),[oe,me]=r.useState([]),[ne,o]=r.useState(!1),[M,Q]=r.useState({pass_type:"recruitment",full_name:"",email:"",phone:"",department:"",position:"",valid_from:new Date().toISOString().split("T")[0],valid_until:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],access_areas:"",purpose:"",sponsor_name:"",employee_id:"",start_stage:"",stage_order:""}),[se,he]=r.useState(!1),[X,be]=r.useState("all"),[K,ye]=r.useState(null),[Ne,Ye]=r.useState([]),[xe,Be]=r.useState([]),[Te,Se]=r.useState(!1),[u,F]=r.useState(""),[U,ue]=r.useState(""),[ce,De]=r.useState(!1),[Je,lt]=r.useState(null),[we,p]=r.useState(null),[A,H]=r.useState({emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",personal_phone:"",personal_email:"",current_address:"",city:"",country:"",bank_name:"",bank_account_number:"",bank_iban:"",passport_number:"",passport_expiry:"",uae_id_number:"",uae_id_expiry:"",highest_education:"",shirt_size:"",pants_size:"",shoe_size:""}),[fe,ke]=r.useState(!1),[ie,Me]=r.useState(null),[Pe,ot]=r.useState([]),[pe,ts]=r.useState(null),[_e,ge]=r.useState(!1),[Ae,Ge]=r.useState("office"),[ct,wt]=r.useState(""),[Ve,kt]=r.useState(null),[D,ss]=r.useState(null),[_t,Ct]=r.useState(!1),[We,rs]=r.useState([]),[Xe,as]=r.useState(null),[Qe,ns]=r.useState(null),[Ke,is]=r.useState([]),[W,Ze]=r.useState(null),[ls,et]=r.useState(!1),[Fe,os]=r.useState(""),[dt,cs]=r.useState(""),[mt,ds]=r.useState(""),[ms,tt]=r.useState(!1),[re,ve]=r.useState({position_title:"",department:"Engineering / R&D",employment_type:"Full-time",salary_range_min:"",salary_range_max:"",headcount:"1",job_description:"",requirements:""}),[st,Lt]=r.useState(null),[St,Mt]=r.useState(!1),[I,Z]=r.useState({name:"",email:"",department:"",job_title:"",location:"",nationality:"",gender:"",employment_status:"",visa_number:"",visa_issue_date:"",visa_expiry_date:"",emirates_id_number:"",emirates_id_expiry:"",medical_fitness_date:"",medical_fitness_expiry:"",iloe_status:"",iloe_expiry:"",contract_type:"",contract_start_date:"",contract_end_date:""}),[Et,Bt]=r.useState(!1),[Ar,Wr]=r.useState(!1),[Dt,Pt]=r.useState(!1),[Ce,xt]=r.useState(null),[ze,je]=r.useState(null),[At,Wt]=r.useState(null),[zt,$t]=r.useState(null),[xs,ps]=r.useState(""),It=O==="admin"||O==="secret-chamber";r.useEffect(()=>{const t=window.location.pathname;if(t.startsWith("/onboarding/")){const c=t.replace("/onboarding/","");c&&(lt(c),a("public-onboarding"),hs(c))}t.startsWith("/nomination-pass")&&a("nomination-pass")},[]);const hs=async t=>{k(!0),B(null);try{const c=await fetch(`${q}/onboarding/welcome/${t}`);if(!c.ok){const R=await c.json();throw new Error(R.detail||"Invalid or expired link")}const L=await c.json();p(L)}catch(c){B(c instanceof Error?c.message:"Failed to validate onboarding link")}finally{k(!1)}},Y=async(t,c={})=>{const R={...c.body instanceof FormData?{}:{"Content-Type":"application/json"},...c.headers||{}};return n?.token&&(R.Authorization=`Bearer ${n.token}`),n?.role&&(R["X-Role"]=n.role),fetch(t,{...c,headers:R})},ae=t=>{if(t==="home"){a("home");return}if(!n){G(t),T(!0);return}a(t)},us=async t=>{t.preventDefault(),k(!0),B(null);const c=It?"BAYN00008":h;try{const L=await fetch(`${q}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee_id:c,password:V})});if(!L.ok){const bt=await L.json();throw new Error(bt.detail||"Login failed")}const R=await L.json(),le={id:R.id,employee_id:R.employee_id,name:R.name,role:R.role,token:R.access_token};S(le),T(!1),P(""),_(""),O&&(a(O),G(null))}catch(L){B(L instanceof Error?L.message:"Login failed")}finally{k(!1)}},gs=()=>{S(null),a("home"),E([]),d([]),j(null)},js=()=>{T(!1),G(null),B(null),P(""),_("")},rt=async()=>{if(n){k(!0);try{const t=await Y(`${q}/employees?active_only=false`);if(t.ok){const c=await t.json();E(c)}}catch(t){console.error("Failed to fetch employees:",t)}finally{k(!1)}}},Tt=async t=>{Lt(t),Z({name:t.name||"",email:t.email||"",department:t.department||"",job_title:t.job_title||"",location:t.location||"",nationality:t.nationality||"",gender:t.gender||"",employment_status:t.employment_status||"",visa_number:t.visa_number||"",visa_issue_date:t.visa_issue_date||"",visa_expiry_date:t.visa_expiry_date||"",emirates_id_number:t.emirates_id_number||"",emirates_id_expiry:t.emirates_id_expiry||"",medical_fitness_date:t.medical_fitness_date||"",medical_fitness_expiry:t.medical_fitness_expiry||"",iloe_status:t.iloe_status||"",iloe_expiry:t.iloe_expiry||"",contract_type:t.contract_type||"",contract_start_date:t.contract_start_date||"",contract_end_date:t.contract_end_date||""}),Mt(!0),B(null)},pt=()=>{Mt(!1),Lt(null),B(null)},bs=async t=>{if(t.preventDefault(),!!st){Bt(!0),B(null);try{const c={};Object.entries(I).forEach(([R,le])=>{typeof le=="string"&&le.trim()!==""&&(c[R]=le)});const L=await Y(`${q}/employees/${st.employee_id}`,{method:"PUT",body:JSON.stringify(c)});if(!L.ok){const R=await L.json();throw new Error(R.detail||"Failed to update employee")}await rt(),pt()}catch(c){B(c instanceof Error?c.message:"Failed to update employee")}finally{Bt(!1)}}},ys=async t=>{const c=t.target.files?.[0];if(c){Pt(!0),xt(null),B(null);try{const L=new FormData;L.append("file",c);const R=await Y(`${q}/employees/import`,{method:"POST",body:L});if(!R.ok){const bt=await R.json();throw new Error(bt.detail||"Import failed")}const le=await R.json();xt(le),await rt()}catch(L){B(L instanceof Error?L.message:"Failed to import employees")}finally{Pt(!1),t.target.value=""}}},fs=async()=>{if(!(!n||n.role!=="admin")){k(!0);try{const[t,c]=await Promise.all([Y(`${q}/admin/dashboard`),Y(`${q}/admin/features`)]);t.ok&&j(await t.json()),c.ok&&d(await c.json())}catch(t){console.error("Failed to fetch admin data:",t)}finally{k(!1)}}},ht=async()=>{if(!(!n||n.role!=="admin"&&n.role!=="hr")){Ct(!0);try{const t=await Y(`${q}/employees/compliance/alerts`);if(t.ok){const c=await t.json();ss(c)}}catch(t){console.error("Failed to fetch compliance alerts:",t)}finally{Ct(!1)}}},ut=r.useCallback(async()=>{if(!(!n||n.role!=="admin"&&n.role!=="hr"))try{const[t,c,L]=await Promise.all([Y(`${q}/recruitment/stats`),Y(`${q}/recruitment/requests`),Y(`${q}/recruitment/pipeline`)]);t.ok&&as(await t.json()),c.ok&&rs(await c.json()),L.ok&&ns(await L.json())}catch(t){console.error("Failed to fetch recruitment data:",t)}},[n]),vs=r.useCallback(async(t="")=>{if(!(!n||n.role!=="admin"&&n.role!=="hr"))try{const c=t?`${q}/recruitment/candidates?search=${encodeURIComponent(t)}`:`${q}/recruitment/candidates`,L=await Y(c);L.ok&&is(await L.json())}catch(c){console.error("Failed to fetch recruitment candidates:",c)}},[n]),Vt=jr(vs,400),Ns=async()=>{if(n){k(!0);try{const t={position_title:re.position_title,department:re.department,employment_type:re.employment_type,salary_range_min:re.salary_range_min?parseFloat(re.salary_range_min):null,salary_range_max:re.salary_range_max?parseFloat(re.salary_range_max):null,headcount:parseInt(re.headcount)||1,job_description:re.job_description||null,requirements:re.requirements||null},c=await Y(`${q}/recruitment/requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(c.ok)tt(!1),ve({position_title:"",department:"Engineering / R&D",employment_type:"Full-time",salary_range_min:"",salary_range_max:"",headcount:"1",job_description:"",requirements:""}),ut();else{const L=await c.json();alert(L.detail||"Failed to create recruitment request")}}catch(t){console.error("Failed to create recruitment request:",t),alert("Failed to create recruitment request")}finally{k(!1)}}},ws=async()=>{if(!(!n||n.role!=="admin")){x(!0);try{const t=await Y(`${q}/admin/features`);t.ok&&d(await t.json())}catch(t){console.error("Failed to fetch features:",t)}finally{x(!1)}}},ks=async(t,c)=>{try{(await Y(`${q}/admin/features/${t}?is_enabled=${c}`,{method:"PUT"})).ok&&d(C.map(R=>R.key===t?{...R,is_enabled:c}:R))}catch(L){console.error("Failed to toggle feature:",L)}},gt=async()=>{if(n){he(!0);try{const t=await Y(`${q}/passes`);if(t.ok){const c=await t.json();me(c)}}catch(t){console.error("Failed to fetch passes:",t)}finally{he(!1)}}},_s=async t=>{t.preventDefault(),he(!0),B(null);try{const c={...M,valid_until:M.pass_type==="onboarding"?new Date(new Date(M.valid_from).getTime()+2592e6).toISOString().split("T")[0]:M.valid_until,stage_order:M.stage_order?M.stage_order.split(",").map(R=>R.trim()).filter(Boolean):void 0};c.pass_type==="onboarding"&&Q(R=>({...R,valid_until:c.valid_until}));const L=await Y(`${q}/passes`,{method:"POST",body:JSON.stringify(c)});if(!L.ok){const R=await L.json();throw new Error(R.detail||"Failed to create pass")}o(!1),Q({pass_type:"recruitment",full_name:"",email:"",phone:"",department:"",position:"",valid_from:new Date().toISOString().split("T")[0],valid_until:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],access_areas:"",purpose:"",sponsor_name:"",employee_id:""}),await gt()}catch(c){B(c instanceof Error?c.message:"Failed to create pass")}finally{he(!1)}},Ft=async t=>{try{(await Y(`${q}/passes/${t}/revoke`,{method:"POST"})).ok&&await gt()}catch(c){console.error("Failed to revoke pass:",c)}},jt=async()=>{if(!(!n||n.role!=="admin"&&n.role!=="hr")){De(!0);try{const[t,c]=await Promise.all([Y(`${q}/onboarding/tokens`),Y(`${q}/onboarding/pending`)]);t.ok&&Ye(await t.json()),c.ok&&Be(await c.json())}catch(t){console.error("Failed to fetch onboarding data:",t)}finally{De(!1)}}},Cs=async()=>{if(u.trim()){De(!0),B(null);try{const t=await Y(`${q}/onboarding/invite`,{method:"POST",body:JSON.stringify({employee_id:u,expires_in_days:7})});if(!t.ok){const L=await t.json();throw new Error(L.detail||"Failed to generate invite")}const c=await t.json();ue(`${window.location.origin}/onboarding/${c.token}`),await jt()}catch(t){B(t instanceof Error?t.message:"Failed to generate invite")}finally{De(!1)}}},Ls=async t=>{try{(await Y(`${q}/onboarding/approve/${t}`,{method:"POST"})).ok&&await jt()}catch(c){console.error("Failed to approve profile:",c)}},Ss=async t=>{if(t.preventDefault(),!!Je){k(!0),B(null);try{const c=await fetch(`${q}/onboarding/submit/${Je}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!c.ok){const L=await c.json();throw new Error(L.detail||"Failed to submit profile")}ke(!0)}catch(c){B(c instanceof Error?c.message:"Failed to submit profile")}finally{k(!1)}}},Ms=t=>{navigator.clipboard.writeText(t)},Re=async()=>{if(n){ge(!0);try{const[t,c]=await Promise.all([Y(`${q}/attendance/today`),Y(`${q}/attendance/my-records`)]);if(t.ok&&Me(await t.json()),c.ok&&ot(await c.json()),n.role==="admin"||n.role==="hr"){const L=await Y(`${q}/attendance/dashboard`);L.ok&&ts(await L.json())}}catch(t){console.error("Failed to fetch attendance data:",t)}finally{ge(!1)}}},Es=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{kt({latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{console.warn("GPS location not available:",t.message),kt(null)},{enableHighAccuracy:!0,timeout:1e4})},Bs=async()=>{if(n){ge(!0),B(null);try{const t={work_type:Ae,latitude:Ve?.latitude,longitude:Ve?.longitude};Ae==="wfh"&&ct&&(t.wfh_reason=ct);const c=await Y(`${q}/attendance/clock-in`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!c.ok){const L=await c.json();throw new Error(L.detail||"Failed to clock in")}await Re(),Ge("office"),wt("")}catch(t){B(t instanceof Error?t.message:"Failed to clock in")}finally{ge(!1)}}},Ds=async()=>{if(n){ge(!0),B(null);try{const t=await Y(`${q}/attendance/clock-out`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:Ve?.latitude,longitude:Ve?.longitude})});if(!t.ok){const c=await t.json();throw new Error(c.detail||"Failed to clock out")}await Re()}catch(t){B(t instanceof Error?t.message:"Failed to clock out")}finally{ge(!1)}}},Ps=async()=>{if(n){ge(!0);try{await Y(`${q}/attendance/break/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),await Re()}catch(t){console.error("Failed to start break:",t)}finally{ge(!1)}}},As=async()=>{if(n){ge(!0);try{await Y(`${q}/attendance/break/end`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),await Re()}catch(t){console.error("Failed to end break:",t)}finally{ge(!1)}}};r.useEffect(()=>{s==="employees"&&n?rt():s==="admin"&&n?.role==="admin"?fs():s==="secret-chamber"&&n?.role==="admin"?ws():s==="passes"&&n?gt():s==="onboarding"&&n&&(n.role==="admin"||n.role==="hr")?jt():s==="attendance"&&n?(Re(),Es()):s==="compliance-alerts"&&n&&(n.role==="admin"||n.role==="hr")&&ht()},[s,n]),r.useEffect(()=>{s==="admin"&&n?.role==="admin"&&(l==="employees"?rt():l==="compliance"?ht():l==="recruitment"&&ut())},[l,s,n,ut]),r.useEffect(()=>{s==="admin"&&l==="recruitment"&&n?.role&&(n.role==="admin"||n.role==="hr")&&Vt(Fe)},[Fe,s,l,n,Vt]);const de=e.jsx(cr,{isOpen:y,isAdminLogin:It,employeeId:h,password:V,error:b||"",loading:z,showPassword:w,onClose:js,onLogin:us,onEmployeeIdChange:P,onPasswordChange:_,onTogglePassword:()=>$(!w)});if(z||se||ce||_e||f)return e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsx(er,{})});if(s==="public-onboarding")return b?e.jsx("div",{className:"min-h-screen bg-primary-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 p-8 max-w-md text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-accent-red mx-auto mb-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Link Invalid or Expired"}),e.jsx("p",{className:"text-primary-600 mb-6",children:b}),e.jsx("p",{className:"text-sm text-primary-500",children:"Please contact HR for a new onboarding link."})]})}):fe?e.jsx("div",{className:"min-h-screen bg-primary-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 p-8 max-w-md text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-accent-green mx-auto mb-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Profile Submitted!"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Thank you for completing your profile. HR will review your information shortly."}),e.jsx("p",{className:"text-sm text-primary-500",children:"You can close this window now."})]})}):we?e.jsx("div",{className:"min-h-screen bg-primary-50 py-8 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-primary-200 p-6",children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-8 mb-4"}),e.jsxs("h1",{className:"text-2xl font-semibold text-primary-800 mb-1",children:["Welcome, ",we.name,"!"]}),e.jsx("p",{className:"text-accent-green",children:"Please complete your profile information below"})]}),e.jsx("div",{className:"p-6 bg-primary-50 border-b border-primary-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium text-primary-800",children:we.employee_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Department"}),e.jsx("p",{className:"font-medium text-primary-800",children:we.department||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Job Title"}),e.jsx("p",{className:"font-medium text-primary-800",children:we.job_title||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Location"}),e.jsx("p",{className:"font-medium text-primary-800",children:we.location||"-"})]})]})}),e.jsxs("form",{onSubmit:Ss,className:"p-6 space-y-6",children:[b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:b}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Contact Name *",value:A.emergency_contact_name,onChange:t=>H({...A,emergency_contact_name:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0}),e.jsx("input",{type:"tel",placeholder:"Phone Number *",value:A.emergency_contact_phone,onChange:t=>H({...A,emergency_contact_phone:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0}),e.jsxs("select",{value:A.emergency_contact_relationship,onChange:t=>H({...A,emergency_contact_relationship:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0,children:[e.jsx("option",{value:"",children:"Relationship *"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Parent",children:"Parent"}),e.jsx("option",{value:"Sibling",children:"Sibling"}),e.jsx("option",{value:"Friend",children:"Friend"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"tel",placeholder:"Personal Phone",value:A.personal_phone,onChange:t=>H({...A,personal_phone:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"email",placeholder:"Personal Email",value:A.personal_email,onChange:t=>H({...A,personal_email:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Current Address"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{placeholder:"Street Address",value:A.current_address,onChange:t=>H({...A,current_address:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",rows:2}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"City",value:A.city,onChange:t=>H({...A,city:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Country",value:A.country,onChange:t=>H({...A,country:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Bank Details (for salary)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Bank Name",value:A.bank_name,onChange:t=>H({...A,bank_name:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Account Number",value:A.bank_account_number,onChange:t=>H({...A,bank_account_number:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"IBAN",value:A.bank_iban,onChange:t=>H({...A,bank_iban:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),"ID Documents"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Passport Number",value:A.passport_number,onChange:t=>H({...A,passport_number:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Passport Expiry (DD/MM/YYYY)",value:A.passport_expiry,onChange:t=>H({...A,passport_expiry:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"UAE ID Number",value:A.uae_id_number,onChange:t=>H({...A,uae_id_number:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"UAE ID Expiry (DD/MM/YYYY)",value:A.uae_id_expiry,onChange:t=>H({...A,uae_id_expiry:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Additional Information"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Highest Education",value:A.highest_education,onChange:t=>H({...A,highest_education:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Shirt Size",value:A.shirt_size,onChange:t=>H({...A,shirt_size:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Pants Size",value:A.pants_size,onChange:t=>H({...A,pants_size:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Shoe Size",value:A.shoe_size,onChange:t=>H({...A,shoe_size:t.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsx("button",{type:"submit",disabled:z,className:"btn-submit w-full",children:z?"Submitting...":"Submit Profile"})]})]})})}):null;if(s==="employees")return e.jsxs("div",{className:"min-h-screen bg-primary-50 p-8",children:[de,ze&&n?.token&&e.jsx(Oe,{employeeId:ze,token:n.token,currentUserRole:n.role,currentUserId:n.employee_id,onClose:()=>je(null)}),St&&st&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card w-full max-w-3xl my-8",children:[e.jsx("div",{className:"p-6 border-b border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Edit Employee"}),e.jsx("p",{className:"text-sm text-primary-600",children:st.employee_id})]}),e.jsx("button",{onClick:pt,className:"text-primary-300 hover:text-primary-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b&&e.jsx("div",{className:"mx-6 mt-4 bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:b}),e.jsxs("form",{onSubmit:bs,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:I.name,onChange:t=>Z({...I,name:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:I.email,onChange:t=>Z({...I,email:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",value:I.department,onChange:t=>Z({...I,department:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Job Title"}),e.jsx("input",{type:"text",value:I.job_title,onChange:t=>Z({...I,job_title:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:I.location,onChange:t=>Z({...I,location:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Nationality"}),e.jsx("input",{type:"text",value:I.nationality,onChange:t=>Z({...I,nationality:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Gender"}),e.jsxs("select",{value:I.gender,onChange:t=>Z({...I,gender:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Employment Status"}),e.jsxs("select",{value:I.employment_status,onChange:t=>Z({...I,employment_status:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Probation",children:"Probation"}),e.jsx("option",{value:"On Leave",children:"On Leave"}),e.jsx("option",{value:"Resigned",children:"Resigned"}),e.jsx("option",{value:"Terminated",children:"Terminated"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Visa Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Visa Number"}),e.jsx("input",{type:"text",value:I.visa_number,onChange:t=>Z({...I,visa_number:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Issue Date"}),e.jsx("input",{type:"date",value:I.visa_issue_date,onChange:t=>Z({...I,visa_issue_date:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"date",value:I.visa_expiry_date,onChange:t=>Z({...I,visa_expiry_date:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),"Emirates ID"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Emirates ID Number"}),e.jsx("input",{type:"text",value:I.emirates_id_number,onChange:t=>Z({...I,emirates_id_number:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",placeholder:"784-XXXX-XXXXXXX-X"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"date",value:I.emirates_id_expiry,onChange:t=>Z({...I,emirates_id_expiry:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Medical & Insurance"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Medical Fitness Date"}),e.jsx("input",{type:"date",value:I.medical_fitness_date,onChange:t=>Z({...I,medical_fitness_date:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Medical Fitness Expiry"}),e.jsx("input",{type:"date",value:I.medical_fitness_expiry,onChange:t=>Z({...I,medical_fitness_expiry:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"ILOE Status"}),e.jsxs("select",{value:I.iloe_status,onChange:t=>Z({...I,iloe_status:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Expired",children:"Expired"}),e.jsx("option",{value:"Not Applicable",children:"Not Applicable"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"ILOE Expiry"}),e.jsx("input",{type:"date",value:I.iloe_expiry,onChange:t=>Z({...I,iloe_expiry:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Contract Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Contract Type"}),e.jsxs("select",{value:I.contract_type,onChange:t=>Z({...I,contract_type:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Limited",children:"Limited"}),e.jsx("option",{value:"Unlimited",children:"Unlimited"}),e.jsx("option",{value:"Fixed Term",children:"Fixed Term"}),e.jsx("option",{value:"Probation",children:"Probation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:I.contract_start_date,onChange:t=>Z({...I,contract_start_date:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:I.contract_end_date,onChange:t=>Z({...I,contract_end_date:t.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:pt,className:"flex-1 py-3 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Et,className:"flex-1 py-3 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 transition-colors font-medium disabled:opacity-50",children:Et?"Saving...":"Save Changes"})]})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Employees"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),(n?.role==="admin"||n?.role==="hr")&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 flex-1",children:e.jsxs("p",{className:"text-primary-700 text-sm",children:[e.jsx("strong",{children:"Tip:"})," Click on any employee row to view and edit their details including UAE compliance information."]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("label",{className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 transition-colors cursor-pointer flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Dt?"Importing...":"Import CSV",e.jsx("input",{type:"file",accept:".csv",onChange:ys,className:"hidden",disabled:Dt})]})})]}),Ce&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Import Complete"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[e.jsx("strong",{children:Ce.created})," employees created,",e.jsxs("strong",{children:[" ",Ce.skipped]})," skipped (already exist)"]}),Ce.errors&&Ce.errors.length>0&&e.jsxs("div",{className:"mt-2 text-red-600 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Errors:"}),e.jsxs("ul",{className:"list-disc pl-5",children:[Ce.errors.slice(0,5).map((t,c)=>e.jsx("li",{children:t},c)),Ce.errors.length>5&&e.jsxs("li",{children:["...and ",Ce.errors.length-5," more"]})]})]}),e.jsx("button",{onClick:()=>xt(null),className:"mt-2 text-blue-600 text-sm hover:underline",children:"Dismiss"})]}),b&&!St&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-red-700 text-sm",children:b}),e.jsx("button",{onClick:()=>B(null),className:"mt-2 text-red-600 text-sm hover:underline",children:"Dismiss"})]}),e.jsx("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:z?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading employees..."}):v.length===0?e.jsx(yt,{message:"No employees found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Profile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(t=>e.jsxs("tr",{className:"hover:bg-primary-50 cursor-pointer",onClick:()=>(n?.role==="admin"||n?.role==="hr")&&Tt(t),children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-primary-900",children:t.employee_id}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mr,{name:t.name,size:"sm"}),e.jsx("span",{className:"text-sm text-primary-900",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.job_title||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.department||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ht,{variant:ur(t.employment_status||(t.is_active?"Active":"Inactive")),label:t.employment_status||(t.is_active?"Active":"Inactive")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ht,{variant:t.profile_status==="complete"?"success":t.profile_status==="pending_review"?"info":"warning",label:t.profile_status==="complete"?"Complete":t.profile_status==="pending_review"?"Pending Review":"Incomplete"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),je(t.employee_id)},className:"px-3 py-1 text-sm text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"View"}),(n?.role==="admin"||n?.role==="hr")&&e.jsx("button",{onClick:c=>{c.stopPropagation(),Tt(t)},className:"px-3 py-1 text-sm text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"Edit"})]})})]},t.id))})]})}),e.jsxs("p",{className:"text-sm text-primary-600 mt-4",children:["Total: ",v.length," employees"]})]})]});if(s==="secret-chamber")return n?.role!=="admin"?e.jsxs("div",{className:"min-h-screen bg-primary-50 flex flex-col items-center justify-center p-8",children:[de,e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 max-w-md text-center border border-primary-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"You need admin privileges to access this section."}),e.jsx("button",{onClick:()=>ae("home"),className:"px-6 py-2 bg-accent-green text-white rounded-button hover:bg-accent-green/90 transition-colors",children:"Back to Home"})]})]}):e.jsxs("div",{className:"min-h-screen bg-primary-50 p-8",children:[de,e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-accent-green text-sm tracking-widest uppercase mb-1 font-medium",children:"Admin Settings"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"System Configuration"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm text-primary-600",children:n?.name}),e.jsx("button",{onClick:()=>a("admin"),className:"px-4 py-2 text-primary-600 hover:text-primary-800 hover:bg-primary-100 rounded-lg transition-colors",children:"â† Back to Admin"})]})]}),e.jsxs("div",{className:"bg-white rounded-card border border-primary-200 p-6 shadow-card",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 mb-6 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Feature Toggles"]}),f?e.jsx("div",{className:"text-center text-primary-600 py-8",children:"Loading..."}):C.length===0?e.jsx("div",{className:"text-center text-primary-600 py-8",children:"No features configured"}):e.jsx("div",{className:"space-y-3",children:C.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-xl border border-primary-200 hover:border-accent-green/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.key}),e.jsx("p",{className:"text-sm text-primary-600",children:t.description}),e.jsx("span",{className:"text-xs text-primary-600",children:t.category})]}),e.jsx("button",{onClick:()=>ks(t.key,!t.is_enabled),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${t.is_enabled?"bg-accent-green":"bg-primary-300"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-card ${t.is_enabled?"translate-x-6":"translate-x-1"}`})})]},t.key))})]}),e.jsx("p",{className:"text-primary-400 text-xs text-center mt-8",children:"This area is restricted to system administrators only."})]})]});if(s==="admin")return n?.role!=="admin"?e.jsxs("div",{className:"min-h-screen bg-primary-100 flex flex-col items-center justify-center p-8",children:[de,e.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"You need admin privileges to access this section."}),e.jsx("button",{onClick:()=>ae("home"),className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors",children:"Back to Home"})]})]}):e.jsxs("div",{className:"min-h-screen bg-primary-50 p-8 relative",children:[de,ze&&n?.token&&e.jsx(Oe,{employeeId:ze,token:n.token,currentUserRole:n.role,currentUserId:n.employee_id,onClose:()=>je(null)}),e.jsx("button",{onClick:()=>a("secret-chamber"),className:"absolute bottom-6 right-6 p-3 rounded-xl bg-white border border-primary-200 hover:border-accent-green/50 hover:bg-primary-50 transition-all duration-300 group shadow-card",title:"Admin Settings",children:e.jsxs("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Admin Section"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[n?.name," (",n?.role,")"]}),e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 text-accent-green hover:bg-primary-100 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),e.jsx("div",{className:"bg-white rounded-card shadow-card border border-primary-200 mb-6",children:e.jsxs("div",{className:"flex border-b border-primary-200",children:[e.jsx("button",{onClick:()=>g("dashboard"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${l==="dashboard"?"text-accent-green border-b-2 border-accent-green bg-primary-50":"text-primary-600 hover:text-primary-800 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})}),"Dashboard"]})}),e.jsx("button",{onClick:()=>g("employees"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${l==="employees"?"text-accent-green border-b-2 border-accent-green bg-primary-50":"text-primary-600 hover:text-primary-800 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Employees (",v.length,")"]})}),e.jsx("button",{onClick:()=>g("compliance"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${l==="compliance"?"text-accent-green border-b-2 border-accent-green bg-primary-50":"text-primary-600 hover:text-primary-800 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Compliance Alerts",D&&D.expired.length+(D.days_7?.length||0)>0&&e.jsx("span",{className:"bg-accent-red text-white text-xs px-2 py-0.5 rounded-full",children:D.expired.length+(D.days_7?.length||0)})]})}),e.jsx("button",{onClick:()=>g("recruitment"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${l==="recruitment"?"text-accent-green border-b-2 border-accent-green bg-primary-50":"text-primary-600 hover:text-primary-800 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Recruitment"]})}),e.jsx("button",{onClick:()=>g("evaluation"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${l==="evaluation"?"text-accent-green border-b-2 border-emerald-500 bg-primary-50/50":"text-primary-600 hover:text-primary-700 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"EOY Award"]})})]})}),l==="dashboard"&&e.jsxs(e.Fragment,{children:[N&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(nt,{title:"Total Employees",value:N.total_employees,variant:"info",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),onClick:()=>g("employees")}),e.jsx(nt,{title:"Active Employees",value:N.active_employees,variant:"success",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),subtitle:"Currently working"}),e.jsx(nt,{title:"Pending Renewals",value:N.pending_renewals,variant:"warning",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),onClick:()=>g("compliance")}),e.jsx(nt,{title:"Features Enabled",value:`${N.features_enabled}/${N.features_total}`,variant:"default",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),subtitle:"System configuration"})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>g("employees"),className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("svg",{className:"w-8 h-8 text-accent-green mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("p",{className:"font-medium text-primary-800",children:"Manage Employees"}),e.jsx("p",{className:"text-sm text-primary-600",children:"View and manage employees"})]}),e.jsxs("button",{onClick:()=>a("onboarding"),className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),e.jsx("p",{className:"font-medium text-primary-800",children:"Onboarding"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Invite new joiners"})]}),e.jsxs("button",{onClick:()=>a("passes"),className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("svg",{className:"w-8 h-8 text-amber-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),e.jsx("p",{className:"font-medium text-primary-800",children:"Pass Generation"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Create visitor passes"})]}),e.jsxs("button",{onClick:()=>g("compliance"),className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("svg",{className:"w-8 h-8 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"font-medium text-primary-800",children:"Compliance Alerts"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Document expiry warnings"})]}),e.jsxs("button",{onClick:()=>a("templates"),className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("svg",{className:"w-8 h-8 text-indigo-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})}),e.jsx("p",{className:"font-medium text-primary-800",children:"Templates"}),e.jsx("p",{className:"text-sm text-primary-600",children:"Pass templates"})]})]})]})]}),l==="employees"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-card shadow-card p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search employees by name, ID, or job title...",value:i,onChange:t=>m(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green"})]})}),e.jsxs("button",{onClick:()=>Xt(v),className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-primary-50",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Employee Directory"}),e.jsxs("p",{className:"text-sm text-primary-600 mt-1",children:[v.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.employee_id.toLowerCase().includes(i.toLowerCase())||(t.job_title||"").toLowerCase().includes(i.toLowerCase())).length," employees found"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:v.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.employee_id.toLowerCase().includes(i.toLowerCase())||(t.job_title||"").toLowerCase().includes(i.toLowerCase())).slice(0,50).map(t=>e.jsxs("tr",{className:"hover:bg-primary-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-200 flex items-center justify-center text-primary-700 font-medium",children:t.name.split(" ").map(c=>c[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.name}),e.jsx("p",{className:"text-sm text-primary-600",children:t.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600 font-mono",children:t.employee_id}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.job_title||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.function||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t.status==="active"?"bg-accent-green/10 text-accent-green border-accent-green/20":t.status==="on_leave"?"bg-amber-50 text-amber-700 border-amber-200":"bg-primary-50 text-primary-700 border-primary-200"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(t.employee_id),className:"text-accent-green hover:text-accent-green/80 font-medium text-sm",children:"View Profile"})})]},t.id))})]})})]})]}),l==="compliance"&&e.jsx(e.Fragment,{children:_t?e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-primary-600",children:"Loading compliance alerts..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center text-red-600 text-lg",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:D?.expired.length||0}),e.jsx("p",{className:"text-xs text-red-600",children:"Expired"})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 text-lg",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:D?.days_7?.length||0}),e.jsx("p",{className:"text-xs text-orange-600",children:"Within 7 days"})]})]})}),e.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-600 text-lg",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:D?.days_30?.length||0}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Within 30 days"})]})]})}),e.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-amber-600 text-lg",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-700",children:D?.days_custom?.length||0}),e.jsx("p",{className:"text-xs text-amber-600",children:"Within 60 days"})]})]})})]}),D?.expired&&D.expired.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-red-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-700 flex items-center gap-2",children:[e.jsx("span",{children:"!"})," Expired Documents (",D.expired.length,")"]}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"These documents need immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Overdue"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.expired.map((t,c)=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.employee_name}),e.jsx("p",{className:"text-sm text-primary-600",children:t.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.expiry_date}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-red-600 font-medium",children:[Math.abs(t.days_until_expiry)," days overdue"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(t.employee_id),className:"text-accent-green hover:text-accent-green font-medium text-sm",children:"View Profile"})})]},`expired-${c}`))})]})]}),D?.days_7&&D.days_7.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-orange-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-orange-700 flex items-center gap-2",children:[e.jsx("span",{children:"!"})," Expiring Within 7 Days (",D.days_7.length,")"]}),e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Urgent - documents that need immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_7.map((t,c)=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.employee_name}),e.jsx("p",{className:"text-sm text-primary-600",children:t.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.expiry_date}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-orange-600 font-medium",children:[t.days_until_expiry," days"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(t.employee_id),className:"text-accent-green hover:text-accent-green font-medium text-sm",children:"View Profile"})})]},`days7-${c}`))})]})]}),D?.days_30&&D.days_30.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-yellow-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-yellow-700 flex items-center gap-2",children:[e.jsx("span",{children:"!"})," Expiring Within 30 Days (",D.days_30.length,")"]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Documents that need to be renewed soon"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_30.map((t,c)=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.employee_name}),e.jsx("p",{className:"text-sm text-primary-600",children:t.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.expiry_date}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-yellow-600 font-medium",children:[t.days_until_expiry," days"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(t.employee_id),className:"text-accent-green hover:text-accent-green font-medium text-sm",children:"View Profile"})})]},`days30-${c}`))})]})]}),D?.days_custom&&D.days_custom.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-primary-100 bg-amber-50 rounded-t-xl",children:e.jsxs("h2",{className:"text-lg font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("span",{children:"!"})," Expiring Within 60 Days (",D.days_custom.length,")"]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_custom.map((t,c)=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.employee_name}),e.jsx("p",{className:"text-sm text-primary-600",children:t.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.expiry_date}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-amber-600 font-medium",children:[t.days_until_expiry," days"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(t.employee_id),className:"text-accent-green hover:text-accent-green font-medium text-sm",children:"View Profile"})})]},`days60-${c}`))})]})]}),D&&D.expired.length+(D.days_7?.length||0)+(D.days_30?.length||0)+(D.days_custom?.length||0)===0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"All Clear!"}),e.jsx("p",{className:"text-xl font-semibold text-accent-green mb-2",children:"No Compliance Issues"}),e.jsx("p",{className:"text-primary-600",children:"No documents are expired or expiring within the next 60 days."})]})]})}),l==="recruitment"&&e.jsxs("div",{className:"space-y-6 bg-primary-50 min-h-screen",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Active Positions"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:Xe?.active_positions??We.length})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Total Candidates"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:Xe?.total_candidates??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"In Interview"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:Xe?.in_interview??Qe?.interview??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Hired (30 days)"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:Xe?.hired_30_days??Qe?.hired??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),We.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Open Positions (",We.length,")"]}),e.jsxs("button",{onClick:()=>es(We),className:"px-3 py-1.5 bg-accent-green text-white text-sm rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]}),e.jsx("div",{className:"grid gap-4",children:We.map(t=>e.jsx("div",{className:"border border-primary-200 rounded-lg p-4 hover:border-accent-green transition-colors bg-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-800",children:t.position_title}),e.jsxs("p",{className:"text-sm text-primary-600",children:[t.department," â€¢ ",t.employment_type]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${t.status==="open"?"border-accent-green text-accent-green bg-accent-green/5":t.status==="pending_approval"?"border-amber-400 text-amber-600 bg-amber-50":"border-primary-300 text-primary-600 bg-primary-50"}`,children:t.status?.replace("_"," ")}),e.jsx("span",{className:"text-xs text-primary-500",children:t.request_number})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-primary-700",children:["Headcount: ",t.headcount||1]}),t.salary_range_min&&t.salary_range_max&&e.jsxs("p",{className:"text-xs text-primary-500",children:["AED ",t.salary_range_min.toLocaleString()," - ",t.salary_range_max.toLocaleString()]})]}),e.jsxs("button",{onClick:c=>{c.stopPropagation(),$t(t.id),ps(t.hiring_manager_id||n?.employee_id||""),a("manager-pass")},className:"px-3 py-1.5 bg-accent-green text-white text-xs font-medium rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-1",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Manager Pass"]})]})]})},t.id))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Candidate Pipeline"]}),e.jsxs("button",{onClick:()=>Zt(Ke),className:"px-3 py-1.5 bg-accent-green text-white text-sm rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-4",children:[{key:"applied",label:"Applied"},{key:"screening",label:"Screening"},{key:"interview",label:"Interview"},{key:"offer",label:"Offer"},{key:"hired",label:"Hired"}].map(t=>e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 min-h-[200px] border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-primary-700",children:t.label}),e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full border border-primary-300",children:Qe?.[t.key]??0})]}),e.jsx("div",{className:"space-y-2",children:(Qe?.[t.key]??0)===0&&e.jsx("div",{className:"text-center py-8 text-primary-500 text-sm",children:e.jsx("p",{children:"No candidates"})})})]},t.key))})]}),Ke.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden border border-primary-200",children:[e.jsx("div",{className:"px-8 py-6 border-b border-primary-200 bg-primary-50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-800",children:"Candidate Screening"}),e.jsxs("p",{className:"text-sm text-primary-600 mt-1",children:[Ke.length," candidates in pipeline"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search candidates...",value:Fe,onChange:t=>os(t.target.value),className:"w-64 pl-10 pr-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm focus:ring-2 focus:ring-accent-green focus:border-accent-green shadow-sm"})]}),e.jsxs("select",{value:dt,onChange:t=>cs(t.target.value),className:"px-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm text-primary-700 focus:ring-2 focus:ring-accent-green shadow-sm",children:[e.jsx("option",{value:"",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Offer"}),e.jsx("option",{value:"hired",children:"Hired"})]}),e.jsxs("select",{value:mt,onChange:t=>ds(t.target.value),className:"px-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm text-primary-700 focus:ring-2 focus:ring-accent-green shadow-sm",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Indeed",children:"Indeed"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Direct",children:"Direct Application"}),e.jsx("option",{value:"Agency",children:"Agency"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary-50",children:[e.jsx("th",{className:"py-4 px-3 text-left w-12 border-b border-primary-200",children:e.jsx("input",{type:"checkbox",className:"rounded border-primary-300 bg-white text-accent-green focus:ring-accent-green"})}),e.jsx("th",{className:"py-4 px-2 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-16 border-b border-primary-200",children:"Rank"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider min-w-[180px] border-b border-primary-200",children:"Name"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider min-w-[200px] border-b border-primary-200",children:"Current Position"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-28 border-b border-primary-200",children:"CV Scoring"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-36 border-b border-primary-200",children:"Skills Match"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-28 border-b border-primary-200",children:"Education"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-24 border-b border-primary-200",children:"Experience"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-bold text-primary-700 uppercase tracking-wider w-28 border-b border-primary-200",children:"Stage"})]})}),e.jsx("tbody",{children:[...Ke].filter(t=>{const c=Fe.toLowerCase(),L=!Fe||t.full_name?.toLowerCase().includes(c)||t.email?.toLowerCase().includes(c),R=!dt||t.stage===dt,le=!mt||t.source===mt;return L&&R&&le}).sort((t,c)=>(c.cv_scoring||c.ai_ranking||0)-(t.cv_scoring||t.ai_ranking||0)).map((t,c)=>{const L=We.find(le=>le.id===t.recruitment_request_id),R=t.cv_scoring||t.ai_ranking;return e.jsxs("tr",{className:"border-b border-primary-200 hover:bg-primary-50/50 cursor-pointer transition-colors group",onClick:()=>{Ze({...t,position:L}),et(!0)},children:[e.jsx("td",{className:"py-5 px-3",children:e.jsx("input",{type:"checkbox",className:"rounded border-primary-300 text-accent-green focus:ring-accent-green",onClick:le=>le.stopPropagation()})}),e.jsx("td",{className:"py-5 px-2",children:e.jsxs("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary-100 group-hover:bg-white rounded-lg text-sm font-bold text-primary-700 border border-primary-200",children:["#",c+1]})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-primary-800",children:t.full_name})})})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("p",{className:"text-sm text-primary-700 font-medium",children:t.current_position||"-"})}),e.jsx("td",{className:"py-5 px-4",children:R?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-sm border-2 ${R>=80?"bg-accent-green border-accent-green":R>=60?"bg-accent-green/80 border-accent-green/80":R>=40?"bg-accent-green/60 border-accent-green/60":"bg-primary-400 border-primary-400"}`,children:R})}):e.jsx("span",{className:"text-sm text-primary-400",children:"-"})}),e.jsx("td",{className:"py-5 px-4",children:t.skills_match_score?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2.5 bg-primary-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${t.skills_match_score>=80?"bg-accent-green":t.skills_match_score>=60?"bg-accent-green/80":"bg-accent-green/60"}`,style:{width:`${t.skills_match_score}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-primary-700",children:[t.skills_match_score,"%"]})]}):e.jsx("span",{className:"text-sm text-primary-400",children:"-"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:"text-sm text-primary-700",children:t.education_level||"-"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:"text-sm font-medium text-primary-700",children:t.years_experience?`${t.years_experience}+ yrs`:"-"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-lg border ${t.stage==="applied"?"border-accent-green text-accent-green bg-accent-green/5":t.stage==="screening"?"border-amber-400 text-amber-600 bg-amber-50":t.stage==="interview"||t.stage==="offer"||t.stage==="hired"?"border-accent-green text-accent-green bg-accent-green/5":"border-primary-300 text-primary-600 bg-primary-50"}`,children:t.stage?.charAt(0).toUpperCase()+t.stage?.slice(1)})}),e.jsx("td",{className:"py-5 px-4",children:t.linkedin_url?e.jsxs("a",{href:t.linkedin_url,target:"_blank",rel:"noopener noreferrer",onClick:le=>le.stopPropagation(),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-primary-50 hover:bg-accent-green/10 text-accent-green text-xs font-medium rounded-lg transition-colors border border-primary-200",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"View"]}):e.jsx("span",{className:"text-sm text-primary-400",children:"-"})}),e.jsx("td",{className:"py-5 px-4",children:t.resume_url?e.jsxs("a",{href:t.resume_url,target:"_blank",rel:"noopener noreferrer",onClick:le=>le.stopPropagation(),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-primary-50 hover:bg-accent-green/10 text-accent-green text-xs font-medium rounded-lg transition-colors border border-primary-200",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View"]}):e.jsx("span",{className:"text-sm text-primary-400",children:"-"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:"text-sm text-primary-700",children:t.source||"-"})})]},t.id)})})]})}),e.jsx("div",{className:"px-8 py-4 bg-primary-50 border-t border-primary-200",children:e.jsx("p",{className:"text-sm text-primary-600",children:"Click on a candidate row to view their full profile"})})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>tt(!0),className:"flex items-center gap-3 p-4 bg-primary-50 hover:bg-accent-green/10 rounded-lg transition-colors border border-primary-200",children:[e.jsx("div",{className:"p-2 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("span",{className:"font-medium text-primary-700",children:"New Position"})]}),e.jsxs("button",{onClick:()=>alert("Add Candidate feature - requires selecting a position first"),className:"flex items-center gap-3 p-4 bg-primary-50 hover:bg-accent-green/10 rounded-lg transition-colors border border-primary-200",children:[e.jsx("div",{className:"p-2 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),e.jsx("span",{className:"font-medium text-primary-700",children:"Add Candidate"})]}),e.jsxs("button",{onClick:()=>alert("Upload CV feature - resume parsing coming soon"),className:"flex items-center gap-3 p-4 bg-primary-50 hover:bg-accent-green/10 rounded-lg transition-colors border border-primary-200",children:[e.jsx("div",{className:"p-2 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("span",{className:"font-medium text-primary-700",children:"Upload CV"})]}),e.jsxs("button",{onClick:()=>alert("Schedule Interview feature - requires candidates in pipeline"),className:"flex items-center gap-3 p-4 bg-primary-50 hover:bg-accent-green/10 rounded-lg transition-colors border border-primary-200",children:[e.jsx("div",{className:"p-2 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:"font-medium text-primary-700",children:"Schedule Interview"})]})]})]}),e.jsx("div",{className:"bg-primary-50 rounded-card shadow-card p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-2",children:"Recruitment Module Active"}),e.jsx("p",{className:"text-primary-600 mb-3",children:"Backend API is fully implemented with 25+ endpoints. Features include:"}),e.jsxs("ul",{className:"text-sm text-primary-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Automated CV parsing (pyresparser)"}),e.jsx("li",{children:"â€¢ Kanban pipeline with drag-and-drop"}),e.jsx("li",{children:"â€¢ Manager & Candidate pass integration"}),e.jsx("li",{children:"â€¢ Interview scheduling with availability matching"}),e.jsx("li",{children:"â€¢ UAE-specific compliance fields (Emirates ID, Visa)"})]})]})]})})]}),l==="evaluation"&&e.jsx(Xs,{token:n?.token||"",userId:n?.id||0}),ms&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Create New Position"}),e.jsx("button",{onClick:()=>tt(!1),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),Ns()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Position Title *"}),e.jsx("input",{type:"text",value:re.position_title,onChange:t=>ve(c=>({...c,position_title:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., Thermodynamics Engineer",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Department *"}),e.jsx("input",{type:"text",value:re.department,onChange:t=>ve(c=>({...c,department:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., Engineering / R&D",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Employment Type"}),e.jsxs("select",{value:re.employment_type,onChange:t=>ve(c=>({...c,employment_type:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",children:[e.jsx("option",{value:"Full-time",children:"Full-time"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Internship",children:"Internship"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Headcount"}),e.jsx("input",{type:"number",value:re.headcount,onChange:t=>ve(c=>({...c,headcount:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Salary Range Min (AED)"}),e.jsx("input",{type:"number",value:re.salary_range_min,onChange:t=>ve(c=>({...c,salary_range_min:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., 15000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Salary Range Max (AED)"}),e.jsx("input",{type:"number",value:re.salary_range_max,onChange:t=>ve(c=>({...c,salary_range_max:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., 25000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Job Description"}),e.jsx("textarea",{value:re.job_description,onChange:t=>ve(c=>({...c,job_description:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green min-h-[100px]",placeholder:"Enter job description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Requirements"}),e.jsx("textarea",{value:re.requirements,onChange:t=>ve(c=>({...c,requirements:t.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green min-h-[100px]",placeholder:"Enter requirements..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>tt(!1),className:"px-6 py-2 border border-primary-200 text-primary-700 rounded-lg hover:bg-primary-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:z||!re.position_title,className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:z?"Creating...":"Create Position"})]})]})]})}),ls&&W&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"w-full max-w-5xl max-h-[95vh] overflow-y-auto rounded-card shadow-card",style:{background:"linear-gradient(135deg, #0a1628 0%, #1a2942 50%, #0d1f38 100%)"},children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>{et(!1),Ze(null)},className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{className:"text-sm font-medium",children:"BACK TO LIST"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-2 text-slate-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{className:"p-2 text-slate-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})]}),e.jsxs("div",{className:"mt-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:W.full_name}),e.jsx("p",{className:"text-lg text-cyan-400 mt-1",children:W.current_position||W.position?.position_title||"Position not specified"}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-slate-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),W.current_location||W.current_country||"Location pending"]}),W.email&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),W.email]}),W.phone&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),W.phone]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-bold uppercase tracking-wide ${W.stage==="applied"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":W.stage==="screening"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":W.stage==="interview"?"bg-teal-500/20 text-teal-400 border border-teal-500/30":W.stage==="offer"?"bg-green-500/20 text-green-400 border border-green-500/30":W.stage==="hired"?"bg-accent-green/20 text-accent-green border border-emerald-500/30":"bg-slate-500/20 text-slate-400 border border-slate-500/30"}`,children:W.stage==="interview"?"Interview Stage":W.stage?.toUpperCase()}),(W.cv_scoring||W.ai_ranking)&&e.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 rounded-xl px-4 py-3 border border-slate-700/50",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-cyan-400",children:[W.cv_scoring||W.ai_ranking,"%"]}),e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Match Score"})]}),e.jsx("div",{className:"w-12 h-12 bg-slate-700/50 rounded-lg flex items-center justify-center border border-slate-600/50",children:e.jsx("svg",{className:"w-6 h-6 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]})]})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Personal Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Nationality"}),e.jsx("p",{className:"text-white font-medium",children:W.nationality||"Pending"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Visa Status"}),e.jsx("p",{className:"text-white font-medium",children:W.visa_status||"Pending"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Willing to Relocate"}),e.jsx("p",{className:"text-white font-medium",children:W.willing_to_relocate===!0?"Yes":W.willing_to_relocate===!1?"No":"Pending"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Expected Salary"}),e.jsx("p",{className:"text-cyan-400 font-bold",children:W.expected_salary?`${W.salary_currency||"AED"} ${Number(W.expected_salary).toLocaleString()}`:"Pending"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Experience Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Total Experience"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:W.years_experience?`${W.years_experience} Years`:"Pending"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Notice Period"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:W.notice_period_days?`${W.notice_period_days} Days`:"Pending"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700/30",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Current Role"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:W.current_position||"Not specified"}),e.jsx("p",{className:"text-cyan-400",children:W.current_company||""})]}),W.industry_function&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2",children:"Industry Background"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx("span",{className:"px-3 py-1.5 bg-slate-700/50 text-slate-300 rounded-lg text-sm border border-slate-600/50",children:W.industry_function})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Top Skills"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:W.skills?.slice(0,6).map((t,c)=>e.jsx("span",{className:"px-3 py-1.5 bg-cyan-500/10 text-cyan-400 rounded-lg text-sm border border-cyan-500/20",children:t},c))||e.jsx("p",{className:"text-slate-500 text-sm",children:"Skills pending"})})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("svg",{className:"w-5 h-5 text-teal-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),e.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"})]}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Education"})]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:W.education_level||"Pending"}),W.education_institution&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-slate-400",children:W.education_field||""}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:W.education_institution})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[(n?.role==="admin"||n?.role==="hr")&&e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide",children:"Behavioural Fit"})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative w-28 h-28",children:[e.jsxs("svg",{className:"w-28 h-28 transform -rotate-90",children:[e.jsx("circle",{cx:"56",cy:"56",r:"48",stroke:"#1e293b",strokeWidth:"8",fill:"none"}),e.jsx("circle",{cx:"56",cy:"56",r:"48",stroke:"#22d3ee",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:`${(W.skills_match_score||75)*3.01} 301`})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-cyan-400",children:[W.skills_match_score||75,"%"]})})]})}),e.jsx("div",{className:"space-y-3",children:["Ownership","Accuracy","Calm Under Pressure","Teamwork","Communication"].map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-400",children:t}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(L=>e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${L<=(W.soft_skills?.[t.toLowerCase().replace(/ /g,"_")]||0)?"bg-cyan-400":"bg-slate-600"}`},L))})]},t))}),!W.soft_skills&&e.jsx("p",{className:"text-xs text-slate-500 mt-3 text-center",children:"Evaluation pending"}),e.jsxs("div",{className:"mt-5 pt-5 border-t border-slate-700/50",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-3",children:"Key Strengths"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-cyan-500/10 text-cyan-400 rounded-full text-xs border border-cyan-500/20",children:"Collaborative"}),e.jsx("span",{className:"px-3 py-1 bg-cyan-500/10 text-cyan-400 rounded-full text-xs border border-cyan-500/20",children:"Detail-oriented"}),e.jsx("span",{className:"px-3 py-1 bg-cyan-500/10 text-cyan-400 rounded-full text-xs border border-cyan-500/20",children:"Strategic Thinker"})]})]})]}),(n?.role==="admin"||n?.role==="hr")&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-green-900/20 rounded-xl p-5 border border-emerald-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-xs text-accent-green uppercase tracking-wide font-bold",children:"Recommendation"})]}),e.jsx("p",{className:"text-3xl font-bold text-accent-green mb-3",children:(W.cv_scoring||W.ai_ranking||0)>=70?"Hire":(W.cv_scoring||W.ai_ranking||0)>=50?"Consider":"Review"}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:(W.cv_scoring||W.ai_ranking||0)>=70?`${W.full_name?.split(" ")[0]} is a strong candidate with excellent qualifications and cultural fit potential.`:`${W.full_name?.split(" ")[0]} shows potential but may need further evaluation.`})]}),e.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-5 border border-slate-700/50",children:[e.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wide mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[W.resume_path&&e.jsxs("a",{href:W.resume_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full px-4 py-3 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded-lg transition-colors border border-blue-500/20",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:"View CV"})]}),W.linkedin_url&&e.jsxs("a",{href:W.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full px-4 py-3 bg-slate-700/50 hover:bg-slate-700 text-white rounded-lg transition-colors border border-slate-600/50",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),e.jsx("span",{className:"font-medium",children:"LinkedIn Profile"})]}),e.jsxs("button",{onClick:()=>{Wt(W.id),et(!1),Ze(null),a("candidate-pass")},className:"flex items-center gap-3 w-full px-4 py-3 bg-cyan-500/10 hover:bg-cyan-500/20 text-cyan-400 rounded-lg transition-colors border border-cyan-500/20",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),e.jsx("span",{className:"font-medium",children:"View Candidate Pass"})]})]})]})]})]}),e.jsx("div",{className:"px-6 py-4 border-t border-slate-700/50 flex justify-end",children:e.jsx("button",{onClick:()=>{et(!1),Ze(null)},className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Close"})})]})})]})]});if(s==="templates")return e.jsx(or,{});if(s==="passes")return e.jsxs("div",{className:"min-h-screen bg-primary-50 p-8",children:[de,e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Pass Generation"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 text-accent-green hover:bg-accent-green/10 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("button",{onClick:()=>be("all"),className:`bg-white rounded-xl shadow-sm p-5 border border-primary-200 text-left transition-all hover:shadow-md hover:border-primary-300 ${X==="all"?"ring-2 ring-accent-green":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600 font-medium",children:"Total Passes"}),e.jsx("p",{className:"text-2xl font-bold text-primary-800",children:oe.length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})})]})}),e.jsx("button",{onClick:()=>be("active"),className:`bg-white rounded-xl shadow-sm p-5 border border-primary-200 text-left transition-all hover:shadow-md hover:border-primary-300 ${X==="active"?"ring-2 ring-accent-green":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600 font-medium",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-accent-green",children:oe.filter(t=>t.status==="active").length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("button",{onClick:()=>be("expired"),className:`bg-white rounded-xl shadow-sm p-5 border border-primary-200 text-left transition-all hover:shadow-md hover:border-primary-300 ${X==="expired"?"ring-2 ring-accent-green":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600 font-medium",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:oe.filter(t=>t.status==="expired").length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("button",{onClick:()=>be("revoked"),className:`bg-white rounded-xl shadow-sm p-5 border border-primary-200 text-left transition-all hover:shadow-md hover:border-primary-300 ${X==="revoked"?"ring-2 ring-accent-green":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600 font-medium",children:"Revoked"}),e.jsx("p",{className:"text-2xl font-bold text-accent-red",children:oe.filter(t=>t.status==="revoked").length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})})]})})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),"Generate New Pass"]})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Generate New Pass"}),e.jsx("button",{onClick:()=>o(!1),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:b}),e.jsxs("form",{onSubmit:_s,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Pass Type"}),e.jsxs("select",{value:M.pass_type,onChange:t=>Q({...M,pass_type:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",children:[e.jsx("option",{value:"recruitment",children:"Recruitment"}),e.jsx("option",{value:"onboarding",children:"Onboarding"}),e.jsx("option",{value:"visitor",children:"Visitor"}),e.jsx("option",{value:"contractor",children:"Contractor"}),e.jsx("option",{value:"temporary",children:"Temporary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:M.full_name,onChange:t=>Q({...M,full_name:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Valid From *"}),e.jsx("input",{type:"date",value:M.valid_from,onChange:t=>Q({...M,valid_from:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Valid Until *"}),e.jsx("input",{type:"date",value:M.valid_until,onChange:t=>Q({...M,valid_until:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0})]})]}),M.pass_type==="onboarding"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Start Stage (optional)"}),e.jsx("input",{type:"text",placeholder:"e.g., documents_submitted",value:M.start_stage||"",onChange:t=>Q({...M,start_stage:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Stage Order (comma-separated)"}),e.jsx("input",{type:"text",placeholder:"initiated,documents_pending,documents_submitted,pre_joining,joining_confirmed,completed",value:M.stage_order||"",onChange:t=>Q({...M,stage_order:t.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("p",{className:"text-xs text-primary-600 mt-1",children:"Admins can reorder onboarding stages or start mid-stage."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:se,className:"btn-submit flex-1",children:se?"Creating...":"Generate Pass"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"btn-cancel flex-1",children:"Cancel"})]})]})]})}),X!=="all"&&e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-sm text-primary-600",children:"Showing:"}),e.jsxs("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${X==="active"?"bg-green-100 text-green-700":X==="expired"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[X.charAt(0).toUpperCase()+X.slice(1)," passes"]}),e.jsx("button",{onClick:()=>be("all"),className:"text-sm text-accent-green hover:text-accent-green",children:"Clear filter"})]}),e.jsx("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:se&&oe.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading passes..."}):oe.filter(t=>X==="all"||t.status===X).length===0?e.jsx(yt,{message:X==="all"?"No passes generated yet":`No ${X} passes`}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-emerald-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Pass #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Valid"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-accent-green uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:oe.filter(t=>X==="all"||t.status===X).map(t=>e.jsxs("tr",{className:"hover:bg-primary-50/50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-primary-900",children:t.pass_number}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.pass_type==="recruitment"?"bg-blue-100 text-blue-700":t.pass_type==="onboarding"?"bg-accent-green/10 text-accent-green":t.pass_type==="visitor"?"bg-teal-100 text-teal-700":t.pass_type==="contractor"?"bg-orange-100 text-orange-700":"bg-primary-100 text-primary-700"}`,children:t.pass_type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-900",children:t.full_name}),e.jsxs("td",{className:"px-6 py-4 text-sm text-primary-600",children:[t.valid_from," to ",t.valid_until]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.status==="active"?"bg-green-100 text-green-700":t.status==="expired"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[e.jsx("button",{onClick:()=>ye(t),className:"text-accent-green hover:text-accent-green text-sm font-medium",children:"View"}),t.status==="active"&&e.jsx("button",{onClick:()=>Ft(t.pass_number),className:"text-red-600 hover:text-red-800 text-sm",children:"Revoke"})]})]},t.id))})]})}),K&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Pass Details"}),e.jsx("button",{onClick:()=>ye(null),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-primary-600",children:"Pass Number"}),e.jsx("span",{className:"font-mono font-bold text-accent-green",children:K.pass_number})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Full Name"}),e.jsx("p",{className:"font-medium text-primary-800",children:K.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Pass Type"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${K.pass_type==="recruitment"?"bg-blue-100 text-blue-700":K.pass_type==="onboarding"?"bg-accent-green/10 text-accent-green":K.pass_type==="visitor"?"bg-teal-100 text-teal-700":K.pass_type==="contractor"?"bg-orange-100 text-orange-700":"bg-primary-100 text-primary-700"}`,children:K.pass_type})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Valid From"}),e.jsx("p",{className:"font-medium text-primary-800",children:K.valid_from})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Valid Until"}),e.jsx("p",{className:"font-medium text-primary-800",children:K.valid_until})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${K.status==="active"?"bg-green-100 text-green-700":K.status==="expired"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[K.status==="active"&&e.jsx("button",{onClick:()=>{Ft(K.pass_number),ye(null)},className:"flex-1 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Revoke Pass"}),e.jsx("button",{onClick:()=>ye(null),className:"flex-1 py-2 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors",children:"Close"})]})]})})]})]});if(s==="template-manager"||s==="template-candidate"||s==="template-onboarding"||s==="template-employee"){const t=s==="template-manager"?"manager":s==="template-candidate"?"candidate":s==="template-onboarding"?"onboarding":s==="template-employee"?"employee":null;return e.jsxs("div",{className:"min-h-screen bg-primary-100 p-8",children:[de,e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Pass Templates"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsxs("button",{onClick:()=>t?a("templates"):ae("home"),className:"px-4 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:["â† ",t?"Back to Templates":"Back to Home"]})]})]}),!t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("button",{onClick:()=>a("template-manager"),className:"bg-white rounded-card shadow-card p-6 text-left hover:shadow-card transition-all border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-1",children:"Manager Pass"}),e.jsx("p",{className:"text-sm text-primary-600 mb-3",children:"Recruitment governance, approvals, visibility, next actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-full",children:"Approvals"}),e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-full",children:"Pipeline"}),e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-full",children:"Actions"})]})]})]})}),e.jsx("button",{onClick:()=>a("template-candidate"),className:"bg-white rounded-card shadow-card p-6 text-left hover:shadow-card transition-all border-l-4 border-teal-500",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-1",children:"Candidate Pass"}),e.jsx("p",{className:"text-sm text-primary-600 mb-3",children:"Candidate experience, HR visibility, recruitment timeline"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-teal-50 text-teal-600 text-xs rounded-full",children:"Stages"}),e.jsx("span",{className:"px-2 py-1 bg-teal-50 text-teal-600 text-xs rounded-full",children:"Timeline"}),e.jsx("span",{className:"px-2 py-1 bg-teal-50 text-teal-600 text-xs rounded-full",children:"Contact"})]})]})]})}),e.jsx("button",{onClick:()=>a("template-onboarding"),className:"bg-white rounded-card shadow-card p-6 text-left hover:shadow-card transition-all border-l-4 border-emerald-500",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-accent-green/10 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-1",children:"Onboarding Pass"}),e.jsx("p",{className:"text-sm text-primary-600 mb-3",children:"Post-offer acceptance, new joiner checklist, document collection"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-primary-50 text-accent-green text-xs rounded-full",children:"Checklist"}),e.jsx("span",{className:"px-2 py-1 bg-primary-50 text-accent-green text-xs rounded-full",children:"Documents"}),e.jsx("span",{className:"px-2 py-1 bg-primary-50 text-accent-green text-xs rounded-full",children:"Setup"})]})]})]})}),e.jsx("button",{onClick:()=>a("template-employee"),className:"bg-white rounded-card shadow-card p-6 text-left hover:shadow-card transition-all border-l-4 border-amber-500",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-800 mb-1",children:"Employee Pass"}),e.jsx("p",{className:"text-sm text-primary-600 mb-3",children:"Living digital identity for the employee lifecycle"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-600 text-xs rounded-full",children:"Profile"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-600 text-xs rounded-full",children:"Requests"}),e.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-600 text-xs rounded-full",children:"Actions"})]})]})]})})]}),t==="manager"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Manager Name"}),e.jsx("p",{className:"text-xl font-bold",children:"[Manager Name]"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"ID: [Manager ID]"})]})]}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-white/20 rounded text-xs",children:"Department"}),e.jsx("span",{className:"px-2 py-1 bg-green-500/80 rounded text-xs",children:"Active"})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Recruitment Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Position"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[Position Title]"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Status"}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Open"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"SLA Days"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[X] days"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Pipeline"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[X] candidates"})]})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Approvals"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-amber-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-primary-700",children:"Job Requisition"}),e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-primary-700",children:"Budget/Salary"}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Approved"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-primary-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-primary-700",children:"Offer Approval"}),e.jsx("span",{className:"px-2 py-0.5 bg-slate-200 text-slate-900 text-xs rounded-full",children:"Not Started"})]})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Pipeline Snapshot"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"5"})}),e.jsx("p",{className:"text-xs text-primary-600",children:"Screen"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:e.jsx("span",{className:"text-teal-600 font-bold text-sm",children:"3"})}),e.jsx("p",{className:"text-xs text-primary-600",children:"Assess"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-1",children:e.jsx("span",{className:"text-amber-600 font-bold text-sm",children:"2"})}),e.jsx("p",{className:"text-xs text-primary-600",children:"Interview"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/10 rounded-full flex items-center justify-center mx-auto mb-1",children:e.jsx("span",{className:"text-accent-green font-bold text-sm",children:"1"})}),e.jsx("p",{className:"text-xs text-primary-600",children:"Offer"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-1",children:e.jsx("span",{className:"text-primary-600 font-bold text-sm",children:"0"})}),e.jsx("p",{className:"text-xs text-primary-600",children:"Onboard"})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Next Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full p-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Approve Pending Items"]}),e.jsxs("button",{className:"w-full p-3 bg-primary-50 text-primary-700 rounded-lg text-sm font-medium hover:bg-primary-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Review Candidates"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Manager Pass Template"}),e.jsx("p",{className:"text-sm text-blue-700",children:"This template provides recruitment governance, approvals visibility, candidate pipeline tracking, and actionable next steps for hiring managers."})]})]}),t==="candidate"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 p-6 text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-teal-100 text-sm",children:"Candidate"}),e.jsx("p",{className:"text-xl font-bold",children:"[Candidate Name]"}),e.jsx("p",{className:"text-teal-200 text-sm",children:"ID: [Candidate ID]"})]})]}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-white/20 rounded text-xs",children:"[Position Title]"}),e.jsx("span",{className:"px-2 py-1 bg-amber-500/80 rounded text-xs",children:"Interview Stage"})]})]}),e.jsxs("div",{className:"p-4 border-b flex gap-2",children:[e.jsxs("button",{className:"flex-1 p-2 bg-green-50 text-green-700 rounded-lg text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981z"})}),"WhatsApp HR"]}),e.jsxs("button",{className:"flex-1 p-2 bg-blue-50 text-blue-700 rounded-lg text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email HR"]}),e.jsxs("button",{className:"flex-1 p-2 bg-primary-50 text-primary-700 rounded-lg text-xs font-medium flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download JD"]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Recruitment Stages"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1",children:"Application Received"}),e.jsx("span",{className:"text-xs text-primary-600",children:"Jan 15"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1",children:"Screening"}),e.jsx("span",{className:"text-xs text-primary-600",children:"Jan 18"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1",children:"Assessment"}),e.jsx("span",{className:"text-xs text-primary-600",children:"Jan 22"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"4"})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1 font-medium",children:"Interview"}),e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-60",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"5"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Offer"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-60",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"6"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Onboarding"})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Next Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full p-3 bg-teal-50 text-teal-700 rounded-lg text-sm font-medium hover:bg-teal-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Attend Interview"]}),e.jsxs("button",{className:"w-full p-3 bg-primary-50 text-primary-700 rounded-lg text-sm font-medium hover:bg-primary-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Submit Documents"]})]})]})]}),e.jsxs("div",{className:"bg-teal-50 rounded-xl p-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-teal-800 mb-2",children:"Candidate Pass Template"}),e.jsx("p",{className:"text-sm text-teal-700",children:"This template tracks candidate progress through recruitment stages, provides quick HR contact options, and shows clear next steps for the candidate."})]})]}),t==="onboarding"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 p-6 text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm",children:"New Joiner"}),e.jsx("p",{className:"text-xl font-bold",children:"[Employee Name]"}),e.jsx("p",{className:"text-emerald-200 text-sm",children:"Temp ID: [TEMP-XXX]"})]})]}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-white/20 rounded text-xs",children:"[Position]"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/80 rounded text-xs",children:"New Joiner"})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Onboarding Checklist"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1",children:"Document Collection"}),e.jsx("span",{className:"text-xs text-primary-600",children:"By HR"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"text-sm text-primary-700 flex-1 font-medium",children:"Visa / Clearance"}),e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"3"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Medical"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"4"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"IT Setup"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"5"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Induction Schedule"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"6"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Insurance Activation"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"7"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Bank Setup"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-primary-50 rounded-lg opacity-70",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"8"})}),e.jsx("span",{className:"text-sm text-primary-600 flex-1",children:"Attendance Registration"})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Next Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full p-3 bg-primary-50 text-accent-green rounded-lg text-sm font-medium hover:bg-primary-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Document"]}),e.jsxs("button",{className:"w-full p-3 bg-primary-50 text-primary-700 rounded-lg text-sm font-medium hover:bg-primary-100 transition-colors text-left flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Acknowledge Policies"]})]})]})]}),e.jsxs("div",{className:"bg-primary-50 rounded-xl p-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-accent-green mb-2",children:"Onboarding Pass Template"}),e.jsx("p",{className:"text-sm text-accent-green",children:"This template is used after offer acceptance to track new joiner onboarding progress including documents, visa, IT setup, and induction scheduling."})]})]}),t==="employee"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Employee"}),e.jsx("p",{className:"text-xl font-bold",children:"[Employee Name]"}),e.jsx("p",{className:"text-amber-200 text-sm",children:"ID: [EMP-XXX]"})]})]}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-white/20 rounded text-xs",children:"[Position] - [Department]"}),e.jsx("span",{className:"px-2 py-1 bg-green-500/80 rounded text-xs",children:"Active"})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{className:"p-3 bg-green-50 text-green-700 rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-green-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981z"})}),"WhatsApp"]}),e.jsxs("button",{className:"p-3 bg-blue-50 text-blue-700 rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-blue-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email HR"]}),e.jsxs("button",{className:"p-3 bg-amber-50 text-amber-700 rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-amber-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Payslip"]}),e.jsxs("button",{className:"p-3 bg-teal-50 text-teal-700 rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-teal-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Documents"]}),e.jsxs("button",{className:"p-3 bg-primary-50 text-accent-green rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-primary-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Leave"]}),e.jsxs("button",{className:"p-3 bg-primary-50 text-primary-700 rounded-lg text-xs font-medium flex flex-col items-center gap-1 hover:bg-primary-100",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Bank Details"]})]})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Profile Snapshot"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Join Date"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[DD/MM/YYYY]"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Visa Expiry"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[DD/MM/YYYY]"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Insurance Plan"}),e.jsx("p",{className:"font-medium text-primary-800",children:"[Plan Name]"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-600",children:"Work Schedule"}),e.jsx("p",{className:"font-medium text-primary-800",children:"5 days/week"})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-600 uppercase mb-3",children:"Current Requests"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-primary-700",children:"Leave Request"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"text-sm text-primary-700",children:"Document Request"})]}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Completed"})]})]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Employee Pass Template"}),e.jsx("p",{className:"text-sm text-amber-700",children:"This template serves as a living digital identity for employees, providing quick access to HR actions, profile information, and tracking of current requests."})]})]})]})]})}if(s==="candidate-pass"&&At)return e.jsx(Gs,{candidateId:At,token:n?.token||"",onBack:()=>{Wt(null),a("admin")}});if(s==="manager-pass"&&zt)return e.jsx(rr,{recruitmentRequestId:zt,managerId:xs||n?.employee_id||"",token:n?.token||"",onBack:()=>{$t(null),a("admin")}});if(s==="nomination-pass")return e.jsx(ar,{});if(s==="insurance-census"&&n)return e.jsx(Qs,{token:n.token,onBack:()=>ae("admin")});if(s==="performance"&&n)return e.jsxs("div",{children:[de,e.jsx("div",{className:"fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 bg-white/80 backdrop-blur-md text-slate-600 hover:bg-white rounded-xl transition-colors shadow-sm border border-white/60",children:"â† Back to Home"})}),e.jsx(Ks,{user:n,fetchWithAuth:Y})]});if(s==="recruitment"||s==="recruitment-request"||s==="recruitment-benefits"){const t=s==="recruitment-benefits"?"benefits":"request";return e.jsxs("div",{className:"min-h-screen bg-primary-100 p-8",children:[de,e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Recruitment"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>a("recruitment-request"),className:`px-6 py-3 rounded-lg font-medium transition-all ${t==="request"?"bg-primary-800 text-white shadow-card":"bg-white text-primary-600 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Request"]})}),e.jsx("button",{onClick:()=>a("recruitment-benefits"),className:`px-6 py-3 rounded-lg font-medium transition-all ${t==="benefits"?"bg-primary-800 text-white shadow-card":"bg-white text-primary-600 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Benefits"]})})]}),t==="request"&&e.jsx("div",{className:"bg-white rounded-card shadow-card p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-teal-200 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Recruitment Requests"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Manage job requisitions and hiring requests"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Coming soon - this section will allow you to submit and track recruitment requests"})]})}),t==="benefits"&&e.jsx("div",{className:"bg-white rounded-card shadow-card p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-teal-200 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Benefits Information"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"View and manage employee benefits packages"}),e.jsx("p",{className:"text-sm text-primary-300",children:"Coming soon - this section will display benefits details for candidates and employees"})]})})]})]})}if(s==="onboarding")return!n||n.role!=="admin"&&n.role!=="hr"?e.jsxs("div",{className:"min-h-screen bg-primary-100 flex flex-col items-center justify-center p-8",children:[de,e.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-4",children:"Access Required"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Please sign in with HR or Admin access."}),e.jsx("button",{onClick:()=>ae("home"),className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors",children:"Back to Home"})]})]}):e.jsxs("div",{className:"min-h-screen bg-primary-100 p-8",children:[de,e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Onboarding Management"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsx("button",{onClick:()=>ae("home"),className:"px-4 py-2 text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("button",{onClick:()=>{Se(!0),ue(""),F(""),B(null)},className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Invite New Joiner"]})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Generate Onboarding Link"}),e.jsx("button",{onClick:()=>Se(!1),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:b}),U?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-accent-green mb-2",children:"Share this link with the new joiner:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:U,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm"}),e.jsx("button",{onClick:()=>Ms(U),className:"px-3 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green",children:"Copy"})]})]}),e.jsx("p",{className:"text-sm text-primary-600",children:"This link expires in 7 days."}),e.jsx("button",{onClick:()=>Se(!1),className:"w-full py-2 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors",children:"Done"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Employee ID"}),e.jsx("input",{type:"text",value:u,onChange:t=>F(t.target.value),placeholder:"e.g., BAYN00010",className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsx("button",{onClick:Cs,disabled:ce||!u.trim(),className:"w-full py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors disabled:opacity-50",children:ce?"Generating...":"Generate Link"})]})]})}),xe.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),"Pending Profile Reviews (",xe.length,")"]}),e.jsx("div",{className:"space-y-3",children:xe.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:t.name}),e.jsxs("p",{className:"text-sm text-primary-600",children:[t.employee_id," â€¢ ",t.department||"No department"," â€¢ ",t.job_title||"No title"]}),t.submitted_at&&e.jsxs("p",{className:"text-xs text-primary-300 mt-1",children:["Submitted: ",new Date(t.submitted_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>Ls(t.employee_id),className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors text-sm",children:"Approve"})]},t.employee_id))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary-200",children:e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Onboarding Invites"})}),ce&&Ne.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading..."}):Ne.length===0?e.jsx(yt,{message:"No onboarding invites yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Views"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Ne.map(t=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:t.employee_name}),e.jsx("p",{className:"text-xs text-primary-600",children:t.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:new Date(t.expires_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.is_used?"bg-accent-green/10 text-accent-green":t.is_expired?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.is_used?"Completed":t.is_expired?"Expired":"Pending"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.access_count})]},t.token))})]})]})]})]});if(s==="compliance-alerts"){const t=L=>new Date(L).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),c=L=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:L.employee_name}),e.jsx("p",{className:"text-xs text-primary-600",children:L.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-700",children:L.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-700",children:t(L.expiry_date)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${L.days_until_expiry<0?"bg-red-100 text-red-700":L.days_until_expiry<=30?"bg-orange-100 text-orange-700":L.days_until_expiry<=60?"bg-yellow-100 text-yellow-700":"bg-amber-100 text-amber-700"}`,children:L.days_until_expiry<0?`Expired ${Math.abs(L.days_until_expiry)} days ago`:`${L.days_until_expiry} days`})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>je(L.employee_id),className:"text-accent-green hover:text-accent-green text-sm font-medium",children:"View Profile"})})]},`${L.employee_id}-${L.document_type}`);return e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>ae("home"),className:"text-primary-600 hover:text-primary-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Compliance Alerts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:ht,className:"px-4 py-2 bg-white text-primary-700 border border-primary-200 rounded-lg text-sm font-medium hover:bg-primary-50 transition-colors",children:"Refresh"}),e.jsxs("button",{onClick:()=>{const L=[...D?.expired||[],...D?.days_7||[],...D?.days_30||[],...D?.days_custom||[]];Qt(L)},className:"px-4 py-2 bg-accent-green text-white rounded-lg text-sm font-medium hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]})]}),e.jsxs("div",{className:"text-sm text-primary-600",children:[n?.name," (",n?.role,")"]})]}),_t&&!D?e.jsx("div",{className:"text-center py-12 text-primary-600",children:"Loading compliance data..."}):!n||n.role!=="admin"&&n.role!=="hr"?e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"ðŸ”’"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Please sign in with HR or Admin access to view compliance alerts."}),e.jsx("button",{onClick:()=>ae("admin"),className:"px-6 py-3 bg-accent-green text-white rounded-lg font-medium hover:bg-accent-green/90 transition-colors",children:"Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center text-red-600 text-lg",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:D?.expired.length||0}),e.jsx("p",{className:"text-xs text-red-600",children:"Expired"})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 text-lg",children:"ðŸ”¶"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:D?.days_7?.length||0}),e.jsx("p",{className:"text-xs text-orange-600",children:"Within 7 days"})]})]})}),e.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-600 text-lg",children:"ðŸŸ¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:D?.days_30?.length||0}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Within 30 days"})]})]})}),e.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-amber-600 text-lg",children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-700",children:D?.days_custom?.length||0}),e.jsx("p",{className:"text-xs text-amber-600",children:"Within 60 days"})]})]})})]}),D?.expired&&D.expired.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-red-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-700 flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"})," Expired Documents (",D.expired.length,")"]}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"These documents have expired and require immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.expired.map(c)})]})]}),D?.days_7&&D.days_7.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-orange-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-orange-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”¶"})," Expiring Within 7 Days (",D.days_7.length,")"]}),e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Urgent - documents that need immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_7.map(c)})]})]}),D?.days_30&&D.days_30.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-yellow-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-yellow-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"})," Expiring Within 30 Days (",D.days_30.length,")"]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Documents that need to be renewed soon"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_30.map(c)})]})]}),D?.days_custom&&D.days_custom.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-primary-100 bg-amber-50 rounded-t-xl",children:e.jsxs("h2",{className:"text-lg font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Expiring Within 60 Days (",D.days_custom.length,")"]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:D.days_custom.map(c)})]})]}),D&&D.expired.length+(D.days_7?.length||0)+(D.days_30?.length||0)+(D.days_custom?.length||0)===0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"âœ…"}),e.jsx("p",{className:"text-xl font-semibold text-accent-green mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-primary-600",children:"No documents are expired or expiring within the next 90 days."})]})]}),ze&&e.jsx(Oe,{employeeId:ze,token:n?.token||"",currentUserRole:n?.role||"",currentUserId:n?.employee_id||"",onClose:()=>je(null)})]})})}if(s==="attendance")return e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>ae("home"),className:"text-primary-600 hover:text-primary-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Attendance"})]}),e.jsxs("div",{className:"text-sm text-primary-600",children:[n?.name," (",n?.role,")"]})]}),b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:b}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Today's Status"}),e.jsx("span",{className:"text-sm text-primary-600",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),_e&&!ie?e.jsx("div",{className:"text-center py-8 text-primary-600",children:"Loading..."}):ie?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${ie.is_clocked_in?"bg-accent-green":"bg-primary-300"}`}),e.jsx("span",{className:"text-primary-700",children:ie.message})]}),Ve&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-600",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:"GPS location captured"})]}),ie.can_clock_in&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>Ge("office"),className:`p-3 rounded-lg border text-center transition-all ${Ae==="office"?"border-emerald-500 bg-primary-50 text-accent-green":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{className:"text-sm",children:"Office"})]}),e.jsxs("button",{onClick:()=>Ge("wfh"),className:`p-3 rounded-lg border text-center transition-all ${Ae==="wfh"?"border-blue-500 bg-blue-50 text-blue-700":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"text-sm",children:"WFH"})]}),e.jsxs("button",{onClick:()=>Ge("field"),className:`p-3 rounded-lg border text-center transition-all ${Ae==="field"?"border-amber-500 bg-amber-50 text-amber-700":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),e.jsx("span",{className:"text-sm",children:"Field"})]})]}),Ae==="wfh"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"WFH Reason"}),e.jsx("textarea",{value:ct,onChange:t=>wt(t.target.value),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"Please provide a reason for working from home...",rows:2})]}),e.jsx("button",{onClick:Bs,disabled:_e,className:"w-full py-3 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors font-medium disabled:opacity-50",children:_e?"Processing...":"Clock In"})]}),(ie.can_clock_out||ie.can_start_break||ie.can_end_break)&&e.jsxs("div",{className:"flex gap-3 border-t pt-4 mt-4",children:[ie.can_start_break&&e.jsx("button",{onClick:Ps,disabled:_e,className:"flex-1 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-medium disabled:opacity-50",children:"Start Break"}),ie.can_end_break&&e.jsx("button",{onClick:As,disabled:_e,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50",children:"End Break"}),ie.can_clock_out&&e.jsx("button",{onClick:Ds,disabled:_e,className:"flex-1 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50",children:"Clock Out"})]})]}):e.jsx("div",{className:"text-center py-8 text-primary-600",children:"Unable to load attendance status"})]}),(n?.role==="admin"||n?.role==="hr")&&pe&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Today's Overview"}),e.jsxs("button",{onClick:()=>Kt(Pe),className:"px-4 py-2 bg-accent-green text-white rounded-lg text-sm font-medium hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-green",children:pe.clocked_in_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Clocked In"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:pe.wfh_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"WFH"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:pe.late_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Late"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:pe.absent_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Absent"})]})]}),(pe.pending_wfh_approvals>0||pe.pending_overtime_approvals>0)&&e.jsxs("div",{className:"mt-4 flex gap-4",children:[pe.pending_wfh_approvals>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[pe.pending_wfh_approvals," WFH pending"]}),pe.pending_overtime_approvals>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm",children:[pe.pending_overtime_approvals," OT pending"]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary-200",children:e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Recent Attendance"})}),_e&&Pe.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading..."}):Pe.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"No attendance records yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Clock In"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Clock Out"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Pe.slice(0,10).map(t=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-primary-900",children:new Date(t.attendance_date).toLocaleDateString("en-GB")}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.clock_in?new Date(t.clock_in).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:t.clock_out?new Date(t.clock_out).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.work_type==="office"?"bg-accent-green/10 text-accent-green":t.work_type==="wfh"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:t.work_type.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-primary-600",children:[t.total_hours?`${t.total_hours}h`:"-",t.overtime_hours&&t.overtime_hours>0&&e.jsxs("span",{className:"ml-1 text-teal-600",children:["(+",t.overtime_hours,"h OT)"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.status==="present"?"bg-accent-green/10 text-accent-green":t.status==="late"?"bg-amber-100 text-amber-700":t.status==="absent"?"bg-red-100 text-red-700":"bg-primary-100 text-primary-700"}`,children:[t.status,t.is_late&&t.late_minutes&&` (${t.late_minutes}m)`]})})]},t.id))})]})]})]})});if(s==="external")return e.jsxs("div",{className:"min-h-screen bg-primary-100 flex flex-col items-center justify-center p-8",children:[de,e.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 max-w-2xl w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-primary-800 mb-4",children:"External Users"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"This section is under development."}),e.jsx("button",{onClick:()=>ae("home"),className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors",children:"Back to Home"})]})]});const Ws=[{id:"manager",name:"Manager",description:"Recruitment & team management",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),route:"recruitment"},{id:"candidate",name:"Candidate",description:"Application tracking & interviews",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),route:"candidate-pass"},{id:"onboarding",name:"Onboarding",description:"New joiner setup & documents",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),route:"onboarding"},{id:"employee",name:"Employee",description:"Self-service & profile management",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),route:"employees"},{id:"agency",name:"Agency",description:"External partner access",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),route:"external"}];return e.jsxs("div",{className:"min-h-screen flex flex-col bg-primary-50",children:[de,e.jsx("header",{className:"bg-white border-b border-primary-200 px-6 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-green flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:"B"})}),e.jsx("span",{className:"text-xl font-medium text-primary-800",children:"Baynunah HR"})]}),n&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[n.name," (",n.role,")"]}),e.jsx("button",{onClick:gs,className:"text-sm text-accent-red hover:text-accent-red/80 font-medium",children:"Sign Out"})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl font-semibold text-primary-800 mb-2",children:"Welcome to HR Portal"}),e.jsx("p",{className:"text-primary-600",children:"Select a portal to get started"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-5 max-w-6xl",children:Ws.map(t=>e.jsxs("button",{onClick:()=>ae(t.route),className:"bg-white rounded-2xl p-6 w-48 flex flex-col items-center text-center shadow-sm hover:shadow-md transition-all duration-300 border border-primary-200 hover:border-primary-300",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",children:t.icon}),e.jsx("h3",{className:"font-semibold text-primary-800 mb-1",children:t.name}),e.jsx("p",{className:"text-xs text-primary-500 leading-relaxed",children:t.description})]},t.id))})]}),e.jsx("footer",{className:"bg-white border-t border-primary-200 px-6 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-primary-600",children:"Admin Panel"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>ae("admin"),className:"bg-primary-100 hover:bg-primary-200 text-primary-700 rounded-lg px-4 py-2 flex items-center gap-2 transition-colors text-sm font-medium",children:[e.jsxs("svg",{className:"w-4 h-4 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),e.jsxs("button",{onClick:()=>ae("compliance-alerts"),className:"bg-accent-red/10 hover:bg-accent-red/20 text-accent-red rounded-lg px-4 py-2 flex items-center gap-2 transition-colors text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4 text-accent-red",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Alerts"]}),e.jsxs("button",{onClick:()=>ae("insurance-census"),className:"bg-primary-100 hover:bg-primary-200 text-primary-700 rounded-lg px-4 py-2 flex items-center gap-2 transition-colors text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Census"]})]})]})})]})}function yr({onClose:s,onLogin:a,error:l,loading:g,isAdminLogin:i}){const[m,n]=r.useState(""),[S,v]=r.useState(""),[E,C]=r.useState(!1),d=async N=>{N.preventDefault(),await a(m,S,i)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 w-full max-w-md relative",children:[e.jsx("button",{onClick:s,type:"button",className:"absolute top-4 right-4 text-primary-300 hover:text-primary-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-accent-green/90 flex items-center justify-center mx-auto mb-2 shadow-soft-green",children:e.jsx("span",{className:"text-white font-semibold text-2xl",children:"B"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:i?"Admin Sign In":"Sign In"})]}),l&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:l}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[!i&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee-id",className:"block text-sm font-medium text-primary-700 mb-1",children:"Employee ID"}),e.jsx("input",{id:"employee-id",type:"text",value:m,onChange:N=>n(N.target.value),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., BAYN00008",required:!0,autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-primary-700 mb-1",children:i?"Admin Password":"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:E?"text":"password",value:S,onChange:N=>v(N.target.value),className:"w-full px-4 py-2 pr-12 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:i?"Enter admin password":"First login: DOB as DDMMYYYY",required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>C(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-primary-600 hover:text-primary-700",children:E?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"btn-submit w-full",children:g?"Signing in...":"Sign In"})]}),e.jsx("p",{className:"text-xs text-primary-600 text-center mt-4",children:i?"Enter the admin password to access the admin panel.":"First-time login? Use your date of birth (DDMMYYYY) as password."})]})})}function fr(){const s=qe(),{user:a,login:l,logout:g}=Ie(),[i,m]=r.useState(!1),[n,S]=r.useState(null),[v,E]=r.useState(null),[C,d]=r.useState(!1),[N,j]=r.useState(!1),z="/api",k=[{id:"manager",name:"Manager",description:"Recruitment & team management",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),route:"/recruitment"},{id:"candidate",name:"Candidate",description:"Application tracking & interviews",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),route:"/passes/candidate"},{id:"onboarding",name:"Onboarding",description:"New joiner setup & documents",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),route:"/onboarding"},{id:"employee",name:"Employee",description:"Self-service & profile management",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),route:"/employees"},{id:"agency",name:"Agency",description:"External partner access",icon:e.jsx("svg",{className:"w-8 h-8 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),route:"/external"}],f=(h,P=!1)=>{if(!a){S(h),j(P),m(!0);return}if(P&&a.role!=="admin"){S(h),j(!0),m(!0);return}s(h)},x=async(h,P,V)=>{d(!0),E(null);const w=V?"BAYN00008":h;try{const $=await fetch(`${z}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee_id:w,password:P})});if(!$.ok){const O=await $.json();throw new Error(O.detail||"Login failed")}const y=await $.json(),T={id:y.id,employee_id:y.employee_id,name:y.name,role:y.role,token:y.access_token};l(T),m(!1),n&&(s(n),S(null))}catch($){E($ instanceof Error?$.message:"Login failed")}finally{d(!1)}},b=()=>{m(!1),S(null),E(null)},B=()=>{g(),s("/")};return e.jsxs("div",{className:"min-h-screen flex flex-col home-shell",children:[i&&e.jsx(yr,{onClose:b,onLogin:x,error:v,loading:C,isAdminLogin:N}),e.jsx("header",{className:"home-header",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"brand-mark-soft",children:"B"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-primary-900",children:"Baynunah HR"}),e.jsx("p",{className:"text-xs text-primary-500",children:"Calm, single-screen ESS"})]})]}),a&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[a.name," (",a.role,")"]}),e.jsx("button",{onClick:B,className:"ghost-link",children:"Sign Out"})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12 gap-10",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-semibold text-primary-900",children:"Welcome to HR Portal"}),e.jsx("p",{className:"text-primary-600",children:"Select a portal to get started"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-5 max-w-6xl",children:k.map(h=>e.jsxs("button",{onClick:()=>f(h.route,h.id==="manager"),className:"home-card",children:[e.jsx("div",{className:"home-card__icon",children:h.icon}),e.jsx("h3",{className:"font-semibold text-primary-800 mb-1",children:h.name}),e.jsx("p",{className:"text-xs text-primary-500 leading-relaxed",children:h.description})]},h.id))})]}),e.jsx("footer",{className:"home-footer",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-primary-600",children:"Admin Panel"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>f("/admin",!0),className:"footer-chip",children:[e.jsxs("svg",{className:"w-4 h-4 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),e.jsxs("button",{onClick:()=>f("/compliance"),className:"footer-chip danger",children:[e.jsx("svg",{className:"w-4 h-4 text-accent-red",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Alerts"]}),e.jsxs("button",{onClick:()=>f("/attendance"),className:"footer-chip",children:[e.jsx("svg",{className:"w-4 h-4 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Attendance"]})]})]})})]})}const J="/api";async function te(s,a={}){const{token:l,role:g,...i}=a,n={...i.body instanceof FormData?{}:{"Content-Type":"application/json"},...i.headers||{}};return l&&(n.Authorization=`Bearer ${l}`),g&&(n["X-Role"]=g),fetch(s,{...i,headers:n})}function vr(){const s=qe(),{user:a}=Ie(),[l,g]=r.useState(null),[i,m]=r.useState(!1),[n,S]=r.useState(null),v=async()=>{if(!(!a||a.role!=="admin"&&a.role!=="hr")){m(!0);try{const d=await te(`${J}/employees/compliance/alerts`,{token:a.token,role:a.role});if(d.ok){const N=await d.json();g(N)}}catch(d){console.error("Failed to fetch compliance alerts:",d)}finally{m(!1)}}};r.useEffect(()=>{v()},[]);const E=d=>new Date(d).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),C=d=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:d.employee_name}),e.jsx("p",{className:"text-xs text-primary-600",children:d.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-700",children:d.document_type}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-700",children:E(d.expiry_date)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${d.days_until_expiry<0?"bg-red-100 text-red-700":d.days_until_expiry<=30?"bg-orange-100 text-orange-700":d.days_until_expiry<=60?"bg-yellow-100 text-yellow-700":"bg-amber-100 text-amber-700"}`,children:d.days_until_expiry<0?`Expired ${Math.abs(d.days_until_expiry)} days ago`:`${d.days_until_expiry} days`})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>S(d.employee_id),className:"text-accent-green hover:text-accent-green text-sm font-medium",children:"View Profile"})})]},`${d.employee_id}-${d.document_type}`);return!a||a.role!=="admin"&&a.role!=="hr"?e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"ðŸ”’"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"This feature requires authentication. Please access it from the main portal."}),e.jsx("a",{href:"/",className:"inline-block px-6 py-3 bg-accent-green text-white rounded-lg font-medium hover:bg-accent-green/90 transition-colors",children:"Go to Home"})]})})}):e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/"),className:"text-primary-600 hover:text-primary-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Compliance Alerts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-white text-primary-700 border border-primary-200 rounded-lg text-sm font-medium hover:bg-primary-50 transition-colors",children:"Refresh"}),e.jsxs("button",{onClick:()=>{const d=[...l?.expired||[],...l?.days_7||[],...l?.days_30||[],...l?.days_custom||[]];Qt(d)},className:"px-4 py-2 bg-accent-green text-white rounded-lg text-sm font-medium hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]})]}),e.jsxs("div",{className:"text-sm text-primary-600",children:[a?.name," (",a?.role,")"]})]}),i&&!l?e.jsx("div",{className:"text-center py-12 text-primary-600",children:"Loading compliance data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center text-red-600 text-lg",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:l?.expired.length||0}),e.jsx("p",{className:"text-xs text-red-600",children:"Expired"})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-xl p-4 border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 text-lg",children:"ðŸ”¶"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:l?.days_7?.length||0}),e.jsx("p",{className:"text-xs text-orange-600",children:"Within 7 days"})]})]})}),e.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-600 text-lg",children:"ðŸŸ¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:l?.days_30?.length||0}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Within 30 days"})]})]})}),e.jsx("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-amber-600 text-lg",children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-700",children:l?.days_custom?.length||0}),e.jsx("p",{className:"text-xs text-amber-600",children:"Within 60 days"})]})]})})]}),l?.expired&&l.expired.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-red-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-red-700 flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"})," Expired Documents (",l.expired.length,")"]}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"These documents have expired and require immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.expired.map(C)})]})]}),l?.days_7&&l.days_7.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-orange-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-orange-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”¶"})," Expiring Within 7 Days (",l.days_7.length,")"]}),e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Urgent - documents that need immediate attention"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.days_7.map(C)})]})]}),l?.days_30&&l.days_30.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-yellow-50 rounded-t-xl",children:[e.jsxs("h2",{className:"text-lg font-semibold text-yellow-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"})," Expiring Within 30 Days (",l.days_30.length,")"]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Documents that need to be renewed soon"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.days_30.map(C)})]})]}),l?.days_custom&&l.days_custom.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-primary-100 bg-amber-50 rounded-t-xl",children:e.jsxs("h2",{className:"text-lg font-semibold text-amber-700 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Expiring Within 60 Days (",l.days_custom.length,")"]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Days Left"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.days_custom.map(C)})]})]}),l&&l.expired.length+(l.days_7?.length||0)+(l.days_30?.length||0)+(l.days_custom?.length||0)===0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("p",{className:"text-4xl mb-4",children:"âœ…"}),e.jsx("p",{className:"text-xl font-semibold text-accent-green mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-primary-600",children:"No documents are expired or expiring within the next 90 days."})]})]}),n&&e.jsx(Oe,{employeeId:n,token:a.token,currentUserRole:a.role,currentUserId:a.employee_id,onClose:()=>S(null)})]})})}function Nr(s){const[a,l]=r.useState(null),[g,i]=r.useState([]),[m,n]=r.useState(null),[S,v]=r.useState(!1),[E,C]=r.useState(null),[d,N]=r.useState("office"),[j,z]=r.useState(""),[k,f]=r.useState(null),x=r.useCallback(async()=>{if(s){v(!0);try{const[w,$]=await Promise.all([te(`${J}/attendance/today`,{token:s.token,role:s.role}),te(`${J}/attendance/my-records`,{token:s.token,role:s.role})]);if(w.ok&&l(await w.json()),$.ok&&i(await $.json()),s.role==="admin"||s.role==="hr"){const y=await te(`${J}/attendance/dashboard`,{token:s.token,role:s.role});y.ok&&n(await y.json())}}catch(w){console.error("Failed to fetch attendance data:",w)}finally{v(!1)}}},[s]),b=r.useCallback(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(w=>{f({latitude:w.coords.latitude,longitude:w.coords.longitude})},w=>{console.warn("GPS location not available:",w.message),f(null)},{enableHighAccuracy:!0,timeout:1e4})},[]),B=r.useCallback(async()=>{if(s){v(!0),C(null);try{const w={work_type:d,latitude:k?.latitude,longitude:k?.longitude};d==="wfh"&&j&&(w.wfh_reason=j);const $=await te(`${J}/attendance/clock-in`,{method:"POST",body:JSON.stringify(w),token:s.token,role:s.role});if(!$.ok){const y=await $.json();throw new Error(y.detail||"Failed to clock in")}await x(),N("office"),z("")}catch(w){C(w instanceof Error?w.message:"Failed to clock in")}finally{v(!1)}}},[s,d,k,j,x]),h=r.useCallback(async()=>{if(s){v(!0),C(null);try{const w=await te(`${J}/attendance/clock-out`,{method:"POST",body:JSON.stringify({latitude:k?.latitude,longitude:k?.longitude}),token:s.token,role:s.role});if(!w.ok){const $=await w.json();throw new Error($.detail||"Failed to clock out")}await x()}catch(w){C(w instanceof Error?w.message:"Failed to clock out")}finally{v(!1)}}},[s,k,x]),P=r.useCallback(async()=>{if(s){v(!0);try{await te(`${J}/attendance/break/start`,{method:"POST",body:JSON.stringify({}),token:s.token,role:s.role}),await x()}catch(w){console.error("Failed to start break:",w)}finally{v(!1)}}},[s,x]),V=r.useCallback(async()=>{if(s){v(!0);try{await te(`${J}/attendance/break/end`,{method:"POST",body:JSON.stringify({}),token:s.token,role:s.role}),await x()}catch(w){console.error("Failed to end break:",w)}finally{v(!1)}}},[s,x]),_=r.useCallback(()=>{C(null)},[]);return{attendanceStatus:a,attendanceRecords:g,attendanceDashboard:m,loading:S,error:E,clockInWorkType:d,wfhReason:j,gpsCoords:k,fetchAttendanceData:x,handleClockIn:B,handleClockOut:h,handleBreakStart:P,handleBreakEnd:V,requestGPSLocation:b,setClockInWorkType:N,setWfhReason:z,clearError:_}}function wr(){const s=qe(),{user:a}=Ie(),{attendanceStatus:l,attendanceRecords:g,attendanceDashboard:i,loading:m,error:n,clockInWorkType:S,wfhReason:v,gpsCoords:E,fetchAttendanceData:C,handleClockIn:d,handleClockOut:N,handleBreakStart:j,handleBreakEnd:z,requestGPSLocation:k,setClockInWorkType:f,setWfhReason:x}=Nr(a);return r.useEffect(()=>{a||s("/")},[a,s]),r.useEffect(()=>{a&&(C(),k())},[a,C,k]),a?e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/"),className:"text-primary-600 hover:text-primary-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Attendance"})]}),e.jsxs("div",{className:"text-sm text-primary-600",children:[a.name," (",a.role,")"]})]}),n&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:n}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Today's Status"}),e.jsx("span",{className:"text-sm text-primary-600",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m&&!l?e.jsx("div",{className:"text-center py-8 text-primary-600",children:"Loading..."}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${l.is_clocked_in?"bg-accent-green":"bg-primary-300"}`}),e.jsx("span",{className:"text-primary-700",children:l.message})]}),E&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-600",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:"GPS location captured"})]}),l.can_clock_in&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>f("office"),className:`p-3 rounded-lg border text-center transition-all ${S==="office"?"border-emerald-500 bg-primary-50 text-accent-green":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{className:"text-sm",children:"Office"})]}),e.jsxs("button",{onClick:()=>f("wfh"),className:`p-3 rounded-lg border text-center transition-all ${S==="wfh"?"border-blue-500 bg-blue-50 text-blue-700":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"text-sm",children:"WFH"})]}),e.jsxs("button",{onClick:()=>f("field"),className:`p-3 rounded-lg border text-center transition-all ${S==="field"?"border-amber-500 bg-amber-50 text-amber-700":"border-primary-200 hover:border-primary-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),e.jsx("span",{className:"text-sm",children:"Field"})]})]}),S==="wfh"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"WFH Reason"}),e.jsx("textarea",{value:v,onChange:b=>x(b.target.value),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"Please provide a reason for working from home...",rows:2})]}),e.jsx("button",{onClick:d,disabled:m,className:"w-full py-3 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors font-medium disabled:opacity-50",children:m?"Processing...":"Clock In"})]}),(l.can_clock_out||l.can_start_break||l.can_end_break)&&e.jsxs("div",{className:"flex gap-3 border-t pt-4 mt-4",children:[l.can_start_break&&e.jsx("button",{onClick:j,disabled:m,className:"flex-1 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-medium disabled:opacity-50",children:"Start Break"}),l.can_end_break&&e.jsx("button",{onClick:z,disabled:m,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50",children:"End Break"}),l.can_clock_out&&e.jsx("button",{onClick:N,disabled:m,className:"flex-1 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50",children:"Clock Out"})]})]}):e.jsx("div",{className:"text-center py-8 text-primary-600",children:"Unable to load attendance status"})]}),(a.role==="admin"||a.role==="hr")&&i&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Today's Overview"}),e.jsxs("button",{onClick:()=>Kt(g),className:"px-4 py-2 bg-accent-green text-white rounded-lg text-sm font-medium hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-green",children:i.clocked_in_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Clocked In"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.wfh_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"WFH"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.late_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Late"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.absent_today}),e.jsx("div",{className:"text-sm text-primary-600",children:"Absent"})]})]}),(i.pending_wfh_approvals>0||i.pending_overtime_approvals>0)&&e.jsxs("div",{className:"mt-4 flex gap-4",children:[i.pending_wfh_approvals>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[i.pending_wfh_approvals," WFH pending"]}),i.pending_overtime_approvals>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm",children:[i.pending_overtime_approvals," OT pending"]})]})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary-200",children:e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Recent Attendance"})}),m&&g.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading..."}):g.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"No attendance records yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Clock In"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Clock Out"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.slice(0,10).map(b=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-primary-900",children:new Date(b.attendance_date).toLocaleDateString("en-GB")}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:b.clock_in?new Date(b.clock_in).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:b.clock_out?new Date(b.clock_out).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${b.work_type==="office"?"bg-accent-green/10 text-accent-green":b.work_type==="wfh"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:b.work_type.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-primary-600",children:[b.total_hours?`${b.total_hours}h`:"-",b.overtime_hours&&b.overtime_hours>0&&e.jsxs("span",{className:"ml-1 text-teal-600",children:["(+",b.overtime_hours,"h OT)"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${b.status==="present"?"bg-accent-green/10 text-accent-green":b.status==="late"?"bg-amber-100 text-amber-700":b.status==="absent"?"bg-red-100 text-red-700":"bg-primary-100 text-primary-700"}`,children:[b.status,b.is_late&&b.late_minutes&&` (${b.late_minutes}m)`]})})]},b.id))})]})]})]})}):null}function kr(s){const[a,l]=r.useState(null),[g,i]=r.useState([]),[m,n]=r.useState(null),[S,v]=r.useState([]),[E,C]=r.useState(null),[d,N]=r.useState(""),[j,z]=r.useState(""),[k,f]=r.useState(""),[x,b]=r.useState(!1),[B,h]=r.useState(!1),P=r.useCallback(async()=>{if(!(!s||s.role!=="admin"&&s.role!=="hr")){h(!0);try{const[_,w,$]=await Promise.all([te(`${J}/recruitment/stats`,{token:s.token,role:s.role}),te(`${J}/recruitment/requests`,{token:s.token,role:s.role}),te(`${J}/recruitment/pipeline`,{token:s.token,role:s.role})]);_.ok&&l(await _.json()),w.ok&&i(await w.json()),$.ok&&n(await $.json())}catch(_){console.error("Failed to fetch recruitment data:",_)}finally{h(!1)}}},[s]),V=r.useCallback(async(_="")=>{if(!(!s||s.role!=="admin"&&s.role!=="hr"))try{const w=_?`${J}/recruitment/candidates?search=${encodeURIComponent(_)}`:`${J}/recruitment/candidates`,$=await te(w,{token:s.token,role:s.role});$.ok&&v(await $.json())}catch(w){console.error("Failed to fetch recruitment candidates:",w)}},[s]);return{recruitmentStats:a,recruitmentRequests:g,pipelineCounts:m,candidatesList:S,selectedCandidate:E,candidateSearchQuery:d,candidateStatusFilter:j,candidateSourceFilter:k,showCandidateProfileModal:x,loading:B,fetchRecruitmentData:P,fetchRecruitmentCandidates:V,setSelectedCandidate:C,setCandidateSearchQuery:N,setCandidateStatusFilter:z,setCandidateSourceFilter:f,setShowCandidateProfileModal:b}}function _r(){const{user:s}=Ie(),{recruitmentStats:a,recruitmentRequests:l,pipelineCounts:g,candidatesList:i,candidateSearchQuery:m,candidateStatusFilter:n,candidateSourceFilter:S,loading:v,fetchRecruitmentData:E,fetchRecruitmentCandidates:C,setCandidateSearchQuery:d,setCandidateStatusFilter:N,setCandidateSourceFilter:j}=kr(s),[z,k]=r.useState(!1),[f,x]=r.useState({position_title:"",department:"Engineering / R&D",employment_type:"Full-time",salary_range_min:"",salary_range_max:"",headcount:"1",job_description:"",requirements:""});r.useEffect(()=>{s&&(s.role==="admin"||s.role==="hr")&&(E(),C())},[s,E,C]);const b=async()=>{if(s)try{const h={position_title:f.position_title,department:f.department,employment_type:f.employment_type,salary_range_min:f.salary_range_min?parseFloat(f.salary_range_min):null,salary_range_max:f.salary_range_max?parseFloat(f.salary_range_max):null,headcount:parseInt(f.headcount)||1,job_description:f.job_description||null,requirements:f.requirements||null};(await te(`${J}/recruitment/requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h),token:s.token,role:s.role})).ok&&(k(!1),x({position_title:"",department:"Engineering / R&D",employment_type:"Full-time",salary_range_min:"",salary_range_max:"",headcount:"1",job_description:"",requirements:""}),await E())}catch(h){console.error("Failed to create recruitment request:",h)}},B=(h,P)=>{alert(`Manager Pass for Position ${h}, Manager ${P}`)};return!s||s.role!=="admin"&&s.role!=="hr"?e.jsx("div",{className:"min-h-screen bg-primary-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-800 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-primary-600",children:"This module is only available to HR and Admin users."})]})}):e.jsx("div",{className:"min-h-screen bg-primary-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-800",children:"Recruitment Management"}),e.jsx("p",{className:"text-primary-600 mt-1",children:"Manage positions, candidates, and hiring pipeline"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Active Positions"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:a?.active_positions??l.length})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Total Candidates"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:a?.total_candidates??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"In Interview"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:a?.in_interview??g?.interview??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow p-6 border border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-600",children:"Hired (30 days)"}),e.jsx("p",{className:"text-3xl font-semibold text-primary-800",children:a?.hired_30_days??g?.hired??0})]}),e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),l.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Open Positions (",l.length,")"]}),e.jsxs("button",{onClick:()=>es(l),className:"px-3 py-1.5 bg-accent-green text-white text-sm rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]}),e.jsx("div",{className:"grid gap-4",children:l.map(h=>e.jsx("div",{className:"border border-primary-200 rounded-lg p-4 hover:border-accent-green transition-colors bg-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-800",children:h.position_title}),e.jsxs("p",{className:"text-sm text-primary-600",children:[h.department," â€¢ ",h.employment_type]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${h.status==="open"?"border-accent-green text-accent-green bg-accent-green/5":h.status==="pending_approval"?"border-amber-400 text-amber-600 bg-amber-50":"border-primary-300 text-primary-600 bg-primary-50"}`,children:h.status?.replace("_"," ")}),e.jsx("span",{className:"text-xs text-primary-500",children:h.request_number})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-primary-700",children:["Headcount: ",h.headcount||1]}),h.salary_range_min&&h.salary_range_max&&e.jsxs("p",{className:"text-xs text-primary-500",children:["AED ",h.salary_range_min.toLocaleString()," - ",h.salary_range_max.toLocaleString()]})]}),e.jsxs("button",{onClick:()=>B(h.id,h.hiring_manager_id||s.employee_id),className:"px-3 py-1.5 bg-accent-green text-white text-xs font-medium rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-1",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),"Manager Pass"]})]})]})},h.id))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Candidate Pipeline"]}),e.jsxs("button",{onClick:()=>Zt(i),className:"px-3 py-1.5 bg-accent-green text-white text-sm rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-4",children:[{key:"applied",label:"Applied"},{key:"screening",label:"Screening"},{key:"interview",label:"Interview"},{key:"offer",label:"Offer"},{key:"hired",label:"Hired"}].map(h=>e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 min-h-[200px] border border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-primary-700",children:h.label}),e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full border border-primary-300",children:g?.[h.key]??0})]}),e.jsx("div",{className:"space-y-2",children:(g?.[h.key]??0)===0&&e.jsx("div",{className:"text-center py-8 text-primary-500 text-sm",children:e.jsx("p",{children:"No candidates"})})})]},h.key))})]}),i.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden border border-primary-200",children:[e.jsx("div",{className:"px-8 py-6 border-b border-primary-200 bg-primary-50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-800",children:"Candidate Screening"}),e.jsxs("p",{className:"text-sm text-primary-600 mt-1",children:[i.length," candidates in pipeline"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search candidates...",value:m,onChange:h=>d(h.target.value),className:"w-64 pl-10 pr-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm focus:ring-2 focus:ring-accent-green focus:border-accent-green shadow-sm"})]}),e.jsxs("select",{value:n,onChange:h=>N(h.target.value),className:"px-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm text-primary-700 focus:ring-2 focus:ring-accent-green shadow-sm",children:[e.jsx("option",{value:"",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Offer"}),e.jsx("option",{value:"hired",children:"Hired"})]}),e.jsxs("select",{value:S,onChange:h=>j(h.target.value),className:"px-4 py-2.5 bg-white border border-primary-300 rounded-xl text-sm text-primary-700 focus:ring-2 focus:ring-accent-green shadow-sm",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Indeed",children:"Indeed"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Direct",children:"Direct Application"}),e.jsx("option",{value:"Agency",children:"Agency"})]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("p",{className:"text-sm text-primary-600 text-center py-8",children:["Full candidate screening table will be integrated in next phase.",e.jsx("br",{}),"Currently showing ",i.filter(h=>{const P=m.toLowerCase(),V=!m||h.full_name?.toLowerCase().includes(P)||h.email?.toLowerCase().includes(P),_=!n||h.stage===n,w=!S||h.source===S;return V&&_&&w}).length," filtered candidates."]})})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 border border-primary-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-3 p-4 bg-primary-50 hover:bg-accent-green/10 rounded-lg transition-colors border border-primary-200",children:[e.jsx("div",{className:"p-2 bg-accent-green/10 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-accent-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("span",{className:"font-medium text-primary-700",children:"New Position"})]})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Create New Position"}),e.jsx("button",{onClick:()=>k(!1),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:h=>{h.preventDefault(),b()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Position Title *"}),e.jsx("input",{type:"text",value:f.position_title,onChange:h=>x(P=>({...P,position_title:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., Thermodynamics Engineer",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Department *"}),e.jsx("input",{type:"text",value:f.department,onChange:h=>x(P=>({...P,department:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., Engineering / R&D",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Employment Type"}),e.jsxs("select",{value:f.employment_type,onChange:h=>x(P=>({...P,employment_type:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",children:[e.jsx("option",{value:"Full-time",children:"Full-time"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Internship",children:"Internship"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Headcount"}),e.jsx("input",{type:"number",value:f.headcount,onChange:h=>x(P=>({...P,headcount:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Salary Range Min (AED)"}),e.jsx("input",{type:"number",value:f.salary_range_min,onChange:h=>x(P=>({...P,salary_range_min:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., 15000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Salary Range Max (AED)"}),e.jsx("input",{type:"number",value:f.salary_range_max,onChange:h=>x(P=>({...P,salary_range_max:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green",placeholder:"e.g., 25000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Job Description"}),e.jsx("textarea",{value:f.job_description,onChange:h=>x(P=>({...P,job_description:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green min-h-[100px]",placeholder:"Enter job description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Requirements"}),e.jsx("textarea",{value:f.requirements,onChange:h=>x(P=>({...P,requirements:h.target.value})),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green min-h-[100px]",placeholder:"Enter requirements..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-6 py-2 border border-primary-200 text-primary-700 rounded-lg hover:bg-primary-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v||!f.position_title,className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:v?"Creating...":"Create Position"})]})]})]})})]})})}function Ot(){const s=qe(),{token:a}=zs(),{user:l}=Ie(),[g,i]=r.useState([]),[m,n]=r.useState([]),[S,v]=r.useState(!1),[E,C]=r.useState(""),[d,N]=r.useState(""),[j,z]=r.useState(!1),[k,f]=r.useState(null),[x,b]=r.useState({emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",personal_phone:"",personal_email:"",current_address:"",city:"",country:"",bank_name:"",bank_account_number:"",bank_iban:"",passport_number:"",passport_expiry:"",uae_id_number:"",uae_id_expiry:"",highest_education:"",shirt_size:"",pants_size:"",shoe_size:""}),[B,h]=r.useState(!1),[P,V]=r.useState(!1),[_,w]=r.useState(null),$=!!a,y=(o,M={})=>fetch(o,{...M,headers:{...M.headers,Authorization:`Bearer ${l?.token}`,"Content-Type":"application/json"}});r.useEffect(()=>{a&&T(a)},[a]),r.useEffect(()=>{l&&(l.role==="admin"||l.role==="hr")&&O()},[l]);const T=async o=>{V(!0),w(null);try{const M=await fetch(`${J}/onboarding/welcome/${o}`);if(!M.ok){const se=await M.json();throw new Error(se.detail||"Invalid or expired link")}const Q=await M.json();f(Q)}catch(M){w(M instanceof Error?M.message:"Failed to validate onboarding link")}finally{V(!1)}},O=async()=>{if(!(!l||l.role!=="admin"&&l.role!=="hr")){z(!0);try{const[o,M]=await Promise.all([y(`${J}/onboarding/tokens`),y(`${J}/onboarding/pending`)]);o.ok&&i(await o.json()),M.ok&&n(await M.json())}catch(o){console.error("Failed to fetch onboarding data:",o)}finally{z(!1)}}},G=async()=>{if(E.trim()){z(!0),w(null);try{const o=await y(`${J}/onboarding/invite`,{method:"POST",body:JSON.stringify({employee_id:E,expires_in_days:7})});if(!o.ok){const Q=await o.json();throw new Error(Q.detail||"Failed to generate invite")}const M=await o.json();N(`${window.location.origin}/public-onboarding/${M.token}`),await O()}catch(o){w(o instanceof Error?o.message:"Failed to generate invite")}finally{z(!1)}}},oe=async o=>{try{(await y(`${J}/onboarding/approve/${o}`,{method:"POST"})).ok&&await O()}catch(M){console.error("Failed to approve profile:",M)}},me=async o=>{if(o.preventDefault(),!!a){V(!0),w(null);try{const M=await fetch(`${J}/onboarding/submit/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!M.ok){const Q=await M.json();throw new Error(Q.detail||"Failed to submit profile")}h(!0)}catch(M){w(M instanceof Error?M.message:"Failed to submit profile")}finally{V(!1)}}},ne=o=>{navigator.clipboard.writeText(o)};return $?_?e.jsx("div",{className:"min-h-screen bg-primary-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 p-8 max-w-md text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-accent-red mx-auto mb-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Link Invalid or Expired"}),e.jsx("p",{className:"text-primary-600 mb-6",children:_}),e.jsx("p",{className:"text-sm text-primary-500",children:"Please contact HR for a new onboarding link."})]})}):B?e.jsx("div",{className:"min-h-screen bg-primary-50 flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 p-8 max-w-md text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-accent-green mx-auto mb-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-2",children:"Profile Submitted!"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Thank you for completing your profile. HR will review your information shortly."}),e.jsx("p",{className:"text-sm text-primary-500",children:"You can close this window now."})]})}):k?e.jsx("div",{className:"min-h-screen bg-primary-50 py-8 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card border border-primary-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-primary-200 p-6",children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-8 mb-4"}),e.jsxs("h1",{className:"text-2xl font-semibold text-primary-800 mb-1",children:["Welcome, ",k.name,"!"]}),e.jsx("p",{className:"text-accent-green",children:"Please complete your profile information below"})]}),e.jsx("div",{className:"p-6 bg-primary-50 border-b border-primary-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium text-primary-800",children:k.employee_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Department"}),e.jsx("p",{className:"font-medium text-primary-800",children:k.department||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Job Title"}),e.jsx("p",{className:"font-medium text-primary-800",children:k.job_title||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Location"}),e.jsx("p",{className:"font-medium text-primary-800",children:k.location||"-"})]})]})}),e.jsxs("form",{onSubmit:me,className:"p-6 space-y-6",children:[_&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:_}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Contact Name *",value:x.emergency_contact_name,onChange:o=>b({...x,emergency_contact_name:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0}),e.jsx("input",{type:"tel",placeholder:"Phone Number *",value:x.emergency_contact_phone,onChange:o=>b({...x,emergency_contact_phone:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0}),e.jsxs("select",{value:x.emergency_contact_relationship,onChange:o=>b({...x,emergency_contact_relationship:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",required:!0,children:[e.jsx("option",{value:"",children:"Relationship *"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Parent",children:"Parent"}),e.jsx("option",{value:"Sibling",children:"Sibling"}),e.jsx("option",{value:"Friend",children:"Friend"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"tel",placeholder:"Personal Phone",value:x.personal_phone,onChange:o=>b({...x,personal_phone:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"email",placeholder:"Personal Email",value:x.personal_email,onChange:o=>b({...x,personal_email:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Current Address"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{placeholder:"Street Address",value:x.current_address,onChange:o=>b({...x,current_address:o.target.value}),className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green",rows:2}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"City",value:x.city,onChange:o=>b({...x,city:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Country",value:x.country,onChange:o=>b({...x,country:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Bank Details (for salary)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Bank Name",value:x.bank_name,onChange:o=>b({...x,bank_name:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Account Number",value:x.bank_account_number,onChange:o=>b({...x,bank_account_number:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"IBAN",value:x.bank_iban,onChange:o=>b({...x,bank_iban:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),"ID Documents"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Passport Number",value:x.passport_number,onChange:o=>b({...x,passport_number:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Passport Expiry (DD/MM/YYYY)",value:x.passport_expiry,onChange:o=>b({...x,passport_expiry:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"UAE ID Number",value:x.uae_id_number,onChange:o=>b({...x,uae_id_number:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"UAE ID Expiry (DD/MM/YYYY)",value:x.uae_id_expiry,onChange:o=>b({...x,uae_id_expiry:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Additional Information"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Highest Education",value:x.highest_education,onChange:o=>b({...x,highest_education:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Shirt Size",value:x.shirt_size,onChange:o=>b({...x,shirt_size:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Pants Size",value:x.pants_size,onChange:o=>b({...x,pants_size:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"}),e.jsx("input",{type:"text",placeholder:"Shoe Size",value:x.shoe_size,onChange:o=>b({...x,shoe_size:o.target.value}),className:"px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]})]}),e.jsx("button",{type:"submit",disabled:P,className:"w-full py-3 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors disabled:opacity-50",children:P?"Submitting...":"Submit Profile"})]})]})})}):null:!l||l.role!=="admin"&&l.role!=="hr"?e.jsx("div",{className:"min-h-screen bg-primary-100 flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800 mb-4",children:"Access Required"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Please sign in with HR or Admin access."}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors",children:"Back to Home"})]})}):e.jsx("div",{className:"min-h-screen bg-primary-100 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Onboarding Management"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[l.name," (",l.role,")"]}),e.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 text-accent-green hover:bg-primary-50 rounded-lg transition-colors",children:"â† Back to Home"})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("button",{onClick:()=>{v(!0),N(""),C(""),w(null)},className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Invite New Joiner"]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-800",children:"Generate Onboarding Link"}),e.jsx("button",{onClick:()=>v(!1),className:"text-primary-300 hover:text-primary-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),_&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm",children:_}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-accent-green mb-2",children:"Share this link with the new joiner:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-emerald-200 rounded-lg text-sm"}),e.jsx("button",{onClick:()=>ne(d),className:"px-3 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green",children:"Copy"})]})]}),e.jsx("p",{className:"text-sm text-primary-600",children:"This link expires in 7 days."}),e.jsx("button",{onClick:()=>v(!1),className:"w-full py-2 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors",children:"Done"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Employee ID"}),e.jsx("input",{type:"text",value:E,onChange:o=>C(o.target.value),placeholder:"e.g., BAYN00010",className:"w-full px-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green"})]}),e.jsx("button",{onClick:G,disabled:j||!E.trim(),className:"w-full py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors disabled:opacity-50",children:j?"Generating...":"Generate Link"})]})]})}),m.length>0&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),"Pending Profile Reviews (",m.length,")"]}),e.jsx("div",{className:"space-y-3",children:m.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:o.name}),e.jsxs("p",{className:"text-sm text-primary-600",children:[o.employee_id," â€¢ ",o.department||"No department"," â€¢ ",o.job_title||"No title"]}),o.submitted_at&&e.jsxs("p",{className:"text-xs text-primary-300 mt-1",children:["Submitted: ",new Date(o.submitted_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>oe(o.employee_id),className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green transition-colors text-sm",children:"Approve"})]},o.employee_id))})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary-200",children:e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Onboarding Invites"})}),j&&g.length===0?e.jsx("div",{className:"p-8 text-center text-primary-600",children:"Loading..."}):g.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-primary-600",children:"No onboarding invites yet"}),e.jsx("p",{className:"text-sm text-primary-300 mt-1",children:'Click "Invite New Joiner" to create one'})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-primary-600 uppercase",children:"Views"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(o=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:o.employee_name}),e.jsx("p",{className:"text-xs text-primary-600",children:o.employee_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:new Date(o.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:new Date(o.expires_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${o.is_used?"bg-accent-green/10 text-accent-green":o.is_expired?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:o.is_used?"Completed":o.is_expired?"Expired":"Pending"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:o.access_count})]},o.token))})]})]})]})})}const Cr={name:"",email:"",department:"",job_title:"",location:"",nationality:"",gender:"",employment_status:"",visa_number:"",visa_issue_date:"",visa_expiry_date:"",emirates_id_number:"",emirates_id_expiry:"",medical_fitness_date:"",medical_fitness_expiry:"",iloe_status:"",iloe_expiry:"",contract_type:"",contract_start_date:"",contract_end_date:""};function Lr(s){const[a,l]=r.useState([]),[g,i]=r.useState(!1),[m,n]=r.useState(null),[S,v]=r.useState(null),[E,C]=r.useState(Cr),[d,N]=r.useState(!1),[j,z]=r.useState(!1),[k,f]=r.useState(null),x=r.useCallback(async()=>{if(!(!s?.token||!s?.role)){i(!0);try{const _=await te(`${J}/employees?active_only=false`,{token:s.token,role:s.role});if(_.ok){const w=await _.json();l(w)}}catch(_){console.error("Failed to fetch employees:",_)}finally{i(!1)}}},[s?.token,s?.role]),b=r.useCallback(_=>{v(_),C({name:_.name||"",email:_.email||"",department:_.department||"",job_title:_.job_title||"",location:_.location||"",nationality:_.nationality||"",gender:_.gender||"",employment_status:_.employment_status||"",visa_number:_.visa_number||"",visa_issue_date:_.visa_issue_date||"",visa_expiry_date:_.visa_expiry_date||"",emirates_id_number:_.emirates_id_number||"",emirates_id_expiry:_.emirates_id_expiry||"",medical_fitness_date:_.medical_fitness_date||"",medical_fitness_expiry:_.medical_fitness_expiry||"",iloe_status:_.iloe_status||"",iloe_expiry:_.iloe_expiry||"",contract_type:_.contract_type||"",contract_start_date:_.contract_start_date||"",contract_end_date:_.contract_end_date||""}),N(!0),n(null)},[]),B=r.useCallback(()=>{N(!1),v(null),n(null)},[]),h=r.useCallback(async _=>{if(_.preventDefault(),!(!S||!s)){i(!0),n(null);try{const w={};Object.entries(E).forEach(([y,T])=>{typeof T=="string"&&T.trim()!==""&&(w[y]=T)});const $=await te(`${J}/employees/${S.employee_id}`,{method:"PUT",body:JSON.stringify(w),token:s.token,role:s.role});if(!$.ok){const y=await $.json();throw new Error(y.detail||"Failed to update employee")}await x(),B()}catch(w){n(w instanceof Error?w.message:"Failed to update employee")}finally{i(!1)}}},[S,E,s,x,B]),P=r.useCallback(async _=>{const w=_.target.files?.[0];if(!(!w||!s)){z(!0),f(null),n(null);try{const $=new FormData;$.append("file",w);const y=await te(`${J}/employees/import`,{method:"POST",body:$,token:s.token,role:s.role});if(!y.ok){const O=await y.json();throw new Error(O.detail||"Import failed")}const T=await y.json();f(T),await x()}catch($){n($ instanceof Error?$.message:"Failed to import employees")}finally{z(!1),_.target.value=""}}},[s,x]),V=r.useCallback(()=>{n(null)},[]);return{employees:a,loading:g,error:m,selectedEmployee:S,employeeFormData:E,showEmployeeModal:d,importLoading:j,importResult:k,fetchEmployees:x,openEmployeeModal:b,closeEmployeeModal:B,updateEmployee:h,handleImportCSV:P,setEmployeeFormData:C,clearError:V}}function Sr(){const s=qe(),{user:a,logout:l}=Ie(),{employees:g,fetchEmployees:i}=Lr(a),[m,n]=r.useState("dashboard"),[S,v]=r.useState(""),[E,C]=r.useState(null),[d,N]=r.useState(null),[j,z]=r.useState(null),[k,f]=r.useState(!1),[x,b]=r.useState([]),[B,h]=r.useState(!1);r.useEffect(()=>{a?a.role!=="admin"&&a.role!=="hr"&&s("/"):s("/")},[a,s]);const P=r.useCallback(async()=>{if(a?.token)try{const y=await te(`${J}/admin/dashboard`,{token:a.token,role:a.role});if(y.ok){const T=await y.json();N(T)}}catch(y){console.error("Failed to fetch dashboard:",y)}},[a]),V=r.useCallback(async()=>{if(a?.token){f(!0);try{const y=await te(`${J}/employees/compliance/alerts?days=60`,{token:a.token,role:a.role});if(y.ok){const T=await y.json();z(T)}}catch(y){console.error("Failed to fetch compliance alerts:",y)}finally{f(!1)}}},[a]),_=r.useCallback(async()=>{if(!(!a?.token||a.role!=="admin")){h(!0);try{const y=await te(`${J}/admin/features`,{token:a.token,role:a.role});if(y.ok){const T=await y.json();b(T)}}catch(y){console.error("Failed to fetch features:",y)}finally{h(!1)}}},[a]),w=async(y,T)=>{if(a?.token)try{(await te(`${J}/admin/features/${y}?is_enabled=${T}`,{method:"PUT",token:a.token,role:a.role})).ok&&b(x.map(G=>G.key===y?{...G,is_enabled:T}:G))}catch(O){console.error("Failed to toggle feature:",O)}};r.useEffect(()=>{a&&(m==="dashboard"?(P(),i()):m==="employees"?i():m==="compliance"?V():m==="settings"&&_())},[m,a,P,i,V,_]);const $=g.filter(y=>y.name.toLowerCase().includes(S.toLowerCase())||y.employee_id.toLowerCase().includes(S.toLowerCase())||(y.job_title||"").toLowerCase().includes(S.toLowerCase()));return a?e.jsxs("div",{className:"min-h-screen bg-primary-50 p-8 relative",children:[E&&a?.token&&e.jsx(Oe,{employeeId:E,token:a.token,currentUserRole:a.role,currentUserId:a.employee_id,onClose:()=>C(null)}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/assets/logo.png",alt:"Baynunah",className:"h-6 mb-1"}),e.jsx("h1",{className:"text-2xl font-semibold text-primary-800",children:"Admin Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[a.name," (",a.role,")"]}),e.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 text-accent-green hover:bg-primary-100 rounded-lg transition-colors",children:"â† Back to Home"}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-primary-600 hover:bg-primary-100 rounded-lg transition-colors",children:"Logout"})]})]}),e.jsx("div",{className:"bg-white rounded-card shadow-card border border-primary-200 mb-6",children:e.jsxs("div",{className:"flex border-b border-primary-200",children:[e.jsx(He,{active:m==="dashboard",onClick:()=>n("dashboard"),icon:e.jsx(Mr,{}),label:"Dashboard"}),e.jsx(He,{active:m==="employees",onClick:()=>n("employees"),icon:e.jsx(qt,{}),label:`Employees (${g.length})`}),e.jsx(He,{active:m==="compliance",onClick:()=>n("compliance"),icon:e.jsx(Ut,{}),label:"Compliance",badge:j?j.expired.length+(j.days_7?.length||0):0}),e.jsx(He,{active:m==="recruitment",onClick:()=>n("recruitment"),icon:e.jsx(Yt,{}),label:"Recruitment"}),a.role==="admin"&&e.jsx(He,{active:m==="settings",onClick:()=>n("settings"),icon:e.jsx(Jt,{}),label:"Settings"})]})}),m==="dashboard"&&e.jsxs(e.Fragment,{children:[d&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(it,{label:"Total Employees",value:d.total_employees,color:"primary"}),e.jsx(it,{label:"Active Employees",value:d.active_employees,color:"green"}),e.jsx(it,{label:"Pending Renewals",value:d.pending_renewals,color:"amber"}),e.jsx(it,{label:"Features Enabled",value:`${d.features_enabled}/${d.features_total}`,color:"blue"})]}),e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(ft,{icon:e.jsx(qt,{}),title:"Manage Employees",description:"View and manage employees",onClick:()=>n("employees")}),e.jsx(ft,{icon:e.jsx(Ut,{}),title:"Compliance Alerts",description:"Document expiry warnings",onClick:()=>n("compliance")}),e.jsx(ft,{icon:e.jsx(Yt,{}),title:"Recruitment",description:"Manage hiring pipeline",onClick:()=>s("/recruitment")})]})]})]}),m==="employees"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-card shadow-card p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary-300"}),e.jsx("input",{type:"text",placeholder:"Search employees by name, ID, or job title...",value:S,onChange:y=>v(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-accent-green focus:border-accent-green"})]})}),e.jsxs("button",{onClick:()=>Xt(g),className:"px-4 py-2 bg-accent-green text-white rounded-lg hover:bg-accent-green/90 transition-colors flex items-center gap-2",children:[e.jsx(Br,{className:"w-5 h-5"}),"Export to Excel"]})]})}),e.jsxs("div",{className:"bg-white rounded-card shadow-card overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-primary-100 bg-primary-50",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-800",children:"Employee Directory"}),e.jsxs("p",{className:"text-sm text-primary-600 mt-1",children:[$.length," employees found"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 text-xs text-primary-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:$.slice(0,50).map(y=>e.jsxs("tr",{className:"hover:bg-primary-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-200 flex items-center justify-center text-primary-700 font-medium",children:y.name.split(" ").map(T=>T[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:y.name}),e.jsx("p",{className:"text-sm text-primary-600",children:y.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600 font-mono",children:y.employee_id}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:y.job_title||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:y.function||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${y.status==="active"?"bg-accent-green/10 text-accent-green border-accent-green/20":y.status==="on_leave"?"bg-amber-50 text-amber-700 border-amber-200":"bg-primary-50 text-primary-700 border-primary-200"}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>C(y.employee_id),className:"text-accent-green hover:text-accent-green/80 font-medium text-sm",children:"View Profile"})})]},y.id))})]})})]})]}),m==="compliance"&&e.jsx("div",{children:k?e.jsxs("div",{className:"bg-white rounded-card shadow-card p-12 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-primary-600",children:"Loading compliance alerts..."})]}):e.jsx("div",{className:"bg-white rounded-card shadow-card p-6",children:e.jsxs("p",{className:"text-primary-600",children:["Compliance alerts are available on the"," ",e.jsx("button",{onClick:()=>s("/compliance"),className:"text-accent-green hover:underline font-medium",children:"dedicated Compliance page"}),"."]})})}),m==="recruitment"&&e.jsx("div",{className:"bg-white rounded-card shadow-card p-6",children:e.jsxs("p",{className:"text-primary-600",children:["Recruitment management is available on the"," ",e.jsx("button",{onClick:()=>s("/recruitment"),className:"text-accent-green hover:underline font-medium",children:"dedicated Recruitment page"}),"."]})}),m==="settings"&&a.role==="admin"&&e.jsxs("div",{className:"bg-white rounded-card shadow-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-800 mb-6 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-accent-green"}),"Feature Toggles"]}),B?e.jsx("div",{className:"text-center text-primary-600 py-8",children:"Loading..."}):x.length===0?e.jsx("div",{className:"text-center text-primary-600 py-8",children:"No features configured"}):e.jsx("div",{className:"space-y-3",children:x.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-xl border border-primary-200 hover:border-accent-green/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-800",children:y.key}),e.jsx("p",{className:"text-sm text-primary-600",children:y.description}),e.jsx("span",{className:"text-xs text-primary-600",children:y.category})]}),e.jsx("button",{onClick:()=>w(y.key,!y.is_enabled),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${y.is_enabled?"bg-accent-green":"bg-primary-300"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-card ${y.is_enabled?"translate-x-6":"translate-x-1"}`})})]},y.key))})]})]})]}):null}function He({active:s,onClick:a,icon:l,label:g,badge:i}){return e.jsx("button",{onClick:a,className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${s?"text-accent-green border-b-2 border-accent-green bg-primary-50":"text-primary-600 hover:text-primary-800 hover:bg-primary-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l,g,i!==void 0&&i>0&&e.jsx("span",{className:"bg-accent-red text-white text-xs px-2 py-0.5 rounded-full",children:i})]})})}function it({label:s,value:a,color:l}){const g={primary:"text-primary-800",green:"text-accent-green",amber:"text-amber-600",blue:"text-blue-600"};return e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("p",{className:"text-sm text-primary-600",children:s}),e.jsx("p",{className:`text-3xl font-semibold ${g[l]}`,children:a})]})}function ft({icon:s,title:a,description:l,onClick:g}){return e.jsxs("button",{onClick:g,className:"p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors text-left",children:[e.jsx("div",{className:"w-8 h-8 text-accent-green mb-2",children:s}),e.jsx("p",{className:"font-medium text-primary-800",children:a}),e.jsx("p",{className:"text-sm text-primary-600",children:l})]})}function Mr(){return e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}function qt(){return e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}function Ut(){return e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}function Yt(){return e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}function Jt({className:s}){return e.jsxs("svg",{className:s||"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}function Er({className:s}){return e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}function Br({className:s}){return e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}function Dr(){return e.jsx($s,{children:e.jsx(Zs,{children:e.jsxs(Is,{children:[e.jsx(Le,{path:"/",element:e.jsx(fr,{})}),e.jsx(Le,{path:"/admin",element:e.jsx(Sr,{})}),e.jsx(Le,{path:"/compliance",element:e.jsx(vr,{})}),e.jsx(Le,{path:"/attendance",element:e.jsx(wr,{})}),e.jsx(Le,{path:"/recruitment",element:e.jsx(_r,{})}),e.jsx(Le,{path:"/onboarding",element:e.jsx(Ot,{})}),e.jsx(Le,{path:"/public-onboarding/:token?",element:e.jsx(Ot,{})}),e.jsx(Le,{path:"*",element:e.jsx(br,{})})]})})})}class Pr extends r.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,l){console.error("Error boundary caught:",a,l)}render(){return this.state.hasError?this.props.fallback||e.jsxs("div",{style:{padding:"2rem",textAlign:"center",background:"rgba(239, 68, 68, 0.1)",borderRadius:"0.5rem",margin:"1rem"},children:[e.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Something went wrong"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}Ts.createRoot(document.getElementById("root")).render(e.jsx(Vs.StrictMode,{children:e.jsx(Pr,{children:e.jsx(Dr,{})})}));
